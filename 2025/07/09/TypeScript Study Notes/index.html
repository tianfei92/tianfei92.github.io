

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Ariel">
  <meta name="keywords" content="">
  
    <meta name="description" content="ä¸€ã€TypeScript åŸºç¡€ä¸æ ¸å¿ƒæ¦‚å¿µ1.1 ç±»å‹ç³»ç»Ÿæ·±å…¥1.1.1 åŸºæœ¬ç±»å‹ä¸ç±»å‹æ¨æ–­æœºåˆ¶åŸºæœ¬ç±»å‹ï¼ˆPrimitive Typesï¼‰    ç±»å‹ æè¿° ç¤ºä¾‹    string å­—ç¬¦ä¸²ç±»å‹ let name: string &#x3D; â€œAliceâ€   number æ•°å€¼ç±»å‹ï¼ˆå«æ•´æ•°&#x2F;æµ®ç‚¹æ•°ï¼‰ let age: number &#x3D; 30   boolean å¸ƒå°”ç±»å‹ le">
<meta property="og:type" content="article">
<meta property="og:title" content="TypeScript ä¸“é¢˜çŸ¥è¯†å­¦ä¹ ">
<meta property="og:url" content="https://tianfei92.github.io/2025/07/09/TypeScript%20Study%20Notes/index.html">
<meta property="og:site_name" content="Ariel&#39;s Blog">
<meta property="og:description" content="ä¸€ã€TypeScript åŸºç¡€ä¸æ ¸å¿ƒæ¦‚å¿µ1.1 ç±»å‹ç³»ç»Ÿæ·±å…¥1.1.1 åŸºæœ¬ç±»å‹ä¸ç±»å‹æ¨æ–­æœºåˆ¶åŸºæœ¬ç±»å‹ï¼ˆPrimitive Typesï¼‰    ç±»å‹ æè¿° ç¤ºä¾‹    string å­—ç¬¦ä¸²ç±»å‹ let name: string &#x3D; â€œAliceâ€   number æ•°å€¼ç±»å‹ï¼ˆå«æ•´æ•°&#x2F;æµ®ç‚¹æ•°ï¼‰ let age: number &#x3D; 30   boolean å¸ƒå°”ç±»å‹ le">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2025-07-09T09:15:51.000Z">
<meta property="article:modified_time" content="2025-07-08T03:02:13.895Z">
<meta property="article:author" content="Ariel">
<meta property="article:tag" content="TypeScript">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>TypeScript ä¸“é¢˜çŸ¥è¯†å­¦ä¹  - Ariel&#39;s Blog</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"tianfei92.github.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Ariel</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>å½’æ¡£</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>åˆ†ç±»</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>æ ‡ç­¾</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>å…³äº</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="TypeScript ä¸“é¢˜çŸ¥è¯†å­¦ä¹ "></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2025-07-09 17:15" pubdate>
          2025å¹´7æœˆ9æ—¥ ä¸‹åˆ
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          29k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          244 åˆ†é’Ÿ
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">TypeScript ä¸“é¢˜çŸ¥è¯†å­¦ä¹ </h1>
            
            
              <div class="markdown-body">
                
                <h1 id="ä¸€ã€TypeScript-åŸºç¡€ä¸æ ¸å¿ƒæ¦‚å¿µ"><a href="#ä¸€ã€TypeScript-åŸºç¡€ä¸æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="ä¸€ã€TypeScript åŸºç¡€ä¸æ ¸å¿ƒæ¦‚å¿µ"></a>ä¸€ã€TypeScript åŸºç¡€ä¸æ ¸å¿ƒæ¦‚å¿µ</h1><h2 id="1-1-ç±»å‹ç³»ç»Ÿæ·±å…¥"><a href="#1-1-ç±»å‹ç³»ç»Ÿæ·±å…¥" class="headerlink" title="1.1 ç±»å‹ç³»ç»Ÿæ·±å…¥"></a>1.1 ç±»å‹ç³»ç»Ÿæ·±å…¥</h2><h3 id="1-1-1-åŸºæœ¬ç±»å‹ä¸ç±»å‹æ¨æ–­æœºåˆ¶"><a href="#1-1-1-åŸºæœ¬ç±»å‹ä¸ç±»å‹æ¨æ–­æœºåˆ¶" class="headerlink" title="1.1.1 åŸºæœ¬ç±»å‹ä¸ç±»å‹æ¨æ–­æœºåˆ¶"></a>1.1.1 åŸºæœ¬ç±»å‹ä¸ç±»å‹æ¨æ–­æœºåˆ¶</h3><p><strong>åŸºæœ¬ç±»å‹ï¼ˆPrimitive Typesï¼‰</strong></p>
<table>
<thead>
<tr>
<th align="left">ç±»å‹</th>
<th align="left">æè¿°</th>
<th align="left">ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">string</td>
<td align="left">å­—ç¬¦ä¸²ç±»å‹</td>
<td align="left">let name: string &#x3D; â€œAliceâ€</td>
</tr>
<tr>
<td align="left">number</td>
<td align="left">æ•°å€¼ç±»å‹ï¼ˆå«æ•´æ•°&#x2F;æµ®ç‚¹æ•°ï¼‰</td>
<td align="left">let age: number &#x3D; 30</td>
</tr>
<tr>
<td align="left">boolean</td>
<td align="left">å¸ƒå°”ç±»å‹</td>
<td align="left">let isDone: boolean &#x3D; true</td>
</tr>
<tr>
<td align="left">null</td>
<td align="left">ç©ºå€¼ï¼ˆéœ€å¼€å¯ strictNullChecksï¼‰</td>
<td align="left">let n: null &#x3D; null</td>
</tr>
<tr>
<td align="left">undefined	æœªå®šä¹‰å€¼</td>
<td align="left">let u: undefined &#x3D; undefined</td>
<td align="left"></td>
</tr>
<tr>
<td align="left">symbol</td>
<td align="left">å”¯ä¸€æ ‡è¯†ç¬¦ï¼ˆES6ï¼‰</td>
<td align="left">const sym: symbol &#x3D; Symbol()</td>
</tr>
<tr>
<td align="left">bigint</td>
<td align="left">å¤§æ•´æ•°ï¼ˆES2020ï¼‰</td>
<td align="left">let big: bigint &#x3D; 100n</td>
</tr>
<tr>
<td align="left">void</td>
<td align="left">æ— è¿”å›å€¼ï¼ˆå‡½æ•°ï¼‰</td>
<td align="left">function warn(): void { console.log() }</td>
</tr>
</tbody></table>
<span id="more"></span>

<p><strong>ç±»å‹æ¨æ–­æœºåˆ¶ï¼ˆType Inferenceï¼‰</strong></p>
<p>(1) å˜é‡åˆå§‹åŒ–æ¨æ–­</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">let</span> a = <span class="hljs-number">10</span>;          <span class="hljs-comment">// æ¨æ–­ä¸º number</span><br><span class="hljs-keyword">const</span> b = <span class="hljs-string">&quot;text&quot;</span>;    <span class="hljs-comment">// æ¨æ–­ä¸º &quot;text&quot;ï¼ˆå­—é¢é‡ç±»å‹ï¼‰</span><br><span class="hljs-keyword">const</span> c = &#123; <span class="hljs-attr">x</span>: <span class="hljs-number">1</span> &#125;;  <span class="hljs-comment">// æ¨æ–­ä¸º &#123; x: number &#125;</span><br></code></pre></td></tr></table></figure>

<p>(2) å‡½æ•°è¿”å›å€¼æ¨æ–­</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"><span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> x + y;      <span class="hljs-comment">// è‡ªåŠ¨æ¨æ–­è¿”å› number</span><br>&#125;<br><span class="hljs-keyword">const</span> <span class="hljs-title function_">fn</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-literal">true</span>; <span class="hljs-comment">// æ¨æ–­è¿”å› boolean</span><br></code></pre></td></tr></table></figure>

<p>(3) ä¸Šä¸‹æ–‡æ¨æ–­ï¼ˆContextual Typingï¼‰</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å›è°ƒå‡½æ•°å‚æ•°æ ¹æ®ä¸Šä¸‹æ–‡æ¨æ–­ç±»å‹</span><br>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> v * <span class="hljs-number">2</span>);       <span class="hljs-comment">// v æ¨æ–­ä¸º number</span><br><br><span class="hljs-comment">// äº‹ä»¶å¤„ç†å‡½æ•°å‚æ•°æ¨æ–­</span><br><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e.<span class="hljs-property">clientX</span>);         <span class="hljs-comment">// e æ¨æ–­ä¸º MouseEvent</span><br>&#125;);<br></code></pre></td></tr></table></figure>

<p><strong>ç‰¹æ®Šæ¨æ–­åœºæ™¯</strong></p>
<table>
<thead>
<tr>
<th align="left">åœºæ™¯</th>
<th align="left">æ¨æ–­è¡Œä¸º</th>
<th align="left">ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">æœªåˆå§‹åŒ–å˜é‡</td>
<td align="left">æ¨æ–­ä¸º anyï¼ˆéä¸¥æ ¼æ¨¡å¼ï¼‰</td>
<td align="left">let x; â†’ x: any</td>
</tr>
<tr>
<td align="left">è”åˆç±»å‹åˆå§‹åŒ–</td>
<td align="left">æ¨æ–­æ‰€æœ‰å¯èƒ½ç±»å‹çš„è”åˆ</td>
<td align="left">let arr &#x3D; [0, â€œaâ€] â†’ <code>(number	string)[]</code></td>
</tr>
<tr>
<td align="left">const å¸¸é‡æ–­è¨€</td>
<td align="left">æ¨æ–­ä¸ºå­—é¢é‡ç±»å‹</td>
<td align="left">const size &#x3D; 100 as const â†’ 100</td>
</tr>
</tbody></table>
<p><strong>ç±»å‹æ¨æ–­ä¸æ˜¾ç¤ºæ³¨è§£å¯¹æ¯”</strong></p>
<table>
<thead>
<tr>
<th align="left">åœºæ™¯</th>
<th align="left">æ¨èæ–¹å¼</th>
<th align="left">åŸå› </th>
</tr>
</thead>
<tbody><tr>
<td align="left">å‡½æ•°å‚æ•°</td>
<td align="left">æ˜¾ç¤ºæ³¨è§£</td>
<td align="left">é¿å… any ä¼ æ’­é£é™©</td>
</tr>
<tr>
<td align="left">å¤æ‚å¯¹è±¡å­—é¢é‡</td>
<td align="left">æ˜¾ç¤ºæ³¨è§£æˆ–æ¥å£</td>
<td align="left">ç¡®ä¿ç»“æ„ç¬¦åˆé¢„æœŸ</td>
</tr>
<tr>
<td align="left">ç®€å•å˜é‡åˆå§‹åŒ–</td>
<td align="left">ä¾èµ–ç±»å‹æ¨æ–­</td>
<td align="left">å‡å°‘å†—ä½™ä»£ç </td>
</tr>
<tr>
<td align="left">å‡½æ•°è¿”å›å€¼</td>
<td align="left">ä¾èµ–ç±»å‹æ¨æ–­</td>
<td align="left">ä¿æŒä¸å®ç°åŒæ­¥ï¼ˆé™¤å…¬å¼€APIæ–‡æ¡£å¤–ï¼‰</td>
</tr>
</tbody></table>
<h3 id="1-1-2-å­—é¢é‡ç±»å‹ä¸è”åˆç±»å‹å®æˆ˜"><a href="#1-1-2-å­—é¢é‡ç±»å‹ä¸è”åˆç±»å‹å®æˆ˜" class="headerlink" title="1.1.2 å­—é¢é‡ç±»å‹ä¸è”åˆç±»å‹å®æˆ˜"></a>1.1.2 å­—é¢é‡ç±»å‹ä¸è”åˆç±»å‹å®æˆ˜</h3><p><strong>å­—é¢é‡ç±»å‹ï¼ˆLiteral Typesï¼‰</strong></p>
<p>æ ¸å¿ƒæ¦‚å¿µï¼šå°†å€¼ä½œä¸ºç±»å‹ä½¿ç”¨ï¼Œé™åˆ¶å˜é‡åªèƒ½å–ç‰¹å®šå€¼ã€‚</p>
<table>
<thead>
<tr>
<th align="left">åˆ†ç±»</th>
<th align="left">è¯­æ³•ç¤ºä¾‹</th>
<th align="left">ç±»å‹è¡¨ç¤º</th>
</tr>
</thead>
<tbody><tr>
<td align="left">å­—ç¬¦ä¸²å­—é¢é‡</td>
<td align="left">let dir: â€œUPâ€ &#x3D; â€œUPâ€</td>
<td align="left">â€œUPâ€</td>
</tr>
<tr>
<td align="left">æ•°å­—å­—é¢é‡</td>
<td align="left">let size: 100 &#x3D; 100</td>
<td align="left">100</td>
</tr>
<tr>
<td align="left">å¸ƒå°”å­—é¢é‡</td>
<td align="left">let flag: true &#x3D; true</td>
<td align="left">true</td>
</tr>
<tr>
<td align="left">æ¨¡æ¿å­—é¢é‡</td>
<td align="left">type T &#x3D; prefix_${string}&#96;&#96;</td>
<td align="left">æ¨¡å¼åŒ¹é…ç±»å‹</td>
</tr>
</tbody></table>
<p>å·¥ç¨‹ä»·å€¼ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ›¿ä»£æšä¸¾ï¼ˆæ›´è½»é‡ï¼‰</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">HttpMethod</span> = <span class="hljs-string">&quot;GET&quot;</span> | <span class="hljs-string">&quot;POST&quot;</span> | <span class="hljs-string">&quot;PUT&quot;</span> | <span class="hljs-string">&quot;DELETE&quot;</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"><span class="hljs-attr">method</span>: <span class="hljs-title class_">HttpMethod</span></span>) &#123;...&#125;<br><br><span class="hljs-title function_">fetchData</span>(<span class="hljs-string">&quot;GET&quot;</span>);  <span class="hljs-comment">// âœ…</span><br><span class="hljs-title function_">fetchData</span>(<span class="hljs-string">&quot;COPY&quot;</span>); <span class="hljs-comment">// ğŸš« ç¼–è¯‘é”™è¯¯ï¼šéå…è®¸å€¼</span><br></code></pre></td></tr></table></figure>

<p><strong>è”åˆç±»å‹ï¼ˆUnion Typesï¼‰</strong></p>
<p>æ ¸å¿ƒæ¦‚å¿µï¼šç»„åˆå¤šä¸ªç±»å‹ï¼Œè¡¨ç¤ºå€¼å¯ä»¥æ˜¯å…¶ä¸­ä»»æ„ä¸€ç§ç±»å‹ã€‚</p>
<p>è¯­æ³•ä¸ç‰¹æ€§ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">ID</span> = <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>;         <span class="hljs-comment">// åŸºç¡€è”åˆ</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Status</span> = <span class="hljs-string">&quot;idle&quot;</span> | <span class="hljs-string">&quot;loading&quot;</span>;  <span class="hljs-comment">// å­—é¢é‡è”åˆ</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Shape</span> = <span class="hljs-title class_">Circle</span> | <span class="hljs-title class_">Square</span>;      <span class="hljs-comment">// å¯¹è±¡è”åˆ</span><br><br><span class="hljs-comment">// è”åˆç±»å‹ç‰¹æ€§ï¼š</span><br><span class="hljs-keyword">let</span> <span class="hljs-attr">id</span>: <span class="hljs-variable constant_">ID</span> = <span class="hljs-string">&quot;abc123&quot;</span>; <span class="hljs-comment">// âœ… å…è®¸å­—ç¬¦ä¸²</span><br>id = <span class="hljs-number">100</span>;              <span class="hljs-comment">// âœ… å…è®¸æ•°å­—</span><br>id = <span class="hljs-literal">true</span>;             <span class="hljs-comment">// ğŸš« ä¸å…è®¸å¸ƒå°”å€¼</span><br></code></pre></td></tr></table></figure>

<p><strong>ç±»å‹æ”¶çª„å®æˆ˜ï¼ˆType Narrowingï¼‰</strong></p>
<p>æ ¸å¿ƒæ–¹æ³•ï¼šåœ¨ä»£ç åˆ†æ”¯ä¸­ç¼©å°è”åˆç±»å‹èŒƒå›´</p>
<table>
<thead>
<tr>
<th align="left">æŠ€æœ¯</th>
<th align="left">ç¤ºä¾‹</th>
<th align="left">é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td align="left">typeof å®ˆå«</td>
<td align="left"><code>if (typeof val === &quot;string&quot;) &#123; val.toUpperCase() &#125;</code></td>
<td align="left">åŸºæœ¬ç±»å‹è”åˆ</td>
</tr>
<tr>
<td align="left">instanceof å®ˆå«</td>
<td align="left"><code>if (err instanceof Error) &#123; console.log(err.message) &#125;</code></td>
<td align="left">ç±»å®ä¾‹è”åˆ</td>
</tr>
<tr>
<td align="left">ç›¸ç­‰æ€§æ£€æŸ¥</td>
<td align="left"><code>if (status === &quot;loading&quot;) &#123; showSpinner() &#125;</code></td>
<td align="left">å­—é¢é‡è”åˆ</td>
</tr>
<tr>
<td align="left">è‡ªå®šä¹‰å®ˆå«</td>
<td align="left"><code>function isFish(pet: Fish Bird): pet is Fish &#123; return &quot;swim&quot; in pet &#125;</code></td>
<td align="left">å¤æ‚å¯¹è±¡è”åˆ</td>
</tr>
<tr>
<td align="left">å¯è¾¨è¯†è”åˆ</td>
<td align="left">é€šè¿‡å…±åŒå­—æ®µåŒºåˆ†ç±»å‹ï¼ˆè§ä¸‹ä¾‹ï¼‰</td>
<td align="left">å¯¹è±¡è”åˆï¼ˆè®¾è®¡æ¨¡å¼ï¼‰</td>
</tr>
</tbody></table>
<p>å¯è¾¨è¯†è”åˆå®æˆ˜ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// Step 1: å®šä¹‰å…·æœ‰kindå­—æ®µçš„è”åˆç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Shape</span> = <br>  | &#123; <span class="hljs-attr">kind</span>: <span class="hljs-string">&quot;circle&quot;</span>; <span class="hljs-attr">radius</span>: <span class="hljs-built_in">number</span> &#125; <br>  | &#123; <span class="hljs-attr">kind</span>: <span class="hljs-string">&quot;square&quot;</span>; <span class="hljs-attr">size</span>: <span class="hljs-built_in">number</span> &#125;;<br><br><span class="hljs-comment">// Step 2: ä½¿ç”¨kindå­—æ®µæ”¶çª„ç±»å‹</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getArea</span>(<span class="hljs-params"><span class="hljs-attr">shape</span>: <span class="hljs-title class_">Shape</span></span>) &#123;<br>  <span class="hljs-keyword">switch</span> (shape.<span class="hljs-property">kind</span>) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;circle&quot;</span>:<br>      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * shape.<span class="hljs-property">radius</span> ** <span class="hljs-number">2</span>;  <span class="hljs-comment">// æ­¤åˆ†æ”¯shapeè¢«æ”¶çª„ä¸ºåœ†å½¢</span><br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;square&quot;</span>:<br>      <span class="hljs-keyword">return</span> shape.<span class="hljs-property">size</span> ** <span class="hljs-number">2</span>;              <span class="hljs-comment">// æ­¤åˆ†æ”¯shapeè¢«æ”¶çª„ä¸ºæ–¹å½¢</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹æœ€ä½³å®è·µ</strong></p>
<p>(1) é¿å…è¿‡åº¦ä½¿ç”¨å­—é¢é‡è”åˆ</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä¸æ¨èï¼šç›´æ¥ä½¿ç”¨å­—é¢é‡</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">setColor</span>(<span class="hljs-params"><span class="hljs-attr">color</span>: <span class="hljs-string">&quot;red&quot;</span> | <span class="hljs-string">&quot;green&quot;</span> | <span class="hljs-string">&quot;blue&quot;</span></span>) &#123;...&#125;<br><br><span class="hljs-comment">// æ¨èï¼šä½¿ç”¨å‘½åç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">PrimaryColor</span> = <span class="hljs-string">&quot;red&quot;</span> | <span class="hljs-string">&quot;green&quot;</span> | <span class="hljs-string">&quot;blue&quot;</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">setColor</span>(<span class="hljs-params"><span class="hljs-attr">color</span>: <span class="hljs-title class_">PrimaryColor</span></span>) &#123;...&#125;<br></code></pre></td></tr></table></figure>

<p>(2) è”åˆç±»å‹ä¸å‡½æ•°é‡è½½é…åˆ</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ ¹æ®å‚æ•°ç±»å‹è¿”å›ä¸åŒç»“æœ</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">padLeft</span>(<span class="hljs-params"><span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">padding</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">string</span> &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> padding === <span class="hljs-string">&quot;number&quot;</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot; &quot;</span>.<span class="hljs-title function_">repeat</span>(padding) + value;  <span class="hljs-comment">// æ•°å­—å¤„ç†</span><br>  &#125;<br>  <span class="hljs-keyword">return</span> padding + value;                <span class="hljs-comment">// å­—ç¬¦ä¸²å¤„ç†</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="1-1-3-any-unknown-never-çš„åŒºåˆ«ä¸åº”ç”¨åœºæ™¯"><a href="#1-1-3-any-unknown-never-çš„åŒºåˆ«ä¸åº”ç”¨åœºæ™¯" class="headerlink" title="1.1.3 any&#x2F;unknown&#x2F;never çš„åŒºåˆ«ä¸åº”ç”¨åœºæ™¯"></a>1.1.3 any&#x2F;unknown&#x2F;never çš„åŒºåˆ«ä¸åº”ç”¨åœºæ™¯</h3><p><strong>æ ¸å¿ƒç±»å‹å¯¹æ¯”</strong></p>
<table>
<thead>
<tr>
<th align="left">ç‰¹æ€§</th>
<th align="left">any</th>
<th align="left">unknown</th>
<th align="left">never</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ç±»å‹å®‰å…¨æ€§</td>
<td align="left">âŒ å®Œå…¨ç¦ç”¨ç±»å‹æ£€æŸ¥</td>
<td align="left">âœ… å®‰å…¨å®¹å™¨ï¼ˆéœ€æ˜¾å¼ç±»å‹æ–­è¨€ï¼‰</td>
<td align="left">âœ… è¡¨ç¤ºä¸å¯èƒ½å­˜åœ¨çš„å€¼</td>
</tr>
<tr>
<td align="left">å¯èµ‹å€¼ç»™</td>
<td align="left">ä»»æ„ç±»å‹</td>
<td align="left">ä»… any å’Œ unknown</td>
<td align="left">ä»»æ„ç±»å‹ï¼ˆåº•éƒ¨ç±»å‹ï¼‰</td>
</tr>
<tr>
<td align="left">å¯æ¥å—èµ‹å€¼</td>
<td align="left">ä»»æ„ç±»å‹</td>
<td align="left">ä»»æ„ç±»å‹</td>
<td align="left">ä¸å¯èµ‹å€¼ï¼ˆé™¤ never æœ¬èº«ï¼‰</td>
</tr>
<tr>
<td align="left">æ“ä½œè‡ªç”±åº¦</td>
<td align="left">ç›´æ¥è®¿é—®å±æ€§&#x2F;æ–¹æ³•</td>
<td align="left">å¿…é¡»å…ˆæ–­è¨€å…·ä½“ç±»å‹	æ— æ³•å®ä¾‹åŒ–</td>
<td align="left"></td>
</tr>
</tbody></table>
<p><strong>any ç±»å‹è¯¦è§£</strong></p>
<p>è®¾è®¡ç›®çš„ï¼šç”¨äºå…¼å®¹ JavaScript æ— ç±»å‹ä»£ç æˆ–ç¬¬ä¸‰æ–¹åº“ç¼ºå¤±ç±»å‹å£°æ˜ã€‚</p>
<p>å…¸å‹åœºæ™¯ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åœºæ™¯1ï¼šè¿ç§»é—ç•™JSä»£ç </span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">legacyData</span>: <span class="hljs-built_in">any</span> = <span class="hljs-title function_">getUntypedData</span>();<br>legacyData.<span class="hljs-title function_">invalidMethod</span>(); <span class="hljs-comment">// ç¼–è¯‘é€šè¿‡ï¼Œè¿è¡Œæ—¶å¯èƒ½æŠ¥é”™</span><br><br><span class="hljs-comment">// åœºæ™¯2ï¼šåŠ¨æ€å±æ€§è®¿é—®</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">obj</span>: <span class="hljs-built_in">any</span> = &#123;&#125;;<br>obj.<span class="hljs-property">arbitraryProperty</span> = <span class="hljs-number">123</span>; <span class="hljs-comment">// å…è®¸ä»»æ„å±æ€§èµ‹å€¼</span><br></code></pre></td></tr></table></figure>

<p>é£é™©è­¦ç¤ºï¼šä½¿ç”¨ any ä¼šç ´åç±»å‹ç³»ç»Ÿçš„å®‰å…¨æ€§ï¼Œåº”é€šè¿‡ tsconfig.json å¼€å¯ noImplicitAny ä¸¥æ ¼æ£€æŸ¥ã€‚</p>
<p><strong>unknown ç±»å‹è¯¦è§£</strong></p>
<p>è®¾è®¡ç›®çš„ï¼šæä¾›ç±»å‹å®‰å…¨çš„é¡¶å±‚å®¹å™¨ï¼Œæ›¿ä»£ any å¤„ç†ä¸ç¡®å®šç±»å‹ã€‚</p>
<p>æ ‡å‡†ä½¿ç”¨æ¨¡å¼ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 1. æ¥æ”¶ä¸ç¡®å®šç±»å‹å€¼</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">userInput</span>: <span class="hljs-built_in">unknown</span> = <span class="hljs-title function_">fetchUserInput</span>();<br><br><span class="hljs-comment">// 2. ä½¿ç”¨æ—¶æ˜¾å¼æ–­è¨€</span><br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> userInput === <span class="hljs-string">&quot;string&quot;</span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(userInput.<span class="hljs-title function_">toUpperCase</span>()); <span class="hljs-comment">// æ”¶çª„ä¸ºstring</span><br>&#125;<br><br><span class="hljs-comment">// 3. æˆ–ä½¿ç”¨ç±»å‹æ–­è¨€</span><br><span class="hljs-keyword">const</span> parsed = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(jsonString) <span class="hljs-keyword">as</span> <span class="hljs-built_in">unknown</span>; <span class="hljs-comment">// å®‰å…¨å®¹å™¨</span><br></code></pre></td></tr></table></figure>

<p>å·¥ç¨‹å®è·µï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å®‰å…¨ååºåˆ—åŒ–å‡½æ•°</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">safeParse</span>(<span class="hljs-params"><span class="hljs-attr">json</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">unknown</span> &#123;<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(json);<br>  &#125; <span class="hljs-keyword">catch</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span>;<br>  &#125;<br>&#125;<br><span class="hljs-keyword">const</span> data = <span class="hljs-title function_">safeParse</span>(<span class="hljs-string">&#x27;&#123;&quot;name&quot;:&quot;Alice&quot;&#125;&#x27;</span>);<br><span class="hljs-keyword">if</span> (data &amp;&amp; <span class="hljs-keyword">typeof</span> data === <span class="hljs-string">&quot;object&quot;</span> &amp;&amp; <span class="hljs-string">&quot;name&quot;</span> <span class="hljs-keyword">in</span> data) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(data.<span class="hljs-property">name</span>); <span class="hljs-comment">// é€šè¿‡ç±»å‹å®ˆå«å®‰å…¨è®¿é—®</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>never ç±»å‹è¯¦è§£</strong></p>
<p>è®¾è®¡ç›®çš„ï¼šè¡¨ç¤ºæ°¸è¿œä¸ä¼šå‘ç”Ÿçš„å€¼æˆ–ä¸å¯è¾¾çš„ä»£ç åˆ†æ”¯ã€‚</p>
<p>æ ¸å¿ƒåº”ç”¨åœºæ™¯ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åœºæ™¯1ï¼šæŠ›å‡ºå¼‚å¸¸çš„å‡½æ•°</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">error</span>(<span class="hljs-params"><span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">never</span> &#123;<br>  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(message);<br>&#125;<br><br><span class="hljs-comment">// åœºæ™¯2ï¼šæ­»å¾ªç¯å‡½æ•°</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">infiniteLoop</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">never</span> &#123;<br>  <span class="hljs-keyword">while</span> (<span class="hljs-literal">true</span>) &#123;&#125;<br>&#125;<br><br><span class="hljs-comment">// åœºæ™¯3ï¼šç©·å°½æ£€æŸ¥ï¼ˆExhaustiveness checkingï¼‰</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Shape</span> = <span class="hljs-string">&quot;circle&quot;</span> | <span class="hljs-string">&quot;square&quot;</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getArea</span>(<span class="hljs-params"><span class="hljs-attr">shape</span>: <span class="hljs-title class_">Shape</span></span>): <span class="hljs-built_in">number</span> &#123;<br>  <span class="hljs-keyword">switch</span> (shape) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;circle&quot;</span>: <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * r**<span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;square&quot;</span>: <span class="hljs-keyword">return</span> s**<span class="hljs-number">2</span>;<br>    <span class="hljs-attr">default</span>: <br>      <span class="hljs-keyword">const</span> <span class="hljs-attr">_exhaustiveCheck</span>: <span class="hljs-built_in">never</span> = shape; <span class="hljs-comment">// è‹¥æ–°å¢shapeç±»å‹ä¼šæŠ¥é”™</span><br>      <span class="hljs-keyword">return</span> _exhaustiveCheck;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç±»å‹ç³»ç»Ÿç‰¹æ€§ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// never æ˜¯ä»»æ„ç±»å‹çš„å­ç±»å‹</span><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">n</span>: <span class="hljs-built_in">never</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-attr">a</span>: <span class="hljs-built_in">string</span> = n; <span class="hljs-comment">// âœ… ç¼–è¯‘é€šè¿‡</span><br><br><span class="hljs-comment">// ç©ºæ•°ç»„ç±»å‹æ¨æ–­</span><br><span class="hljs-keyword">const</span> emptyArray = []; <span class="hljs-comment">// æ¨æ–­ä¸º never[]</span><br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹é€‰æ‹©æŒ‡å—</strong></p>
<table>
<thead>
<tr>
<th align="left">åœºæ™¯</th>
<th align="left">æ¨èç±»å‹</th>
<th align="left">åŸå› </th>
</tr>
</thead>
<tbody><tr>
<td align="left">ç¬¬ä¸‰æ–¹JSåº“è¿ç§»</td>
<td align="left">any</td>
<td align="left">å¿«é€Ÿè¿‡æ¸¡æœŸæ–¹æ¡ˆ</td>
</tr>
<tr>
<td align="left">APIå“åº”è§£æ</td>
<td align="left">unknown</td>
<td align="left">å®‰å…¨å¤„ç†åŠ¨æ€æ•°æ®ç»“æ„</td>
</tr>
<tr>
<td align="left">é”™è¯¯å¤„ç†å‡½æ•°</td>
<td align="left">never</td>
<td align="left">æ˜ç¡®è¡¨ç¤ºå‡½æ•°ä¸ä¼šæ­£å¸¸è¿”å›</td>
</tr>
<tr>
<td align="left">ç±»å‹å®ˆå«ä¸­ä¸å¯è¾¾åˆ†æ”¯</td>
<td align="left">never</td>
<td align="left">è§¦å‘ç©·å°½æ£€æŸ¥</td>
</tr>
<tr>
<td align="left">æ³›å‹ç¼–ç¨‹ä¸­çš„ç©ºé›†åˆ</td>
<td align="left">never</td>
<td align="left">è¡¨ç¤ºä¸å¯èƒ½å­˜åœ¨çš„ç±»å‹ï¼ˆå¦‚ keyof never &#x3D; neverï¼‰</td>
</tr>
</tbody></table>
<h3 id="1-1-4-ç±»å‹æ–­è¨€ä¸ç±»å‹å®ˆå«å®ç°åŸç†"><a href="#1-1-4-ç±»å‹æ–­è¨€ä¸ç±»å‹å®ˆå«å®ç°åŸç†" class="headerlink" title="1.1.4 ç±»å‹æ–­è¨€ä¸ç±»å‹å®ˆå«å®ç°åŸç†"></a>1.1.4 ç±»å‹æ–­è¨€ä¸ç±»å‹å®ˆå«å®ç°åŸç†</h3><p><strong>ç±»å‹æ–­è¨€ï¼ˆType Assertionsï¼‰</strong></p>
<p>æœ¬è´¨ï¼šå¼€å‘è€…å‘ç¼–è¯‘å™¨æä¾›æ›´å…·ä½“çš„ç±»å‹ä¿¡æ¯ï¼ˆä¸æ”¹å˜è¿è¡Œæ—¶å€¼ï¼‰</p>
<p>ä¸¤ç§è¯­æ³•å½¢å¼ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å°–æ‹¬å·è¯­æ³•ï¼ˆJSXä¸­ä¸å¯ç”¨ï¼‰</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">strLength</span>: <span class="hljs-built_in">number</span> = (&lt;<span class="hljs-built_in">string</span>&gt;someValue).<span class="hljs-property">length</span>;<br><br><span class="hljs-comment">// as è¯­æ³•ï¼ˆæ¨èï¼‰</span><br><span class="hljs-keyword">const</span> el = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&#x27;app&#x27;</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLDivElement</span>;<br></code></pre></td></tr></table></figure>

<p>ä½¿ç”¨åœºæ™¯ï¼š</p>
<p>(1) DOM å…ƒç´ ç±»å‹ç»†åŒ–</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> input = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;input[type=&quot;text&quot;]&#x27;</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">HTMLInputElement</span>;<br>input.<span class="hljs-property">value</span> = <span class="hljs-string">&#x27;new value&#x27;</span>; <span class="hljs-comment">// å®‰å…¨è®¿é—®valueå±æ€§</span><br></code></pre></td></tr></table></figure>

<p>(2) è”åˆç±»å‹æ”¶çª„</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">padLeft</span>(<span class="hljs-params"><span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">padding</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span>) &#123;<br>  <span class="hljs-keyword">if</span> ((padding <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>) &gt; <span class="hljs-number">0</span>) &#123; <span class="hljs-comment">// æ–­è¨€ä¸ºnumber</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot; &quot;</span>.<span class="hljs-title function_">repeat</span>(padding <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>) + value;<br>  &#125;<br>  <span class="hljs-keyword">return</span> (padding <span class="hljs-keyword">as</span> <span class="hljs-built_in">string</span>) + value;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>(3) å¤„ç†anyç±»å‹</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">unknownData</span>: <span class="hljs-built_in">any</span> = <span class="hljs-title function_">fetchData</span>();<br><span class="hljs-keyword">const</span> validData = unknownData <span class="hljs-keyword">as</span> <span class="hljs-title class_">UserData</span>; <span class="hljs-comment">// æ–­è¨€ä¸ºå…·ä½“ç±»å‹</span><br></code></pre></td></tr></table></figure>

<p>æ³¨æ„äº‹é¡¹ï¼š</p>
<ul>
<li>æ–­è¨€å¿…é¡»æ»¡è¶³â€ç»“æ„å…¼å®¹â€ï¼ˆå¦‚ä¸èƒ½å°† string æ–­è¨€ä¸º numberï¼‰</li>
<li>åŒé‡æ–­è¨€è§„é¿é™åˆ¶ï¼ˆæ…ç”¨ï¼‰ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> str = <span class="hljs-string">&#x27;hello&#x27;</span>;<br><span class="hljs-keyword">const</span> num = str <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span> <span class="hljs-keyword">as</span> <span class="hljs-built_in">number</span>; <span class="hljs-comment">// ç»•è¿‡ç±»å‹æ£€æŸ¥</span><br></code></pre></td></tr></table></figure>

<p><strong>ç±»å‹å®ˆå«ï¼ˆType Guardsï¼‰</strong></p>
<p>åŸç†ï¼šé€šè¿‡è¿è¡Œæ—¶æ£€æŸ¥è§¦å‘ç¼–è¯‘æ—¶ç±»å‹æ”¶çª„</p>
<p>å†…ç½®å®ˆå«æœºåˆ¶ï¼š</p>
<table>
<thead>
<tr>
<th align="left">ç±»å‹å®ˆå«</th>
<th align="left">è¯­æ³•ç¤ºä¾‹</th>
<th align="left">æ”¶çª„æ•ˆæœ</th>
</tr>
</thead>
<tbody><tr>
<td align="left">typeof</td>
<td align="left">typeof val &#x3D;&#x3D;&#x3D; â€œstringâ€</td>
<td align="left">åŸºæœ¬ç±»å‹ â†’ å…·ä½“ç±»å‹</td>
</tr>
<tr>
<td align="left">instanceof</td>
<td align="left">obj instanceof Date</td>
<td align="left">ç±»å®ä¾‹ â†’ å…·ä½“ç±»</td>
</tr>
<tr>
<td align="left">in æ“ä½œç¬¦</td>
<td align="left">â€œpropâ€ in obj</td>
<td align="left">å¯¹è±¡ â†’ åŒ…å«è¯¥å±æ€§ç±»å‹</td>
</tr>
<tr>
<td align="left">å­—é¢é‡ç›¸ç­‰æ£€æŸ¥</td>
<td align="left">status &#x3D;&#x3D;&#x3D; â€œsuccessâ€</td>
<td align="left">è”åˆ â†’ å…·ä½“å­—é¢é‡ç±»å‹</td>
</tr>
</tbody></table>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">printValue</span>(<span class="hljs-params"><span class="hljs-attr">val</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span>) &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> val === <span class="hljs-string">&quot;string&quot;</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(val.<span class="hljs-title function_">toUpperCase</span>()); <span class="hljs-comment">// valæ”¶çª„ä¸ºstring</span><br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(val.<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>)); <span class="hljs-comment">// valæ”¶çª„ä¸ºnumber</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>è‡ªå®šä¹‰ç±»å‹å®ˆå«</strong></p>
<p>å®ç°åŸç†ï¼šè¿”å›ç±»å‹è°“è¯ï¼ˆarg is Tï¼‰</p>
<p>æ ‡å‡†æ¨¡å¼ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">isString</span>(<span class="hljs-params"><span class="hljs-attr">val</span>: <span class="hljs-built_in">unknown</span></span>): val is <span class="hljs-built_in">string</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">typeof</span> val === <span class="hljs-string">&quot;string&quot;</span>;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">process</span>(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">unknown</span></span>) &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isString</span>(input)) &#123;<br>    input.<span class="hljs-title function_">trim</span>(); <span class="hljs-comment">// inputè¢«æ”¶çª„ä¸ºstring</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å¤æ‚å¯¹è±¡å®ˆå«å®æˆ˜ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Cat</span> &#123; <span class="hljs-title function_">meow</span>(): <span class="hljs-built_in">void</span> &#125;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Dog</span> &#123; <span class="hljs-title function_">bark</span>(): <span class="hljs-built_in">void</span> &#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">isCat</span>(<span class="hljs-params"><span class="hljs-attr">animal</span>: <span class="hljs-title class_">Cat</span> | <span class="hljs-title class_">Dog</span></span>): animal is <span class="hljs-title class_">Cat</span> &#123;<br>  <span class="hljs-keyword">return</span> (animal <span class="hljs-keyword">as</span> <span class="hljs-title class_">Cat</span>).<span class="hljs-property">meow</span> !== <span class="hljs-literal">undefined</span>;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleAnimal</span>(<span class="hljs-params"><span class="hljs-attr">animal</span>: <span class="hljs-title class_">Cat</span> | <span class="hljs-title class_">Dog</span></span>) &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isCat</span>(animal)) &#123;<br>    animal.<span class="hljs-title function_">meow</span>(); <span class="hljs-comment">// æ”¶çª„ä¸ºCat</span><br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    animal.<span class="hljs-title function_">bark</span>(); <span class="hljs-comment">// æ”¶çª„ä¸ºDog</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å¯è¾¨è¯†è”åˆï¼ˆDiscriminated Unionsï¼‰</strong></p>
<p>ç‰¹æ®Šç±»å‹å®ˆå«ï¼šé€šè¿‡å…±åŒå­—æ®µè‡ªåŠ¨æ”¶çª„</p>
<p>å®ç°åŸç†ï¼š</p>
<ul>
<li>å®šä¹‰å…·æœ‰ç›¸åŒåˆ¤åˆ«å­—æ®µçš„è”åˆç±»å‹</li>
<li>é€šè¿‡åˆ¤åˆ«å­—æ®µå€¼æ”¶çª„ç±»å‹</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">NetworkState</span> =<br>  | &#123; <span class="hljs-attr">state</span>: <span class="hljs-string">&quot;loading&quot;</span> &#125;<br>  | &#123; <span class="hljs-attr">state</span>: <span class="hljs-string">&quot;success&quot;</span>, <span class="hljs-attr">response</span>: <span class="hljs-built_in">string</span> &#125;<br>  | &#123; <span class="hljs-attr">state</span>: <span class="hljs-string">&quot;error&quot;</span>, <span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span> &#125;;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">logState</span>(<span class="hljs-params"><span class="hljs-attr">state</span>: <span class="hljs-title class_">NetworkState</span></span>) &#123;<br>  <span class="hljs-keyword">switch</span> (state.<span class="hljs-property">state</span>) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;loading&quot;</span>:<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Loading...&quot;</span>); <span class="hljs-comment">// state: &#123; state: &quot;loading&quot; &#125;</span><br>      <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;success&quot;</span>:<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(state.<span class="hljs-property">response</span>); <span class="hljs-comment">// state: &#123; state: &quot;success&quot;, response: string &#125;</span><br>      <span class="hljs-keyword">break</span>;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;error&quot;</span>:<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(state.<span class="hljs-property">message</span>); <span class="hljs-comment">// state: &#123; state: &quot;error&quot;, message: string &#125;</span><br>      <span class="hljs-keyword">break</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹å®è·µè¦ç‚¹</strong></p>
<ol>
<li>ä¼˜å…ˆä½¿ç”¨ç±»å‹å®ˆå«ï¼šæ¯”ç±»å‹æ–­è¨€æ›´å®‰å…¨ï¼ˆè¿è¡Œæ—¶éªŒè¯ï¼‰</li>
<li>é¿å…è¿‡åº¦æ–­è¨€ï¼šè¿‡åº¦ä½¿ç”¨ as ä¼šå¼±åŒ–ç±»å‹æ£€æŸ¥</li>
<li>å®ˆå«å‡½æ•°å¤ç”¨ï¼šæå–å¤æ‚åˆ¤æ–­é€»è¾‘ä¸ºå¯å¤ç”¨å®ˆå«</li>
<li>å¯è¾¨è¯†è”åˆè®¾è®¡ï¼šé€‚åˆç®¡ç†å¤æ‚çŠ¶æ€æœºç±»å‹</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// çŠ¶æ€æœºç±»å‹å®ˆå«ç¤ºä¾‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">State</span> = &#123; <span class="hljs-attr">status</span>: <span class="hljs-string">&#x27;idle&#x27;</span> &#125; | &#123; <span class="hljs-attr">status</span>: <span class="hljs-string">&#x27;fetching&#x27;</span>; <span class="hljs-attr">startTime</span>: <span class="hljs-built_in">number</span> &#125;;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleState</span>(<span class="hljs-params"><span class="hljs-attr">state</span>: <span class="hljs-title class_">State</span></span>) &#123;<br>  <span class="hljs-keyword">if</span> (state.<span class="hljs-property">status</span> === <span class="hljs-string">&#x27;fetching&#x27;</span>) &#123;<br>    <span class="hljs-keyword">const</span> duration = <span class="hljs-title class_">Date</span>.<span class="hljs-title function_">now</span>() - state.<span class="hljs-property">startTime</span>; <span class="hljs-comment">// å®‰å…¨è®¿é—®startTime</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="1-1-5-ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿä¸é¸­å­ç±»å‹"><a href="#1-1-5-ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿä¸é¸­å­ç±»å‹" class="headerlink" title="1.1.5 ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿä¸é¸­å­ç±»å‹"></a>1.1.5 ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿä¸é¸­å­ç±»å‹</h3><p><strong>æ ¸å¿ƒæ¦‚å¿µè§£æ</strong></p>
<table>
<thead>
<tr>
<th align="left">æœ¯è¯­</th>
<th align="left">å®šä¹‰</th>
<th align="left">å¯¹æ¯”æ¨¡å‹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ç»“æ„åŒ–ç±»å‹ç³»ç»Ÿ</td>
<td align="left">ç±»å‹å…¼å®¹æ€§åŸºäºç±»å‹çš„ç»“æ„å±æ€§ï¼ˆè€Œéåç§°ï¼‰</td>
<td align="left">TypeScript, Go</td>
</tr>
<tr>
<td align="left">åä¹‰ç±»å‹ç³»ç»Ÿ</td>
<td align="left">ç±»å‹å…¼å®¹æ€§åŸºäºç±»å‹å£°æ˜åç§°ï¼ˆéœ€æ˜¾å¼ç»§æ‰¿ï¼‰</td>
<td align="left">Java, C#</td>
</tr>
<tr>
<td align="left">é¸­å­ç±»å‹</td>
<td align="left">â€œå¦‚æœå®ƒèµ°èµ·æ¥åƒé¸­å­ã€å«èµ·æ¥åƒé¸­å­ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯é¸­å­â€ï¼ˆå…³æ³¨è¡Œä¸ºè€Œéå…·ä½“ç±»å‹ï¼‰</td>
<td align="left">åŠ¨æ€è¯­è¨€å“²å­¦</td>
</tr>
</tbody></table>
<p><strong>ç»“æ„åŒ–ç±»å‹ç³»ç»ŸåŸç†</strong></p>
<p>åŸºæœ¬è§„åˆ™ï¼š</p>
<ul>
<li>ç±»å‹ A å…¼å®¹ç±»å‹ B å½“ä¸”ä»…å½“ A æ‹¥æœ‰ B çš„æ‰€æœ‰å¿…éœ€æˆå‘˜ï¼ˆæˆå‘˜åå’Œç±»å‹åŒ¹é…ï¼‰</li>
</ul>
<p>ç¤ºä¾‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Vector2D</span> &#123;<br>  <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-comment">// ç±»æ— éœ€æ˜¾å¼å®ç°æ¥å£ï¼ˆç»“æ„åŒ¹é…å³å¯ï¼‰</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Point2D</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>, <span class="hljs-keyword">public</span> <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span></span>) &#123;&#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">v</span>: <span class="hljs-title class_">Vector2D</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Point2D</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>); <span class="hljs-comment">// âœ… å…¼å®¹</span><br></code></pre></td></tr></table></figure>

<p>å±æ€§æ£€æŸ¥è§„åˆ™ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Person</span> &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-comment">// ç›´æ¥èµ‹å€¼å­—é¢é‡æ—¶è§¦å‘ä¸¥æ ¼æ£€æŸ¥</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">p</span>: <span class="hljs-title class_">Person</span> = &#123; <br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Alice&quot;</span>,<br>  <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>,<br>  <span class="hljs-attr">gender</span>: <span class="hljs-string">&quot;female&quot;</span>  <span class="hljs-comment">// ğŸš« é”™è¯¯ï¼å¤šä½™å±æ€§</span><br>&#125;;<br><br><span class="hljs-comment">// é€šè¿‡ä¸­é—´å˜é‡èµ‹å€¼ï¼ˆç»•è¿‡é¢å¤–å±æ€§æ£€æŸ¥ï¼‰</span><br><span class="hljs-keyword">const</span> obj = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">25</span>, <span class="hljs-attr">gender</span>: <span class="hljs-string">&quot;male&quot;</span> &#125;;<br><span class="hljs-keyword">const</span> <span class="hljs-attr">p2</span>: <span class="hljs-title class_">Person</span> = obj; <span class="hljs-comment">// âœ… å…¼å®¹ï¼ˆç»“æ„æ»¡è¶³æ ¸å¿ƒå±æ€§ï¼‰</span><br></code></pre></td></tr></table></figure>

<p><strong>é¸­å­ç±»å‹å®æˆ˜åœºæ™¯</strong></p>
<p>åœºæ™¯1ï¼šå‡½æ•°å‚æ•°å…¼å®¹</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Loggable</span> &#123;<br>  <span class="hljs-attr">log</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConsoleLogger</span> &#123;<br>  <span class="hljs-title function_">log</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Logging...&quot;</span>) &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">FileLogger</span> &#123;<br>  <span class="hljs-title function_">log</span>(<span class="hljs-params"></span>) &#123; fs.<span class="hljs-title function_">writeFile</span>(<span class="hljs-string">&quot;log.txt&quot;</span>, <span class="hljs-string">&quot;...&quot;</span>) &#125;<br>&#125;<br><br><span class="hljs-comment">// æ¥å—ä»»ä½•å…·æœ‰logæ–¹æ³•çš„å¯¹è±¡</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">logOutput</span>(<span class="hljs-params"><span class="hljs-attr">logger</span>: <span class="hljs-title class_">Loggable</span></span>) &#123;<br>  logger.<span class="hljs-title function_">log</span>();<br>&#125;<br><br><span class="hljs-title function_">logOutput</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ConsoleLogger</span>()); <span class="hljs-comment">// âœ…</span><br><span class="hljs-title function_">logOutput</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileLogger</span>());    <span class="hljs-comment">// âœ…</span><br></code></pre></td></tr></table></figure>

<p>åœºæ™¯2ï¼šAPIå“åº”å¤„ç†</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApiResponse</span> &#123;<br>  <span class="hljs-attr">data</span>: <span class="hljs-built_in">unknown</span>;<br>  <span class="hljs-attr">status</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-comment">// æ— éœ€å¼ºåˆ¶è½¬æ¢ï¼Œåªè¦ç»“æ„åŒ¹é…</span><br><span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetchAPI</span>();<br><span class="hljs-title function_">processResponse</span>(response); <br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">processResponse</span>(<span class="hljs-params"><span class="hljs-attr">res</span>: <span class="hljs-title class_">ApiResponse</span></span>) &#123;<br>  <span class="hljs-keyword">if</span> (res.<span class="hljs-property">status</span> === <span class="hljs-number">200</span>) &#123;<br>    <span class="hljs-title function_">parseData</span>(res.<span class="hljs-property">data</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>ç»“æ„åŒ–ç±»å‹çš„è¾¹ç•Œæ§åˆ¶</strong></p>
<p>(1) ç²¾ç¡®ç±»å‹æ§åˆ¶ï¼ˆé¿å…æ„å¤–åŒ¹é…ï¼‰</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä½¿ç”¨ç‹¬ç‰¹æ ‡è¯†é˜²æ­¢ç»“æ„è¯¯åŒ¹é…</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> &#123;<br>  <span class="hljs-attr">_type</span>: <span class="hljs-string">&quot;user&quot;</span>; <span class="hljs-comment">// å”¯ä¸€æ ‡è¯†</span><br>  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Admin</span> &#123;<br>  <span class="hljs-attr">_type</span>: <span class="hljs-string">&quot;admin&quot;</span>; <span class="hljs-comment">// å”¯ä¸€æ ‡è¯†</span><br>  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">privileges</span>: <span class="hljs-built_in">string</span>[];<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleEntity</span>(<span class="hljs-params"><span class="hljs-attr">entity</span>: <span class="hljs-title class_">User</span> | <span class="hljs-title class_">Admin</span></span>) &#123;<br>  <span class="hljs-keyword">if</span> (entity.<span class="hljs-property">_type</span> === <span class="hljs-string">&quot;user&quot;</span>) &#123;<br>    <span class="hljs-comment">// å®‰å…¨æ”¶çª„åˆ°Userç±»å‹</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>(2) å¯é€‰å±æ€§ä¸æœªçŸ¥å±æ€§å¤„ç†</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span> &#123;<br>  <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">debug</span>?: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// å¯é€‰å±æ€§</span><br>  [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span>; <span class="hljs-comment">// å…è®¸æœªçŸ¥å±æ€§</span><br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">Config</span> = &#123;<br>  <span class="hljs-attr">width</span>: <span class="hljs-number">100</span>,<br>  <span class="hljs-attr">height</span>: <span class="hljs-number">200</span>,<br>  <span class="hljs-attr">color</span>: <span class="hljs-string">&quot;blue&quot;</span> <span class="hljs-comment">// âœ… å…è®¸é¢å¤–å±æ€§ï¼ˆå› ç´¢å¼•ç­¾åå­˜åœ¨ï¼‰</span><br>&#125;;<br></code></pre></td></tr></table></figure>

<p><strong>ä¸åä¹‰ç±»å‹ç³»ç»Ÿçš„äº’æ“ä½œ</strong></p>
<p>æ¨¡æ‹Ÿåä¹‰ç±»å‹ï¼ˆé€šè¿‡äº¤å‰ç±»å‹ï¼‰ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åˆ›å»ºåä¹‰ç±»å‹æ ‡è®°</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">UserID</span> = <span class="hljs-built_in">string</span> &amp; &#123; <span class="hljs-attr">__brand</span>: <span class="hljs-string">&quot;UserID&quot;</span> &#125;;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">OrderID</span> = <span class="hljs-built_in">string</span> &amp; &#123; <span class="hljs-attr">__brand</span>: <span class="hljs-string">&quot;OrderID&quot;</span> &#125;;<br><br><span class="hljs-comment">// ç±»å‹åˆ›å»ºå‡½æ•°</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">createUserID</span>(<span class="hljs-params"><span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">UserID</span> &#123;<br>  <span class="hljs-keyword">return</span> id <span class="hljs-keyword">as</span> <span class="hljs-title class_">UserID</span>;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">userId</span>: <span class="hljs-title class_">UserID</span> = <span class="hljs-title function_">createUserID</span>(<span class="hljs-string">&quot;user-123&quot;</span>);<br><span class="hljs-keyword">const</span> <span class="hljs-attr">orderId</span>: <span class="hljs-title class_">OrderID</span> = <span class="hljs-string">&quot;order-456&quot;</span> <span class="hljs-keyword">as</span> <span class="hljs-title class_">OrderID</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getUser</span>(<span class="hljs-params"><span class="hljs-attr">id</span>: <span class="hljs-title class_">UserID</span></span>) &#123;...&#125;<br><br><span class="hljs-title function_">getUser</span>(userId); <span class="hljs-comment">// âœ…</span><br><span class="hljs-title function_">getUser</span>(orderId); <span class="hljs-comment">// ğŸš« ç¼–è¯‘é”™è¯¯ï¼šç±»å‹ä¸å…¼å®¹</span><br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹å®è·µè¦ç‚¹</strong></p>
<ol>
<li>ä¼˜å…ˆä½¿ç”¨æ¥å£è€Œéç±»ï¼šæ¥å£æ›´ç¬¦åˆç»“æ„åŒ–ç±»å‹å“²å­¦ï¼ˆè½»é‡çº§å¥‘çº¦ï¼‰</li>
<li>é¿å…è¿‡åº¦åŒ¹é…é—®é¢˜ï¼šé€šè¿‡æœ€å°åŒ–æ¥å£å±æ€§å‡å°‘æ„å¤–å…¼å®¹</li>
<li>åˆ©ç”¨ç±»å‹æ¨å¯¼ä¼˜åŠ¿ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// è‡ªåŠ¨æ¨å¯¼è¿”å›ç±»å‹ç¬¦åˆç»“æ„</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">createPoint</span>(<span class="hljs-params"><span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> &#123; x, y, <span class="hljs-attr">z</span>: <span class="hljs-number">0</span> &#125;; <span class="hljs-comment">// è‡ªåŠ¨å…¼å®¹ Vector2D</span><br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="4">
<li>é¸­å­ç±»å‹æµ‹è¯•ç­–ç•¥ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// è¿è¡Œæ—¶éªŒè¯å¯¹è±¡æ˜¯å¦æ»¡è¶³ç»“æ„</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">isVector2D</span>(<span class="hljs-params"><span class="hljs-attr">obj</span>: <span class="hljs-built_in">any</span></span>): obj is <span class="hljs-title class_">Vector2D</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;x&quot;</span> <span class="hljs-keyword">in</span> obj &amp;&amp; <span class="hljs-string">&quot;y&quot;</span> <span class="hljs-keyword">in</span> obj;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="1-2-æ¥å£ä¸é¢å‘å¯¹è±¡"><a href="#1-2-æ¥å£ä¸é¢å‘å¯¹è±¡" class="headerlink" title="1.2 æ¥å£ä¸é¢å‘å¯¹è±¡"></a>1.2 æ¥å£ä¸é¢å‘å¯¹è±¡</h2><h3 id="1-2-1-æ¥å£é«˜çº§ç‰¹æ€§ï¼ˆå¯é€‰å±æ€§ã€åªè¯»å±æ€§ã€ç´¢å¼•ç­¾åï¼‰"><a href="#1-2-1-æ¥å£é«˜çº§ç‰¹æ€§ï¼ˆå¯é€‰å±æ€§ã€åªè¯»å±æ€§ã€ç´¢å¼•ç­¾åï¼‰" class="headerlink" title="1.2.1 æ¥å£é«˜çº§ç‰¹æ€§ï¼ˆå¯é€‰å±æ€§ã€åªè¯»å±æ€§ã€ç´¢å¼•ç­¾åï¼‰"></a>1.2.1 æ¥å£é«˜çº§ç‰¹æ€§ï¼ˆå¯é€‰å±æ€§ã€åªè¯»å±æ€§ã€ç´¢å¼•ç­¾åï¼‰</h3><p><strong>å¯é€‰å±æ€§ï¼ˆOptional Propertiesï¼‰</strong></p>
<p>è¯­æ³•ï¼šåœ¨å±æ€§ååæ·»åŠ  ?</p>
<p>ä½œç”¨ï¼šå…è®¸å¯¹è±¡ç¼ºå°‘è¯¥å±æ€§</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserProfile</span> &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">age</span>?: <span class="hljs-built_in">number</span>;  <span class="hljs-comment">// å¯é€‰å±æ€§</span><br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">user1</span>: <span class="hljs-title class_">UserProfile</span> = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Alice&quot;</span> &#125;;          <span class="hljs-comment">// âœ… age å¯çœç•¥</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">user2</span>: <span class="hljs-title class_">UserProfile</span> = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Bob&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> &#125;;  <span class="hljs-comment">// âœ…</span><br></code></pre></td></tr></table></figure>

<p>è¿è¡Œæ—¶æ£€æŸ¥ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;age&quot;</span> <span class="hljs-keyword">in</span> user1) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(user1.<span class="hljs-property">age</span>.<span class="hljs-title function_">toFixed</span>()); <span class="hljs-comment">// å®‰å…¨è®¿é—®</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>åªè¯»å±æ€§ï¼ˆReadonly Propertiesï¼‰</strong></p>
<p>è¯­æ³•ï¼šä½¿ç”¨ readonly ä¿®é¥°ç¬¦</p>
<p>ä½œç”¨ï¼šåˆå§‹åŒ–åç¦æ­¢ä¿®æ”¹</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span> &#123;<br>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">apiKey</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">endpoint</span>: <span class="hljs-built_in">string</span>;<br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">Config</span> = &#123;<br>  <span class="hljs-attr">apiKey</span>: <span class="hljs-string">&quot;abc123&quot;</span>,<br>  <span class="hljs-attr">endpoint</span>: <span class="hljs-string">&quot;/api&quot;</span><br>&#125;;<br><br>config.<span class="hljs-property">endpoint</span> = <span class="hljs-string">&quot;/new&quot;</span>; <span class="hljs-comment">// âœ… å…è®¸ä¿®æ”¹</span><br>config.<span class="hljs-property">apiKey</span> = <span class="hljs-string">&quot;xyz&quot;</span>;    <span class="hljs-comment">// ğŸš« ç¼–è¯‘é”™è¯¯ï¼šåªè¯»å±æ€§</span><br></code></pre></td></tr></table></figure>

<p>ç‰¹æ®Šåœºæ™¯ - åªè¯»æ•°ç»„ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ImmutableData</span> &#123;<br>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">tags</span>: <span class="hljs-built_in">string</span>[];<br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">data</span>: <span class="hljs-title class_">ImmutableData</span> = &#123; <span class="hljs-attr">tags</span>: [<span class="hljs-string">&quot;frontend&quot;</span>, <span class="hljs-string">&quot;react&quot;</span>] &#125;;<br>data.<span class="hljs-property">tags</span>.<span class="hljs-title function_">push</span>(<span class="hljs-string">&quot;typescript&quot;</span>); <span class="hljs-comment">// âœ… å…è®¸ï¼ˆæ•°ç»„å¼•ç”¨æœªå˜ï¼‰</span><br>data.<span class="hljs-property">tags</span> = [<span class="hljs-string">&quot;new&quot;</span>];         <span class="hljs-comment">// ğŸš« ç¦æ­¢é‡æ–°èµ‹å€¼</span><br></code></pre></td></tr></table></figure>

<p><strong>ç´¢å¼•ç­¾åï¼ˆIndex Signaturesï¼‰</strong></p>
<p>è¯­æ³•ï¼š[key: KeyType]: ValueType</p>
<p>ä½œç”¨ï¼šå®šä¹‰åŠ¨æ€å±æ€§å</p>
<p>åŸºç¡€ç”¨æ³•ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">StringMap</span> &#123;<br>  [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// å…è®¸ä»»æ„å­—ç¬¦ä¸²å±æ€§å</span><br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">scores</span>: <span class="hljs-title class_">StringMap</span> = &#123;<br>  <span class="hljs-attr">math</span>: <span class="hljs-number">95</span>,<br>  <span class="hljs-attr">science</span>: <span class="hljs-number">90</span><br>&#125;;<br>scores[<span class="hljs-string">&quot;english&quot;</span>] = <span class="hljs-number">88</span>; <span class="hljs-comment">// âœ… åŠ¨æ€æ·»åŠ </span><br></code></pre></td></tr></table></figure>

<p>æ··åˆä½¿ç”¨ï¼ˆå›ºå®šå±æ€§ + ç´¢å¼•ç­¾åï¼‰ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">HybridInterface</span> &#123;<br>  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;          <span class="hljs-comment">// å›ºå®šå±æ€§</span><br>  [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">any</span>;  <span class="hljs-comment">// åŠ¨æ€å±æ€§</span><br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">obj</span>: <span class="hljs-title class_">HybridInterface</span> = &#123;<br>  <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;123&quot;</span>,<br>  <span class="hljs-attr">tempData</span>: &#123; <span class="hljs-comment">/*...*/</span> &#125;, <span class="hljs-comment">// âœ… åŠ¨æ€å±æ€§</span><br>  <span class="hljs-attr">count</span>: <span class="hljs-number">10</span>             <span class="hljs-comment">// âœ…</span><br>&#125;;<br>obj.<span class="hljs-property">id</span> = <span class="hljs-string">&quot;456&quot;</span>;         <span class="hljs-comment">// âœ… å›ºå®šå±æ€§å¯ä¿®æ”¹</span><br></code></pre></td></tr></table></figure>

<p>ç´¢å¼•ç±»å‹é™åˆ¶ï¼š</p>
<table>
<thead>
<tr>
<th align="left">ç´¢å¼•ç±»å‹</th>
<th align="left">ç¤ºä¾‹</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">string</td>
<td align="left">[key: string]: T</td>
<td align="left">æ”¯æŒæ‰€æœ‰å­—ç¬¦ä¸²é”®</td>
</tr>
<tr>
<td align="left">number</td>
<td align="left">[index: number]: T</td>
<td align="left">æ•°ç»„å¼è®¿é—®ï¼ˆå®é™…é”®ä»ä¸ºå­—ç¬¦ä¸²ï¼‰</td>
</tr>
<tr>
<td align="left">symbol</td>
<td align="left">[sym: symbol]: T</td>
<td align="left">ES6 Symbol é”®</td>
</tr>
<tr>
<td align="left">æ¨¡æ¿å­—é¢é‡</td>
<td align="left">[key: test_${string}]: T</td>
<td align="left">TS 4.4+ æ¨¡å¼åŒ¹é…</td>
</tr>
</tbody></table>
<p><strong>é«˜çº§ç»„åˆåº”ç”¨</strong></p>
<p>åœºæ™¯ï¼šé…ç½®å¯¹è±¡</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">AppConfig</span> &#123;<br>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">version</span>: <span class="hljs-built_in">string</span>;   <span class="hljs-comment">// åªè¯»ç‰ˆæœ¬å·</span><br>  <span class="hljs-attr">env</span>?: <span class="hljs-string">&quot;dev&quot;</span> | <span class="hljs-string">&quot;prod&quot;</span>;       <span class="hljs-comment">// å¯é€‰ç¯å¢ƒ</span><br>  [<span class="hljs-attr">option</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">unknown</span>;  <span class="hljs-comment">// å…¶ä»–åŠ¨æ€é…ç½®</span><br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">AppConfig</span> = &#123;<br>  <span class="hljs-attr">version</span>: <span class="hljs-string">&quot;1.0.0&quot;</span>,<br>  <span class="hljs-attr">debug</span>: <span class="hljs-literal">true</span>,       <span class="hljs-comment">// âœ… åŠ¨æ€å±æ€§</span><br>  <span class="hljs-attr">maxRetries</span>: <span class="hljs-number">3</span>      <span class="hljs-comment">// âœ…</span><br>&#125;;<br><br>config.<span class="hljs-property">version</span> = <span class="hljs-string">&quot;2.0&quot;</span>; <span class="hljs-comment">// ğŸš« ç¦æ­¢ä¿®æ”¹åªè¯»å±æ€§</span><br></code></pre></td></tr></table></figure>

<p>ç´¢å¼•ç­¾åç±»å‹çº¦æŸï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// è¦æ±‚æ‰€æœ‰å±æ€§å€¼ç±»å‹å…¼å®¹</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ConsistentValues</span> &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;      <span class="hljs-comment">// âœ… å…¼å®¹ string | number</span><br>  [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹ï¼ˆç±»å‹å†²çªï¼‰</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Invalid</span> &#123;<br>  <span class="hljs-attr">id</span>: <span class="hljs-built_in">boolean</span>;       <span class="hljs-comment">// ğŸš« ä¸ç´¢å¼•ç­¾åç±»å‹ä¸å…¼å®¹</span><br>  [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹å®è·µè¦ç‚¹</strong></p>
<ol>
<li>ä¼˜å…ˆæ˜¾å¼å£°æ˜é‡è¦å±æ€§ï¼šé¿å…è¿‡åº¦ä¾èµ–ç´¢å¼•ç­¾å</li>
<li>åªè¯»å±æ€§ç”¨äºä¸å˜æ•°æ®ï¼šå¦‚é…ç½®IDã€ç‰ˆæœ¬å·ç­‰</li>
<li>å¯é€‰å±æ€§æ›¿ä»£ç©ºå€¼ï¼šæ¯” property: null æ›´è¯­ä¹‰åŒ–</li>
<li>ç´¢å¼•ç­¾åè¾¹ç•Œæ§åˆ¶ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç²¾ç¡®æ§åˆ¶åŠ¨æ€å±æ€§ç±»å‹</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">SafeDynamic</span> &#123;<br>  [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: <span class="hljs-built_in">string</span> | <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// å¿…é¡»æ˜¾å¼æ£€æŸ¥</span><br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getValue</span>(<span class="hljs-params"><span class="hljs-attr">obj</span>: <span class="hljs-title class_">SafeDynamic</span>, <span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span></span>) &#123;<br>  <span class="hljs-keyword">const</span> value = obj[key];<br>  <span class="hljs-keyword">if</span> (value === <span class="hljs-literal">undefined</span>) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Missing property&quot;</span>);<br>  &#125;<br>  <span class="hljs-keyword">return</span> value; <span class="hljs-comment">// æ­¤æ—¶ç±»å‹æ”¶çª„ä¸º string</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="1-2-2-ç±»ç»§æ‰¿ä½“ç³»ä¸è®¿é—®ä¿®é¥°ç¬¦"><a href="#1-2-2-ç±»ç»§æ‰¿ä½“ç³»ä¸è®¿é—®ä¿®é¥°ç¬¦" class="headerlink" title="1.2.2 ç±»ç»§æ‰¿ä½“ç³»ä¸è®¿é—®ä¿®é¥°ç¬¦"></a>1.2.2 ç±»ç»§æ‰¿ä½“ç³»ä¸è®¿é—®ä¿®é¥°ç¬¦</h3><p><strong>è®¿é—®ä¿®é¥°ç¬¦ï¼ˆAccess Modifiersï¼‰</strong></p>
<p>æ§åˆ¶ç±»æˆå‘˜çš„å¯è®¿é—®æ€§ï¼š</p>
<table>
<thead>
<tr>
<th align="left">ä¿®é¥°ç¬¦</th>
<th align="left">ç±»å†…éƒ¨</th>
<th align="left">å­ç±»</th>
<th align="left">ç±»å®ä¾‹</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">public</td>
<td align="left">âœ…</td>
<td align="left">âœ…</td>
<td align="left">âœ…</td>
<td align="left">é»˜è®¤ä¿®é¥°ç¬¦ï¼ˆå¯çœç•¥ï¼‰</td>
</tr>
<tr>
<td align="left">protected</td>
<td align="left">âœ…</td>
<td align="left">âœ…</td>
<td align="left">âŒ</td>
<td align="left">ä»…ç±»å†…éƒ¨å’Œå­ç±»è®¿é—®</td>
</tr>
<tr>
<td align="left">private</td>
<td align="left">âœ…</td>
<td align="left">âŒ</td>
<td align="left">âŒ</td>
<td align="left">ä»…ç±»å†…éƒ¨è®¿é—®</td>
</tr>
<tr>
<td align="left">#field</td>
<td align="left">âœ…</td>
<td align="left">âŒ</td>
<td align="left">âŒ</td>
<td align="left">ES2022 ç§æœ‰å­—æ®µï¼ˆè¿è¡Œæ—¶ç§æœ‰ï¼‰</td>
</tr>
</tbody></table>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>  <span class="hljs-keyword">public</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;          <span class="hljs-comment">// å…¬å…±å±æ€§ï¼ˆé»˜è®¤ï¼‰</span><br>  <span class="hljs-keyword">protected</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;         <span class="hljs-comment">// å—ä¿æŠ¤å±æ€§</span><br>  <span class="hljs-keyword">private</span> <span class="hljs-attr">secret</span>: <span class="hljs-built_in">string</span>;       <span class="hljs-comment">// ç§æœ‰å±æ€§</span><br>  #<span class="hljs-attr">internalCode</span>: <span class="hljs-built_in">number</span>;        <span class="hljs-comment">// ESç§æœ‰å­—æ®µï¼ˆTypeScript 3.8+ï¼‰</span><br><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span> = <span class="hljs-string">&quot;P1001&quot;</span>;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">secret</span> = <span class="hljs-string">&quot;confidential&quot;</span>;<br>    <span class="hljs-variable language_">this</span>.#internalCode = <span class="hljs-number">12345</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Employee</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Person</span> &#123;<br>  <span class="hljs-title function_">viewDetails</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>);    <span class="hljs-comment">// âœ… å…¬å…±å±æ€§</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">id</span>);      <span class="hljs-comment">// âœ… å—ä¿æŠ¤å±æ€§ï¼ˆå­ç±»å¯è®¿é—®ï¼‰</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">secret</span>);  <span class="hljs-comment">// ğŸš« é”™è¯¯ï¼ç§æœ‰å±æ€§ä¸å¯è®¿é—®</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.#internalCode); <span class="hljs-comment">// ğŸš« é”™è¯¯ï¼ESç§æœ‰å­—æ®µä¸å¯è®¿é—®</span><br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> emp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Employee</span>(<span class="hljs-string">&quot;Alice&quot;</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(emp.<span class="hljs-property">name</span>);        <span class="hljs-comment">// âœ…</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(emp.<span class="hljs-property">id</span>);          <span class="hljs-comment">// ğŸš« é”™è¯¯ï¼å—ä¿æŠ¤å±æ€§</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(emp.<span class="hljs-property">secret</span>);      <span class="hljs-comment">// ğŸš« é”™è¯¯ï¼ç§æœ‰å±æ€§</span><br></code></pre></td></tr></table></figure>

<p><strong>ç±»ç»§æ‰¿ä½“ç³»</strong></p>
<p>(1) åŸºæœ¬ç»§æ‰¿è¯­æ³•ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> &#123;<br>  <span class="hljs-title function_">move</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Moving...&quot;</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> &#123;<br>  <span class="hljs-title function_">bark</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Woof!&quot;</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> dog = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>();<br>dog.<span class="hljs-title function_">move</span>(); <span class="hljs-comment">// âœ… ç»§æ‰¿è‡ªAnimal</span><br>dog.<span class="hljs-title function_">bark</span>(); <span class="hljs-comment">// âœ… è‡ªèº«æ–¹æ³•</span><br></code></pre></td></tr></table></figure>

<p>(2) æ„é€ å‡½æ•°ç»§æ‰¿ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Vehicle</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> <span class="hljs-attr">type</span>: <span class="hljs-built_in">string</span></span>) &#123;&#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Vehicle</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-attr">type</span>: <span class="hljs-built_in">string</span>, <span class="hljs-keyword">public</span> <span class="hljs-attr">brand</span>: <span class="hljs-built_in">string</span></span>) &#123;<br>    <span class="hljs-variable language_">super</span>(<span class="hljs-keyword">type</span>); <span class="hljs-comment">// å¿…é¡»è°ƒç”¨super</span><br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> myCar = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>(<span class="hljs-string">&quot;Sedan&quot;</span>, <span class="hljs-string">&quot;Toyota&quot;</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myCar.<span class="hljs-property">type</span>);  <span class="hljs-comment">// &quot;Sedan&quot;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myCar.<span class="hljs-property">brand</span>); <span class="hljs-comment">// &quot;Toyota&quot;</span><br></code></pre></td></tr></table></figure>

<p><strong>æ–¹æ³•é‡å†™ï¼ˆOverrideï¼‰</strong></p>
<p>è§„åˆ™ï¼š</p>
<ul>
<li>ä½¿ç”¨ override å…³é”®å­—ï¼ˆTS 4.3+ï¼‰</li>
<li>å­ç±»æ–¹æ³•å¿…é¡»å…¼å®¹çˆ¶ç±»æ–¹æ³•ç­¾å</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Base</span> &#123;<br>  <span class="hljs-title function_">greet</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Hello!&quot;</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Derived</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Base</span> &#123;<br>  <span class="hljs-keyword">override</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params"><span class="hljs-attr">name</span>?: <span class="hljs-built_in">string</span></span>) &#123;<br>    <span class="hljs-keyword">if</span> (name) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Hello, <span class="hljs-subst">$&#123;name&#125;</span>!`</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">greet</span>(); <span class="hljs-comment">// è°ƒç”¨çˆ¶ç±»æ–¹æ³•</span><br>    &#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> d = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Derived</span>();<br>d.<span class="hljs-title function_">greet</span>();       <span class="hljs-comment">// &quot;Hello!&quot; (è°ƒç”¨çˆ¶ç±»æ–¹æ³•)</span><br>d.<span class="hljs-title function_">greet</span>(<span class="hljs-string">&quot;Alice&quot;</span>);<span class="hljs-comment">// &quot;Hello, Alice!&quot;</span><br></code></pre></td></tr></table></figure>

<p>é”™è¯¯é‡å†™ç¤ºä¾‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">InvalidDerived</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Base</span> &#123;<br>  <span class="hljs-keyword">override</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params"><span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span></span>) &#123; <br>    <span class="hljs-comment">// ğŸš« é”™è¯¯ï¼ç¼ºå°‘å¯é€‰å‚æ•°çš„æ— å‚è°ƒç”¨æ–¹å¼</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>è®¿é—®å™¨ä¿®é¥°ç¬¦ï¼ˆGetter&#x2F;Setterï¼‰</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Temperature</span> &#123;<br>  <span class="hljs-keyword">private</span> _celsius = <span class="hljs-number">0</span>;<br><br>  <span class="hljs-comment">// å¸¦è®¿é—®ä¿®é¥°ç¬¦çš„getter/setter</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">get</span> <span class="hljs-title function_">celsius</span>(): <span class="hljs-built_in">number</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">_celsius</span>;<br>  &#125;<br><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">set</span> <span class="hljs-title function_">celsius</span>(<span class="hljs-params"><span class="hljs-attr">value</span>: <span class="hljs-built_in">number</span></span>) &#123;<br>    <span class="hljs-keyword">if</span> (value &lt; -<span class="hljs-number">273.15</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Invalid temperature&quot;</span>);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">_celsius</span> = value;<br>  &#125;<br><br>  <span class="hljs-comment">// åªè¯»å±æ€§ï¼ˆæ— setterï¼‰</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">get</span> <span class="hljs-title function_">fahrenheit</span>(): <span class="hljs-built_in">number</span> &#123;<br>    <span class="hljs-keyword">return</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">_celsius</span> * <span class="hljs-number">9</span>) / <span class="hljs-number">5</span> + <span class="hljs-number">32</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> temp = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Temperature</span>();<br>temp.<span class="hljs-property">celsius</span> = <span class="hljs-number">25</span>;      <span class="hljs-comment">// âœ… è°ƒç”¨setter</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(temp.<span class="hljs-property">fahrenheit</span>); <span class="hljs-comment">// 77 âœ… è°ƒç”¨getter</span><br>temp.<span class="hljs-property">fahrenheit</span> = <span class="hljs-number">100</span>;  <span class="hljs-comment">// ğŸš« é”™è¯¯ï¼æ— setter</span><br></code></pre></td></tr></table></figure>

<p><strong>é™æ€æˆå‘˜ï¼ˆStatic Membersï¼‰</strong></p>
<p>ç‰¹æ€§ï¼š</p>
<ol>
<li>é€šè¿‡ç±»åç›´æ¥è®¿é—®</li>
<li>ä¸å¯é€šè¿‡å®ä¾‹è®¿é—®</li>
<li>å¯ç»§æ‰¿</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Database</span> &#123;<br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-attr">instance</span>: <span class="hljs-title class_">Database</span>;<br>  <br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-title function_">getInstance</span>(): <span class="hljs-title class_">Database</span> &#123;<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Database</span>.<span class="hljs-property">instance</span>) &#123;<br>      <span class="hljs-title class_">Database</span>.<span class="hljs-property">instance</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Database</span>();<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Database</span>.<span class="hljs-property">instance</span>;<br>  &#125;<br>  <br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> version = <span class="hljs-string">&quot;1.0&quot;</span>;<br>&#125;<br><br><span class="hljs-comment">// è®¿é—®é™æ€æˆå‘˜</span><br><span class="hljs-keyword">const</span> db = <span class="hljs-title class_">Database</span>.<span class="hljs-title function_">getInstance</span>();<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Database</span>.<span class="hljs-property">version</span>); <span class="hljs-comment">// &quot;1.0&quot;</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyDB</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Database</span> &#123;<br>  <span class="hljs-keyword">static</span> <span class="hljs-title function_">logVersion</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;DB Version:&quot;</span>, <span class="hljs-variable language_">super</span>.<span class="hljs-property">version</span>); <span class="hljs-comment">// è®¿é—®çˆ¶ç±»é™æ€å±æ€§</span><br>  &#125;<br>&#125;<br><br><span class="hljs-title class_">MyDB</span>.<span class="hljs-title function_">logVersion</span>(); <span class="hljs-comment">// &quot;DB Version: 1.0&quot;</span><br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹å®è·µè¦ç‚¹</strong></p>
<ol>
<li>æœ€å°åŒ–å…¬å¼€æ¥å£ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">SafeContainer</span> &#123;<br>  <span class="hljs-keyword">private</span> <span class="hljs-attr">internalData</span>: <span class="hljs-built_in">string</span>[] = [];<br>  <br>  <span class="hljs-keyword">public</span> <span class="hljs-title function_">addItem</span>(<span class="hljs-params"><span class="hljs-attr">item</span>: <span class="hljs-built_in">string</span></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validate</span>(item);<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">internalData</span>.<span class="hljs-title function_">push</span>(item);<br>  &#125;<br>  <br>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">validate</span>(<span class="hljs-params"><span class="hljs-attr">item</span>: <span class="hljs-built_in">string</span></span>) &#123; ... &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>ä½¿ç”¨protectedæ‰©å±•ç‚¹ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">PluginBase</span> &#123;<br>  <span class="hljs-keyword">protected</span> <span class="hljs-title function_">coreLogic</span>(<span class="hljs-params"></span>) &#123; ... &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyPlugin</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">PluginBase</span> &#123;<br>  <span class="hljs-title function_">run</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">coreLogic</span>(); <span class="hljs-comment">// å­ç±»å¯è®¿é—®</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>é¿å…è¿‡åº¦ç»§æ‰¿ï¼ˆç»„åˆä¼˜äºç»§æ‰¿ï¼‰ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä½¿ç”¨ç»„åˆæ›¿ä»£æ·±å±‚ç»§æ‰¿</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Engine</span> &#123; ... &#125;<br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Wheels</span> &#123; ... &#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Car</span> &#123;<br>  <span class="hljs-keyword">private</span> engine = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Engine</span>();<br>  <span class="hljs-keyword">private</span> wheels = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Wheels</span>();<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="1-2-3-æŠ½è±¡ç±»ä¸æ¥å£å®ç°è§„èŒƒ"><a href="#1-2-3-æŠ½è±¡ç±»ä¸æ¥å£å®ç°è§„èŒƒ" class="headerlink" title="1.2.3 æŠ½è±¡ç±»ä¸æ¥å£å®ç°è§„èŒƒ"></a>1.2.3 æŠ½è±¡ç±»ä¸æ¥å£å®ç°è§„èŒƒ</h3><p><strong>æŠ½è±¡ç±»ï¼ˆAbstract Classesï¼‰</strong></p>
<p>æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ol>
<li>ä¸èƒ½ç›´æ¥å®ä¾‹åŒ–</li>
<li>åŒ…å«æŠ½è±¡æ–¹æ³•ï¼ˆæ— å®ç°ï¼‰</li>
<li>å¯åŒ…å«å…·ä½“å®ç°æ–¹æ³•</li>
<li>é€šè¿‡ extends ç»§æ‰¿</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> &#123;<br>  <span class="hljs-comment">// æŠ½è±¡å±æ€§ï¼ˆå¿…é¡»è¢«å­ç±»å®ç°ï¼‰</span><br>  <span class="hljs-keyword">abstract</span> <span class="hljs-attr">habitat</span>: <span class="hljs-built_in">string</span>;<br>  <br>  <span class="hljs-comment">// æŠ½è±¡æ–¹æ³•ï¼ˆæ— å®ç°ï¼‰</span><br>  <span class="hljs-keyword">abstract</span> <span class="hljs-title function_">makeSound</span>(): <span class="hljs-built_in">void</span>;<br>  <br>  <span class="hljs-comment">// å…·ä½“æ–¹æ³•</span><br>  <span class="hljs-title function_">move</span>(): <span class="hljs-built_in">void</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Moving...&quot;</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Bird</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Animal</span> &#123;<br>  habitat = <span class="hljs-string">&quot;sky&quot;</span>;  <span class="hljs-comment">// å®ç°æŠ½è±¡å±æ€§</span><br>  <br>  <span class="hljs-comment">// å®ç°æŠ½è±¡æ–¹æ³•</span><br>  <span class="hljs-title function_">makeSound</span>(): <span class="hljs-built_in">void</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Chirp!&quot;</span>);<br>  &#125;<br>  <br>  <span class="hljs-comment">// æ‰©å±•æ–°æ–¹æ³•</span><br>  <span class="hljs-title function_">fly</span>(): <span class="hljs-built_in">void</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Flying&quot;</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> bird = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bird</span>();<br>bird.<span class="hljs-title function_">makeSound</span>(); <span class="hljs-comment">// &quot;Chirp!&quot;</span><br>bird.<span class="hljs-title function_">move</span>();      <span class="hljs-comment">// &quot;Moving...&quot;</span><br>bird.<span class="hljs-title function_">fly</span>();       <span class="hljs-comment">// &quot;Flying&quot;</span><br><br><span class="hljs-keyword">const</span> animal = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Animal</span>(); <span class="hljs-comment">// ğŸš« é”™è¯¯ï¼æŠ½è±¡ç±»ä¸èƒ½å®ä¾‹åŒ–</span><br></code></pre></td></tr></table></figure>

<p><strong>æ¥å£å®ç°ï¼ˆInterface Implementationï¼‰</strong></p>
<p>æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ol>
<li>ä½¿ç”¨ implements å…³é”®å­—</li>
<li>å¿…é¡»å®ç°æ‰€æœ‰æ¥å£æˆå‘˜</li>
<li>ç±»å¯åŒæ—¶å®ç°å¤šä¸ªæ¥å£</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Loggable</span> &#123;<br>  <span class="hljs-title function_">log</span>(<span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Serializable</span> &#123;<br>  <span class="hljs-title function_">serialize</span>(): <span class="hljs-built_in">string</span>;<br>&#125;<br><br><span class="hljs-comment">// å®ç°å¤šä¸ªæ¥å£</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Logger</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Loggable</span>, <span class="hljs-title class_">Serializable</span> &#123;<br>  <span class="hljs-title function_">log</span>(<span class="hljs-params"><span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`[LOG] <span class="hljs-subst">$&#123;message&#125;</span>`</span>);<br>  &#125;<br>  <br>  <span class="hljs-title function_">serialize</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(<span class="hljs-variable language_">this</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>æŠ½è±¡ç±» vs æ¥å£</strong></p>
<p>| ç‰¹æ€§ | æŠ½è±¡ç±» | æ¥å£ |<br>| å®ä¾‹åŒ– | âŒ ä¸èƒ½ç›´æ¥å®ä¾‹åŒ– | âŒ ä¸èƒ½å®ä¾‹åŒ– |<br>| æ–¹æ³•å®ç° | âœ… å¯åŒ…å«å…·ä½“å®ç°æ–¹æ³• | âŒ åªèƒ½å£°æ˜æ–¹æ³•ç­¾å |<br>| æˆå‘˜ç±»å‹ | å¯åŒ…å«å­—æ®µ&#x2F;æ„é€ å™¨&#x2F;è®¿é—®å™¨ç­‰ | åªèƒ½åŒ…å«æ–¹æ³•å’ŒæŠ½è±¡å±æ€§ |<br>| ç»§æ‰¿æœºåˆ¶ | å•ç»§æ‰¿ï¼ˆextendsï¼‰ | å¤šå®ç°ï¼ˆimplementsï¼‰ |<br>| è®¿é—®ä¿®é¥°ç¬¦ | âœ… æ”¯æŒ | âŒ æ‰€æœ‰æˆå‘˜é»˜è®¤ä¸º public |<br>| ç‰ˆæœ¬å…¼å®¹ | ä¿®æ”¹å¯èƒ½ç ´åå­ç±» | æ–°å¢æˆå‘˜ä¸å½±å“ç°æœ‰å®ç° |</p>
<p><strong>æ··åˆä½¿ç”¨æ¨¡å¼</strong></p>
<p>åœºæ™¯ï¼šæŠ½è±¡ç±»å®ç°éƒ¨åˆ†æ¥å£</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Shape</span> &#123;<br>  <span class="hljs-title function_">area</span>(): <span class="hljs-built_in">number</span>;<br>  <span class="hljs-title function_">perimeter</span>(): <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Polygon</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Shape</span> &#123;<br>  <span class="hljs-comment">// å®ç°éƒ¨åˆ†æ¥å£æ–¹æ³•</span><br>  <span class="hljs-keyword">abstract</span> <span class="hljs-title function_">area</span>(): <span class="hljs-built_in">number</span>;  <span class="hljs-comment">// ä»éœ€å­ç±»å®ç°</span><br>  <br>  <span class="hljs-comment">// æä¾›é»˜è®¤å®ç°</span><br>  <span class="hljs-title function_">perimeter</span>(): <span class="hljs-built_in">number</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">getSides</span>().<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">sum, side</span>) =&gt;</span> sum + side, <span class="hljs-number">0</span>);<br>  &#125;<br>  <br>  <span class="hljs-comment">// æŠ½è±¡æ–¹æ³•ï¼ˆéæ¥å£è¦æ±‚ï¼‰</span><br>  <span class="hljs-keyword">abstract</span> <span class="hljs-title function_">getSides</span>(): <span class="hljs-built_in">number</span>[];<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Rectangle</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Polygon</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-attr">width</span>: <span class="hljs-built_in">number</span>, <span class="hljs-keyword">private</span> <span class="hljs-attr">height</span>: <span class="hljs-built_in">number</span></span>) &#123;<br>    <span class="hljs-variable language_">super</span>();<br>  &#125;<br>  <br>  <span class="hljs-title function_">area</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span> * <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>;<br>  &#125;<br>  <br>  <span class="hljs-title function_">getSides</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> [<span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">width</span>, <span class="hljs-variable language_">this</span>.<span class="hljs-property">height</span>];<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å®ç°è§„èŒƒä¸æœ€ä½³å®è·µ</strong></p>
<ol>
<li>æ¥å£éš”ç¦»åŸåˆ™ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ‹†åˆ†å¤§æ¥å£</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Printer</span> &#123;<br>  <span class="hljs-title function_">print</span>(<span class="hljs-attr">document</span>: <span class="hljs-title class_">Document</span>): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Scanner</span> &#123;<br>  <span class="hljs-title function_">scan</span>(): <span class="hljs-title class_">Document</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AllInOnePrinter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Printer</span>, <span class="hljs-title class_">Scanner</span> &#123;<br>  <span class="hljs-comment">// åˆ†åˆ«å®ç°å°æ¥å£</span><br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>æŠ½è±¡ç±»ä½œä¸ºæ¨¡æ¿ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataProcessor</span> &#123;<br>  <span class="hljs-comment">// æ¨¡æ¿æ–¹æ³•ï¼ˆå›ºå®šæµç¨‹ï¼‰</span><br>  <span class="hljs-title function_">process</span>(<span class="hljs-params"><span class="hljs-attr">data</span>: <span class="hljs-built_in">string</span></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">validate</span>(data);<br>    <span class="hljs-keyword">const</span> cleaned = <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">clean</span>(data);<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-title function_">transform</span>(cleaned);<br>  &#125;<br>  <br>  <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-title function_">clean</span>(<span class="hljs-attr">data</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">string</span>;<br>  <span class="hljs-keyword">protected</span> <span class="hljs-keyword">abstract</span> <span class="hljs-title function_">transform</span>(<span class="hljs-attr">data</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">unknown</span>;<br>  <br>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">validate</span>(<span class="hljs-params"><span class="hljs-attr">data</span>: <span class="hljs-built_in">string</span></span>) &#123;<br>    <span class="hljs-keyword">if</span> (!data) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Invalid data&quot;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>æ¥å£æ‰©å±•æŠ½è±¡ç±»ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Component</span> &#123;<br>  <span class="hljs-keyword">abstract</span> <span class="hljs-title function_">render</span>(): <span class="hljs-title class_">HTMLElement</span>;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Stateful</span> &#123;<br>  <span class="hljs-title function_">setState</span>(<span class="hljs-attr">state</span>: <span class="hljs-built_in">object</span>): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Button</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Component</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Stateful</span> &#123;<br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-keyword">return</span> <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">createElement</span>(<span class="hljs-string">&quot;button&quot;</span>); &#125;<br>  <span class="hljs-title function_">setState</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-comment">/*...*/</span> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="4">
<li>é¿å…ç©ºå®ç°ï¼ˆè¿åæ¥å£å¥‘çº¦ï¼‰ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åæ¨¡å¼ï¼šç©ºå®ç°</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">EmptyLogger</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Loggable</span> &#123;<br>  <span class="hljs-title function_">log</span>(<span class="hljs-params"></span>) &#123;&#125; <span class="hljs-comment">// ğŸš« è¿åæ¥å£è¯­ä¹‰</span><br>&#125;<br><br><span class="hljs-comment">// æ­£ç¡®ï¼šæŠ›å‡ºæ˜ç¡®é”™è¯¯</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">NotImplementedLogger</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Loggable</span> &#123;<br>  <span class="hljs-title function_">log</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Method not implemented&quot;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>ç±»å‹æ£€æŸ¥è¦ç‚¹</strong></p>
<ol>
<li>å®ç°å…¼å®¹æ€§ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ClockInterface</span> &#123;<br>  <span class="hljs-attr">currentTime</span>: <span class="hljs-title class_">Date</span>;<br>  <span class="hljs-title function_">setTime</span>(<span class="hljs-attr">d</span>: <span class="hljs-title class_">Date</span>): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Clock</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ClockInterface</span> &#123;<br>  <span class="hljs-attr">currentTime</span>: <span class="hljs-title class_">Date</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();<br>  <br>  <span class="hljs-comment">// âœ… å‚æ•°ç±»å‹å…¼å®¹ï¼ˆDate â†’ Dateï¼‰</span><br>  <span class="hljs-title function_">setTime</span>(<span class="hljs-params"><span class="hljs-attr">d</span>: <span class="hljs-title class_">Date</span></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">currentTime</span> = d;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>å¯é€‰æ¥å£æˆå‘˜ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span> &#123;<br>  <span class="hljs-attr">required</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">optional</span>?: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// å¯é€‰å±æ€§</span><br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AppConfig</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Config</span> &#123;<br>  required = <span class="hljs-string">&quot;default&quot;</span>;<br>  <span class="hljs-comment">// æ— éœ€å®ç° optional</span><br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>åªè¯»æ¥å£å±æ€§ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ImmutablePoint</span> &#123;<br>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ImmutablePoint</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>, <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span></span>) &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="1-2-4-ç±»é™æ€æˆå‘˜ä¸æ„é€ ç­¾å"><a href="#1-2-4-ç±»é™æ€æˆå‘˜ä¸æ„é€ ç­¾å" class="headerlink" title="1.2.4 ç±»é™æ€æˆå‘˜ä¸æ„é€ ç­¾å"></a>1.2.4 ç±»é™æ€æˆå‘˜ä¸æ„é€ ç­¾å</h3><p><strong>é™æ€æˆå‘˜ï¼ˆStatic Membersï¼‰</strong></p>
<p>æ ¸å¿ƒç‰¹æ€§ï¼š</p>
<ol>
<li>ä½¿ç”¨ static å…³é”®å­—å£°æ˜</li>
<li>é€šè¿‡ç±»åç›´æ¥è®¿é—®ï¼ˆè€Œéå®ä¾‹ï¼‰</li>
<li>ä¸å¯è®¿é—®å®ä¾‹æˆå‘˜</li>
<li>å¯ç»§æ‰¿ï¼ˆå­ç±»å¯é€šè¿‡ super æˆ–ç±»åè®¿é—®ï¼‰</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MathUtils</span> &#123;<br>  <span class="hljs-comment">// é™æ€å±æ€§</span><br>  <span class="hljs-keyword">static</span> <span class="hljs-variable constant_">PI</span> = <span class="hljs-number">3.14159</span>;<br>  <br>  <span class="hljs-comment">// é™æ€æ–¹æ³•</span><br>  <span class="hljs-keyword">static</span> <span class="hljs-title function_">calculateCircleArea</span>(<span class="hljs-attr">radius</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">PI</span> * radius * radius; <span class="hljs-comment">// æ³¨æ„ï¼šthisæŒ‡å‘ç±»æœ¬èº«</span><br>  &#125;<br>  <br>  <span class="hljs-comment">// é”™è¯¯ç¤ºä¾‹ï¼šè®¿é—®å®ä¾‹æˆå‘˜</span><br>  <span class="hljs-keyword">static</span> <span class="hljs-title function_">invalidMethod</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>); <span class="hljs-comment">// ğŸš« é”™è¯¯ï¼æ— æ³•è®¿é—®å®ä¾‹å±æ€§</span><br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// è®¿é—®é™æ€æˆå‘˜</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">MathUtils</span>.<span class="hljs-property">PI</span>); <span class="hljs-comment">// 3.14159</span><br><span class="hljs-keyword">const</span> area = <span class="hljs-title class_">MathUtils</span>.<span class="hljs-title function_">calculateCircleArea</span>(<span class="hljs-number">5</span>); <span class="hljs-comment">// 78.53975</span><br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AdvancedMath</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">MathUtils</span> &#123;<br>  <span class="hljs-keyword">static</span> <span class="hljs-title function_">logPI</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;PI value:&quot;</span>, <span class="hljs-variable language_">super</span>.<span class="hljs-property">PI</span>); <span class="hljs-comment">// é€šè¿‡superè®¿é—®</span><br>    <span class="hljs-comment">// æˆ– console.log(MathUtils.PI);</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>é™æ€å—ï¼ˆStatic Blocksï¼‰</strong></p>
<p>TS 4.4+ ç‰¹æ€§ï¼šç”¨äºåˆå§‹åŒ–å¤æ‚é™æ€å±æ€§</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConfigLoader</span> &#123;<br>  <span class="hljs-keyword">static</span> <span class="hljs-attr">config</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;;<br>  <br>  <span class="hljs-keyword">static</span> &#123;<br>    <span class="hljs-comment">// æ‰§è¡Œå¤æ‚åˆå§‹åŒ–</span><br>    <span class="hljs-keyword">try</span> &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span> = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(fs.<span class="hljs-title function_">readFileSync</span>(<span class="hljs-string">&quot;config.json&quot;</span>, <span class="hljs-string">&quot;utf8&quot;</span>));<br>    &#125; <span class="hljs-keyword">catch</span> &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">config</span> = &#123; <span class="hljs-attr">default</span>: <span class="hljs-string">&quot;value&quot;</span> &#125;;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>æ„é€ ç­¾åï¼ˆConstructor Signaturesï¼‰</strong></p>
<p>æ ¸å¿ƒæ¦‚å¿µï¼šæè¿°ç±»çš„æ„é€ å‡½æ•°ç±»å‹</p>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ„é€ ç­¾åè¡¨ç¤ºæ³•</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ClockConstructor</span> &#123;<br>  <span class="hljs-title function_">new</span> (<span class="hljs-attr">hour</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">minute</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">ClockInterface</span>;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ClockInterface</span> &#123;<br>  <span class="hljs-title function_">tick</span>(): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-comment">// å®ç°æ„é€ ç­¾å</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DigitalClock</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ClockInterface</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-attr">h</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">m</span>: <span class="hljs-built_in">number</span></span>) &#123;&#125; <span class="hljs-comment">// å®ç°æ„é€ å‡½æ•°</span><br>  <span class="hljs-title function_">tick</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;beep beep&quot;</span>); &#125;<br>&#125;<br><br><span class="hljs-comment">// å·¥å‚å‡½æ•°ä½¿ç”¨æ„é€ ç­¾å</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">createClock</span>(<span class="hljs-params"></span><br><span class="hljs-params">  <span class="hljs-attr">ctor</span>: <span class="hljs-title class_">ClockConstructor</span>,</span><br><span class="hljs-params">  <span class="hljs-attr">hour</span>: <span class="hljs-built_in">number</span>,</span><br><span class="hljs-params">  <span class="hljs-attr">minute</span>: <span class="hljs-built_in">number</span></span><br><span class="hljs-params"></span>): <span class="hljs-title class_">ClockInterface</span> &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">ctor</span>(hour, minute);<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> digital = <span class="hljs-title function_">createClock</span>(<span class="hljs-title class_">DigitalClock</span>, <span class="hljs-number">12</span>, <span class="hljs-number">30</span>);<br>digital.<span class="hljs-title function_">tick</span>(); <span class="hljs-comment">// &quot;beep beep&quot;</span><br></code></pre></td></tr></table></figure>

<p><strong>é™æ€æˆå‘˜ä¸æ„é€ ç­¾åå®æˆ˜</strong></p>
<p>åœºæ™¯1ï¼šå•ä¾‹æ¨¡å¼</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">AppConfig</span> &#123;<br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-attr">instance</span>: <span class="hljs-title class_">AppConfig</span>;<br>  <br>  <span class="hljs-comment">// ç§æœ‰æ„é€ å™¨é˜²æ­¢å¤–éƒ¨å®ä¾‹åŒ–</span><br>  <span class="hljs-keyword">private</span> <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> <span class="hljs-attr">env</span>: <span class="hljs-built_in">string</span></span>) &#123;&#125;<br>  <br>  <span class="hljs-comment">// é™æ€è®¿é—®ç‚¹</span><br>  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getInstance</span>(): <span class="hljs-title class_">AppConfig</span> &#123;<br>    <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">AppConfig</span>.<span class="hljs-property">instance</span>) &#123;<br>      <span class="hljs-title class_">AppConfig</span>.<span class="hljs-property">instance</span> = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AppConfig</span>(<span class="hljs-string">&quot;production&quot;</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">AppConfig</span>.<span class="hljs-property">instance</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> config = <span class="hljs-title class_">AppConfig</span>.<span class="hljs-title function_">getInstance</span>();<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(config.<span class="hljs-property">env</span>); <span class="hljs-comment">// &quot;production&quot;</span><br></code></pre></td></tr></table></figure>

<p>åœºæ™¯2ï¼šç±»æ³¨å†Œç³»ç»Ÿ</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ„é€ ç­¾åå®šä¹‰</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">PluginConstructor</span> &#123;<br>  <span class="hljs-title function_">new</span> (): <span class="hljs-title class_">Plugin</span>;<br>  <span class="hljs-attr">pluginName</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// é™æ€å±æ€§è¦æ±‚</span><br>&#125;<br><br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Plugin</span> &#123;<br>  <span class="hljs-keyword">abstract</span> <span class="hljs-title function_">run</span>(): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-comment">// æ³¨å†Œè¡¨</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PluginRegistry</span> &#123;<br>  <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-attr">plugins</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">PluginConstructor</span>&gt; = &#123;&#125;;<br>  <br>  <span class="hljs-keyword">static</span> <span class="hljs-title function_">register</span>(<span class="hljs-params"><span class="hljs-attr">ctor</span>: <span class="hljs-title class_">PluginConstructor</span></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">plugins</span>[ctor.<span class="hljs-property">pluginName</span>] = ctor;<br>  &#125;<br>  <br>  <span class="hljs-keyword">static</span> <span class="hljs-title function_">create</span>(<span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Plugin</span> | <span class="hljs-literal">null</span> &#123;<br>    <span class="hljs-keyword">const</span> <span class="hljs-title class_">Ctor</span> = <span class="hljs-variable language_">this</span>.<span class="hljs-property">plugins</span>[name];<br>    <span class="hljs-keyword">return</span> <span class="hljs-title class_">Ctor</span> ? <span class="hljs-keyword">new</span> <span class="hljs-title class_">Ctor</span>() : <span class="hljs-literal">null</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// æ’ä»¶å®ç°</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggerPlugin</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Plugin</span> &#123;<br>  <span class="hljs-keyword">static</span> pluginName = <span class="hljs-string">&quot;Logger&quot;</span>; <span class="hljs-comment">// æ»¡è¶³é™æ€å±æ€§è¦æ±‚</span><br>  <span class="hljs-title function_">run</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Logging...&quot;</span>); &#125;<br>&#125;<br><br><span class="hljs-comment">// æ³¨å†Œå¹¶ä½¿ç”¨</span><br><span class="hljs-title class_">PluginRegistry</span>.<span class="hljs-title function_">register</span>(<span class="hljs-title class_">LoggerPlugin</span>);<br><span class="hljs-keyword">const</span> plugin = <span class="hljs-title class_">PluginRegistry</span>.<span class="hljs-title function_">create</span>(<span class="hljs-string">&quot;Logger&quot;</span>);<br>plugin?.<span class="hljs-title function_">run</span>(); <span class="hljs-comment">// &quot;Logging...&quot;</span><br></code></pre></td></tr></table></figure>

<p><strong>é«˜çº§æ„é€ ç­¾åæ¨¡å¼</strong></p>
<ol>
<li>æ³›å‹æ„é€ ç­¾å</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Factory</span>&lt;T&gt; &#123;<br>  <span class="hljs-title function_">new</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]): T;<br>&#125;<br><br><span class="hljs-keyword">function</span> createInstance&lt;T&gt;(<span class="hljs-title class_">Clazz</span>: <span class="hljs-title class_">Factory</span>&lt;T&gt;, ...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]): T &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Clazz</span>(...args);<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span></span>) &#123;&#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> p = <span class="hljs-title function_">createInstance</span>(<span class="hljs-title class_">Product</span>, <span class="hljs-string">&quot;P1001&quot;</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(p.<span class="hljs-property">id</span>); <span class="hljs-comment">// &quot;P1001&quot;</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>æ„é€ å‡½æ•°ç±»å‹åˆ«å</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ„é€ å‡½æ•°ç±»å‹å®šä¹‰</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">StringInitializable</span> = &#123;<br>  <span class="hljs-title function_">new</span> (<span class="hljs-attr">s</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">object</span>;<br>&#125;;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">StringWrapper</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span></span>) &#123;&#125;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">wrapString</span>(<span class="hljs-params"><span class="hljs-attr">ctor</span>: <span class="hljs-title class_">StringInitializable</span>, <span class="hljs-attr">s</span>: <span class="hljs-built_in">string</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">ctor</span>(s);<br>&#125;<br><br><span class="hljs-keyword">const</span> wrapped = <span class="hljs-title function_">wrapString</span>(<span class="hljs-title class_">StringWrapper</span>, <span class="hljs-string">&quot;test&quot;</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>((wrapped <span class="hljs-keyword">as</span> <span class="hljs-title class_">StringWrapper</span>).<span class="hljs-property">value</span>); <span class="hljs-comment">// &quot;test&quot;</span><br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹å®è·µè¦ç‚¹</strong></p>
<ol>
<li>é¿å…è¿‡åº¦ä½¿ç”¨é™æ€æˆå‘˜ï¼šé™æ€æˆå‘˜æœ¬è´¨æ˜¯å…¨å±€çŠ¶æ€ï¼Œä¸åˆ©äºæµ‹è¯•å’Œæ‰©å±•</li>
<li>æ„é€ ç­¾åç”¨äºä¾èµ–æ³¨å…¥ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä¾èµ–æ³¨å…¥å®¹å™¨</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Container</span> &#123;<br>  <span class="hljs-keyword">private</span> instances = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>();<br>  <br>  register&lt;T&gt;(<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">ctor</span>: <span class="hljs-title function_">new</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]) =&gt; T) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">instances</span>.<span class="hljs-title function_">set</span>(key, <span class="hljs-keyword">new</span> <span class="hljs-title function_">ctor</span>());<br>  &#125;<br>  <br>  resolve&lt;T&gt;(<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>): T &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">instances</span>.<span class="hljs-title function_">get</span>(key);<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> container = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Container</span>();<br>container.<span class="hljs-title function_">register</span>(<span class="hljs-string">&quot;logger&quot;</span>, <span class="hljs-title class_">ConsoleLogger</span>);<br><span class="hljs-keyword">const</span> logger = container.<span class="hljs-property">resolve</span>&lt;<span class="hljs-title class_">ConsoleLogger</span>&gt;(<span class="hljs-string">&quot;logger&quot;</span>);<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>é™æ€æˆå‘˜ç±»å‹å®‰å…¨ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Validator</span> &#123;<br>  <span class="hljs-keyword">static</span> patterns = &#123;<br>    <span class="hljs-attr">email</span>: <span class="hljs-regexp">/^[^\s@]+@[^\s@]+\.[^\s@]+$/</span>,<br>    <span class="hljs-attr">phone</span>: <span class="hljs-regexp">/^\d&#123;10&#125;$/</span><br>  &#125;;<br>  <br>  <span class="hljs-keyword">static</span> <span class="hljs-title function_">validate</span>(<span class="hljs-params"><span class="hljs-attr">type</span>: keyof <span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Validator</span>.patterns, <span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">patterns</span>[<span class="hljs-keyword">type</span>].<span class="hljs-title function_">test</span>(value);<br>  &#125;<br>&#125;<br><br><span class="hljs-title class_">Validator</span>.<span class="hljs-title function_">validate</span>(<span class="hljs-string">&quot;email&quot;</span>, <span class="hljs-string">&quot;test@example.com&quot;</span>); <span class="hljs-comment">// âœ…</span><br><span class="hljs-title class_">Validator</span>.<span class="hljs-title function_">validate</span>(<span class="hljs-string">&quot;postal&quot;</span>, <span class="hljs-string">&quot;12345&quot;</span>); <span class="hljs-comment">// ğŸš« é”™è¯¯ï¼æ— æ­¤ç±»å‹</span><br></code></pre></td></tr></table></figure>

<ol start="4">
<li>æ„é€ ç­¾åçº¦æŸï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// è¦æ±‚æ„é€ å‡½æ•°å…·æœ‰ç‰¹å®šé™æ€å±æ€§</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">PluginCtor</span> &#123;<br>  <span class="hljs-title function_">new</span> (): <span class="hljs-title class_">Plugin</span>;<br>  <span class="hljs-attr">version</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">dependencies</span>?: <span class="hljs-built_in">string</span>[];<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">loadPlugin</span>(<span class="hljs-params"><span class="hljs-attr">ctor</span>: <span class="hljs-title class_">PluginCtor</span></span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Loading <span class="hljs-subst">$&#123;ctor.name&#125;</span> v<span class="hljs-subst">$&#123;ctor.version&#125;</span>`</span>);<br>  <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="1-3-å‡½æ•°ä¸æ³›å‹ç¼–ç¨‹"><a href="#1-3-å‡½æ•°ä¸æ³›å‹ç¼–ç¨‹" class="headerlink" title="1.3 å‡½æ•°ä¸æ³›å‹ç¼–ç¨‹"></a>1.3 å‡½æ•°ä¸æ³›å‹ç¼–ç¨‹</h2><h3 id="1-3-1-å‡½æ•°ç±»å‹å®šä¹‰ä¸ä¸Šä¸‹æ–‡æ¨æ–­"><a href="#1-3-1-å‡½æ•°ç±»å‹å®šä¹‰ä¸ä¸Šä¸‹æ–‡æ¨æ–­" class="headerlink" title="1.3.1 å‡½æ•°ç±»å‹å®šä¹‰ä¸ä¸Šä¸‹æ–‡æ¨æ–­"></a>1.3.1 å‡½æ•°ç±»å‹å®šä¹‰ä¸ä¸Šä¸‹æ–‡æ¨æ–­</h3><p><strong>å‡½æ•°ç±»å‹å®šä¹‰æ–¹å¼</strong></p>
<ol>
<li>å‡½æ•°å£°æ˜å¼</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å®Œæ•´ç±»å‹æ³¨è§£</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">add</span>(<span class="hljs-params"><span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> &#123;<br>  <span class="hljs-keyword">return</span> x + y;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>å‡½æ•°è¡¨è¾¾å¼</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å˜é‡ç±»å‹æ³¨è§£</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">multiply</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params">x, y</span>) &#123;<br>  <span class="hljs-keyword">return</span> x * y;<br>&#125;;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>ç®­å¤´å‡½æ•°</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç±»å‹æ³¨è§£åœ¨å˜é‡ä¸Š</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">divide</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">dividend</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">divisor</span>: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span> = <br>  <span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a / b;<br></code></pre></td></tr></table></figure>

<ol start="4">
<li>å¯¹è±¡æ–¹æ³•</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> calculator = &#123;<br>  <span class="hljs-attr">sum</span>: (<span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> x + y,<br>  <span class="hljs-title function_">subtract</span>(<span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span>): <span class="hljs-built_in">number</span> &#123;<br>    <span class="hljs-keyword">return</span> x - y;<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>

<p><strong>å‡½æ•°ç±»å‹ç­¾åè¯¦è§£</strong></p>
<p>åŸºæœ¬ç»“æ„ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">AddFunction</span> = <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span>;<br></code></pre></td></tr></table></figure>

<p>å¯é€‰å‚æ•°ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">GreetFunction</span> = <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">prefix</span>?: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">string</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">greet</span>: <span class="hljs-title class_">GreetFunction</span> = <span class="hljs-function">(<span class="hljs-params">n, p</span>) =&gt;</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;p || <span class="hljs-string">&quot;Hello&quot;</span>&#125;</span> <span class="hljs-subst">$&#123;n&#125;</span>`</span>;<br><span class="hljs-title function_">greet</span>(<span class="hljs-string">&quot;Alice&quot;</span>); <span class="hljs-comment">// âœ… å…è®¸çœç•¥å¯é€‰å‚æ•°</span><br></code></pre></td></tr></table></figure>

<p>é»˜è®¤å‚æ•°ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">CreateUser</span> = <span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>, </span></span><br><span class="hljs-params"><span class="hljs-function">  <span class="hljs-attr">role</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">&quot;user&quot;</span> <span class="hljs-comment">// é»˜è®¤å€¼</span></span></span><br><span class="hljs-params"><span class="hljs-function"></span>) =&gt;</span> <span class="hljs-built_in">void</span>;<br></code></pre></td></tr></table></figure>

<p>å‰©ä½™å‚æ•°ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">SumFunction</span> = <span class="hljs-function">(<span class="hljs-params">...<span class="hljs-attr">numbers</span>: <span class="hljs-built_in">number</span>[]</span>) =&gt;</span> <span class="hljs-built_in">number</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">sum</span>: <span class="hljs-title class_">SumFunction</span> = <span class="hljs-function">(<span class="hljs-params">...nums</span>) =&gt;</span> nums.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> a + b, <span class="hljs-number">0</span>);<br><span class="hljs-title function_">sum</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>); <span class="hljs-comment">// 6</span><br></code></pre></td></tr></table></figure>

<p><strong>ä¸Šä¸‹æ–‡ç±»å‹æ¨æ–­ï¼ˆContextual Typingï¼‰</strong></p>
<p>æ ¸å¿ƒåŸç†ï¼šTypeScript æ ¹æ®å‡½æ•°è¢«ä½¿ç”¨çš„ä½ç½®è‡ªåŠ¨æ¨æ–­å‚æ•°ç±»å‹</p>
<p>å…¸å‹åœºæ™¯ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åœºæ™¯1ï¼šå›è°ƒå‡½æ•°å‚æ•°æ¨æ–­</span><br>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num * <span class="hljs-number">2</span>); <span class="hljs-comment">// num æ¨æ–­ä¸º number</span><br><br><span class="hljs-comment">// åœºæ™¯2ï¼šäº‹ä»¶å¤„ç†å‡½æ•°</span><br><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function"><span class="hljs-params">event</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event.<span class="hljs-property">clientX</span>); <span class="hljs-comment">// event æ¨æ–­ä¸º MouseEvent</span><br>&#125;);<br><br><span class="hljs-comment">// åœºæ™¯3ï¼šå‡½æ•°ä½œä¸ºå‚æ•°ä¼ é€’</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">runCallback</span>(<span class="hljs-params"><span class="hljs-attr">cb</span>: (value: <span class="hljs-built_in">string</span>) =&gt; <span class="hljs-built_in">void</span></span>) &#123;<br>  <span class="hljs-title function_">cb</span>(<span class="hljs-string">&quot;test&quot;</span>);<br>&#125;<br><br><span class="hljs-title function_">runCallback</span>(<span class="hljs-function"><span class="hljs-params">str</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(str.<span class="hljs-title function_">toUpperCase</span>()); <span class="hljs-comment">// str æ¨æ–­ä¸º string</span><br>&#125;);<br></code></pre></td></tr></table></figure>

<p>æ˜¾å¼è¦†ç›–ä¸Šä¸‹æ–‡ç±»å‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä½¿ç”¨ç±»å‹æ–­è¨€è¦†ç›–æ¨æ–­</span><br><span class="hljs-variable language_">window</span>.<span class="hljs-title function_">addEventListener</span>(<span class="hljs-string">&quot;keydown&quot;</span>, <span class="hljs-function">(<span class="hljs-params">event <span class="hljs-keyword">as</span> <span class="hljs-title class_">KeyboardEvent</span></span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(event.<span class="hljs-property">key</span>); <span class="hljs-comment">// å¼ºåˆ¶æŒ‡å®šä¸º KeyboardEvent</span><br>&#125;);<br></code></pre></td></tr></table></figure>

<p><strong>å‡½æ•°ç±»å‹å…¼å®¹æ€§</strong></p>
<p>å‚æ•°å…¼å®¹è§„åˆ™ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Handler</span> = <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;<br><br><span class="hljs-comment">// âœ… å…¼å®¹ï¼šå‚æ•°ç±»å‹æ›´å…·ä½“</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">h1</span>: <span class="hljs-title class_">Handler</span> = <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span>) =&gt;</span> &#123;&#125;;<br><span class="hljs-comment">// âœ… å…¼å®¹ï¼šå‚æ•°æ•°é‡æ›´å°‘</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">h2</span>: <span class="hljs-title class_">Handler</span> = <span class="hljs-function">() =&gt;</span> &#123;&#125;;<br><span class="hljs-comment">// ğŸš« ä¸å…¼å®¹ï¼šå‚æ•°ç±»å‹å†²çª</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">h3</span>: <span class="hljs-title class_">Handler</span> = <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">value</span>: <span class="hljs-built_in">number</span></span>) =&gt;</span> &#123;&#125;; <span class="hljs-comment">// é”™è¯¯ï¼</span><br><br><span class="hljs-comment">// è¿”å›å€¼å…¼å®¹è§„åˆ™</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Factory</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">string</span>;<br><span class="hljs-comment">// âœ… å…¼å®¹ï¼šè¿”å›å€¼æ›´å…·ä½“</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">f1</span>: <span class="hljs-title class_">Factory</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-string">&quot;hello&quot;</span>;<br><span class="hljs-comment">// ğŸš« ä¸å…¼å®¹ï¼šè¿”å›å€¼ç±»å‹å†²çª</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">f2</span>: <span class="hljs-title class_">Factory</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-number">123</span>; <span class="hljs-comment">// é”™è¯¯ï¼</span><br></code></pre></td></tr></table></figure>

<p>å¯¹è±¡æ–¹æ³•å…¼å®¹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Component</span> &#123;<br>  <span class="hljs-attr">onEvent</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-comment">// âœ… å…¼å®¹ï¼šå‚æ•°æ•°é‡æ›´å°‘</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">comp</span>: <span class="hljs-title class_">Component</span> = &#123;<br>  <span class="hljs-attr">onEvent</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Event fired&quot;</span>)<br>&#125;;<br></code></pre></td></tr></table></figure>

<p><strong>void è¿”å›ç±»å‹çš„ç‰¹æ®Šè¡Œä¸º</strong></p>
<p>å…³é”®ç‰¹æ€§ï¼šå…è®¸è¿”å›ä»»æ„å€¼ï¼ˆä½†è¿”å›å€¼ä¼šè¢«å¿½ç•¥ï¼‰</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">VoidFunc</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;<br><br><span class="hljs-comment">// åˆæ³•å®ç°ï¼ˆè™½ç„¶è¿”å›äº†å€¼ï¼‰</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">fn</span>: <span class="hljs-title class_">VoidFunc</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-string">&quot;hello&quot;</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨åœºæ™¯</span><br><span class="hljs-keyword">const</span> strings = [<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-string">&quot;b&quot;</span>, <span class="hljs-string">&quot;c&quot;</span>];<br><span class="hljs-keyword">const</span> <span class="hljs-attr">results</span>: <span class="hljs-built_in">void</span>[] = strings.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(s)); <span class="hljs-comment">// å…è®¸è¿”å›void</span><br></code></pre></td></tr></table></figure>

<p>ä¸undefinedçš„åŒºåˆ«ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å¿…é¡»æ˜¾å¼è¿”å›undefined</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">StrictVoid</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-literal">undefined</span>;<br><span class="hljs-keyword">const</span> <span class="hljs-attr">strictFn</span>: <span class="hljs-title class_">StrictVoid</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-literal">undefined</span>; <span class="hljs-comment">// âœ…</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">invalidFn</span>: <span class="hljs-title class_">StrictVoid</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-string">&quot;test&quot;</span>;   <span class="hljs-comment">// ğŸš« é”™è¯¯</span><br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹å®è·µè¦ç‚¹</strong></p>
<ol>
<li>ä¼˜å…ˆä½¿ç”¨ä¸Šä¸‹æ–‡æ¨æ–­ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ¨èï¼šè®©TSè‡ªåŠ¨æ¨æ–­</span><br>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">num</span> =&gt;</span> num * <span class="hljs-number">2</span>);<br><br><span class="hljs-comment">// ä¸æ¨èï¼šå†—ä½™æ³¨è§£</span><br>[<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>].<span class="hljs-title function_">map</span>((<span class="hljs-attr">num</span>: <span class="hljs-built_in">number</span>): <span class="hljs-function"><span class="hljs-params">number</span> =&gt;</span> num * <span class="hljs-number">2</span>);<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>å›è°ƒå‡½æ•°å‚æ•°å‘½åçº¦å®šï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä½¿ç”¨æè¿°æ€§å‚æ•°åå¢å¼ºå¯è¯»æ€§</span><br><span class="hljs-title function_">fetchUser</span>(<span class="hljs-function"><span class="hljs-params">userId</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(userId); <span class="hljs-comment">// æ¯” `id` æ›´æ˜ç¡®</span><br>&#125;);<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>é¿å…anyæ±¡æŸ“å‡½æ•°é“¾ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å±é™©ï¼šanyç±»å‹ä¼ æ’­</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">dangerous</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">number</span> = <span class="hljs-function"><span class="hljs-params">input</span> =&gt;</span> input.<span class="hljs-property">length</span>;<br><br><span class="hljs-comment">// å®‰å…¨ï¼šæ˜ç¡®ç±»å‹çº¦æŸ</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">safe</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">any</span>[]</span>) =&gt;</span> <span class="hljs-built_in">number</span> = <span class="hljs-function"><span class="hljs-params">input</span> =&gt;</span> input.<span class="hljs-property">length</span>;<br></code></pre></td></tr></table></figure>

<ol start="4">
<li>å‡½æ•°é‡è½½ä¼˜å…ˆäºè”åˆå‚æ•°ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä¸æ¨èï¼šè”åˆç±»å‹å‚æ•°</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">padLeft</span>(<span class="hljs-params"><span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">padding</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">string</span> &#123;<br>  <span class="hljs-comment">/*...*/</span><br>&#125;<br><br><span class="hljs-comment">// æ¨èï¼šå‡½æ•°é‡è½½ï¼ˆä¸‹ä¸€èŠ‚å†…å®¹ï¼‰</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">padLeft</span>(<span class="hljs-params"><span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">padding</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">padLeft</span>(<span class="hljs-params"><span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">padding</span>: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">string</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">padLeft</span>(<span class="hljs-params"><span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">padding</span>: <span class="hljs-built_in">any</span></span>): <span class="hljs-built_in">string</span> &#123;<br>  <span class="hljs-comment">/*...*/</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å‡½æ•°ç±»å‹é«˜çº§æŠ€å·§</strong></p>
<p>å‡½æ•°å±æ€§æ‰©å±•ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">SearchFunction</span> &#123;<br>  (<span class="hljs-attr">source</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">subString</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span>;<br>  <span class="hljs-comment">// é™„åŠ å±æ€§</span><br>  <span class="hljs-attr">description</span>: <span class="hljs-built_in">string</span>;<br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">mySearch</span>: <span class="hljs-title class_">SearchFunction</span> = <span class="hljs-function">(<span class="hljs-params">src, sub</span>) =&gt;</span> src.<span class="hljs-title function_">includes</span>(sub);<br>mySearch.<span class="hljs-property">description</span> = <span class="hljs-string">&quot;String search function&quot;</span>;<br></code></pre></td></tr></table></figure>

<p>æ„é€ ç­¾åå‡½æ•°ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ClockConstructor</span> &#123;<br>  <span class="hljs-title function_">new</span> (<span class="hljs-attr">hour</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">minute</span>: <span class="hljs-built_in">number</span>): <span class="hljs-title class_">ClockInterface</span>;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">createClock</span>(<span class="hljs-params"><span class="hljs-attr">ctor</span>: <span class="hljs-title class_">ClockConstructor</span>, <span class="hljs-attr">h</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">m</span>: <span class="hljs-built_in">number</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">ctor</span>(h, m);<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="1-3-2-å‡½æ•°é‡è½½çš„å·¥ç¨‹å®è·µ"><a href="#1-3-2-å‡½æ•°é‡è½½çš„å·¥ç¨‹å®è·µ" class="headerlink" title="1.3.2 å‡½æ•°é‡è½½çš„å·¥ç¨‹å®è·µ"></a>1.3.2 å‡½æ•°é‡è½½çš„å·¥ç¨‹å®è·µ</h3><p><strong>å‡½æ•°é‡è½½åŸºç¡€æ¦‚å¿µ</strong></p>
<p>æ ¸å¿ƒç›®çš„ï¼šä¸ºåŒä¸€å‡½æ•°æä¾›å¤šä¸ªç±»å‹ç­¾åï¼Œå¤„ç†ä¸åŒå‚æ•°ç»„åˆæˆ–è¿”å›ç±»å‹</p>
<p>åŸºæœ¬ç»“æ„ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// é‡è½½ç­¾åï¼ˆç±»å‹å£°æ˜ï¼‰</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">parseInput</span>(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">number</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">parseInput</span>(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">string</span>;<br><br><span class="hljs-comment">// å®ç°ç­¾åï¼ˆå®é™…å‡½æ•°ä½“ï¼‰</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">parseInput</span>(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span> | <span class="hljs-built_in">string</span> &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> input === <span class="hljs-string">&quot;string&quot;</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-built_in">parseInt</span>(input, <span class="hljs-number">10</span>); <span class="hljs-comment">// è¿”å› number</span><br>  &#125;<br>  <span class="hljs-keyword">return</span> input.<span class="hljs-title function_">toString</span>(); <span class="hljs-comment">// è¿”å› string</span><br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> num = <span class="hljs-title function_">parseInput</span>(<span class="hljs-string">&quot;123&quot;</span>); <span class="hljs-comment">// number</span><br><span class="hljs-keyword">const</span> str = <span class="hljs-title function_">parseInput</span>(<span class="hljs-number">123</span>);   <span class="hljs-comment">// string</span><br></code></pre></td></tr></table></figure>

<p><strong>é‡è½½è§„åˆ™ä¸ç‰¹æ€§</strong></p>
<ol>
<li>ä¼˜å…ˆçº§è§„åˆ™ï¼š<ul>
<li>ä»ä¸Šåˆ°ä¸‹åŒ¹é…ç¬¬ä¸€ä¸ªç¬¦åˆçš„é‡è½½ç­¾å</li>
<li>å®ç°ç­¾åä¸å¯ç›´æ¥è°ƒç”¨ï¼ˆå¯¹å¤–ä¸å¯è§ï¼‰</li>
</ul>
</li>
<li>å‚æ•°ç±»å‹å…¼å®¹ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ­£ç¡®ï¼šå®ç°ç­¾åå¿…é¡»å…¼å®¹æ‰€æœ‰é‡è½½</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">void</span>;    <span class="hljs-comment">// âœ…</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">void</span>; <span class="hljs-comment">// âœ…</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">b</span>?: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">void</span> &#123;&#125; <span class="hljs-comment">// âœ…</span><br><br><span class="hljs-comment">// é”™è¯¯ï¼šå®ç°ç­¾åä¸å…¼å®¹é‡è½½</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">void</span>;    <span class="hljs-comment">// ğŸš«</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">void</span> &#123;&#125;  <span class="hljs-comment">// é”™è¯¯ï¼šç¼ºå°‘numberå‚æ•°å¤„ç†</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>è¿”å›å€¼ç±»å‹çº¦æŸï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// è¿”å›å€¼å¿…é¡»è¦†ç›–æ‰€æœ‰é‡è½½</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getValue</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">string</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getValue</span>(<span class="hljs-params"><span class="hljs-attr">format</span>: <span class="hljs-built_in">boolean</span></span>): <span class="hljs-built_in">number</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getValue</span>(<span class="hljs-params"><span class="hljs-attr">format</span>?: <span class="hljs-built_in">boolean</span></span>): <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> &#123;<br>  <span class="hljs-keyword">return</span> format ? <span class="hljs-number">123</span> : <span class="hljs-string">&quot;abc&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹å®è·µæ¨¡å¼</strong></p>
<p>æ¨¡å¼1ï¼šå‚æ•°ç±»å‹è½¬æ¢</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å­—ç¬¦ä¸²å’Œæ—¥æœŸäº’è½¬</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">convert</span>(<span class="hljs-params"><span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Date</span>;       <span class="hljs-comment">// string â†’ Date</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">convert</span>(<span class="hljs-params"><span class="hljs-attr">value</span>: <span class="hljs-title class_">Date</span></span>): <span class="hljs-built_in">string</span>;       <span class="hljs-comment">// Date â†’ string</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">convert</span>(<span class="hljs-params"><span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span> | <span class="hljs-title class_">Date</span></span>): <span class="hljs-title class_">Date</span> | <span class="hljs-built_in">string</span> &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> value === <span class="hljs-string">&quot;string&quot;</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(value);<br>  &#125;<br>  <span class="hljs-keyword">return</span> value.<span class="hljs-title function_">toISOString</span>();<br>&#125;<br><br><span class="hljs-keyword">const</span> date = <span class="hljs-title function_">convert</span>(<span class="hljs-string">&quot;2023-01-01&quot;</span>);  <span class="hljs-comment">// Date</span><br><span class="hljs-keyword">const</span> str = <span class="hljs-title function_">convert</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>());     <span class="hljs-comment">// string</span><br></code></pre></td></tr></table></figure>

<p>æ¨¡å¼2ï¼šé…ç½®å¯¹è±¡é‡è½½</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç®€å•æ¨¡å¼</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">SimpleConfig</span> &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>&#125;<br><br><span class="hljs-comment">// é«˜çº§æ¨¡å¼</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">AdvancedConfig</span> &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">debug</span>: <span class="hljs-built_in">boolean</span>;<br>  <span class="hljs-attr">retries</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"><span class="hljs-attr">config</span>: <span class="hljs-title class_">SimpleConfig</span></span>): <span class="hljs-built_in">void</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"><span class="hljs-attr">config</span>: <span class="hljs-title class_">AdvancedConfig</span></span>): <span class="hljs-built_in">void</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"><span class="hljs-attr">config</span>: <span class="hljs-title class_">SimpleConfig</span> | <span class="hljs-title class_">AdvancedConfig</span></span>): <span class="hljs-built_in">void</span> &#123;<br>  <span class="hljs-comment">// å…¬å…±åˆå§‹åŒ–é€»è¾‘</span><br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Initializing <span class="hljs-subst">$&#123;config.name&#125;</span>`</span>);<br>  <br>  <span class="hljs-comment">// ç±»å‹å®ˆå«å¤„ç†é«˜çº§é…ç½®</span><br>  <span class="hljs-keyword">if</span> (<span class="hljs-string">&quot;debug&quot;</span> <span class="hljs-keyword">in</span> config) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Debug mode:&quot;</span>, config.<span class="hljs-property">debug</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æ¨¡å¼3ï¼šDOM æ“ä½œé‡è½½</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">getElement</span>(<span class="hljs-params"><span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">HTMLElement</span> | <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">function</span> getElement&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">HTMLElement</span>&gt;(<span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">type</span>: <span class="hljs-title function_">new</span>() =&gt; T): T | <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">getElement</span>(<span class="hljs-params"><span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">type</span>?: <span class="hljs-keyword">new</span>() =&gt; <span class="hljs-title class_">HTMLElement</span></span>): <span class="hljs-title class_">HTMLElement</span> | <span class="hljs-literal">null</span> &#123;<br>  <span class="hljs-keyword">const</span> el = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(id);<br>  <span class="hljs-keyword">if</span> (el &amp;&amp; <span class="hljs-keyword">type</span> &amp;&amp; !(el <span class="hljs-keyword">instanceof</span> <span class="hljs-keyword">type</span>)) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Element type mismatch`</span>);<br>  &#125;<br>  <span class="hljs-keyword">return</span> el;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> div = <span class="hljs-title function_">getElement</span>(<span class="hljs-string">&quot;header&quot;</span>, <span class="hljs-title class_">HTMLDivElement</span>); <span class="hljs-comment">// HTMLDivElement | null</span><br><span class="hljs-keyword">const</span> generic = <span class="hljs-title function_">getElement</span>(<span class="hljs-string">&quot;content&quot;</span>);            <span class="hljs-comment">// HTMLElement | null</span><br></code></pre></td></tr></table></figure>

<p><strong>è”åˆç±»å‹ vs å‡½æ•°é‡è½½</strong></p>
<table>
<thead>
<tr>
<th align="left">åœºæ™¯</th>
<th align="left">æ¨èæ–¹æ¡ˆ</th>
<th align="left">åŸå› </th>
</tr>
</thead>
<tbody><tr>
<td align="left">å‚æ•°ç±»å‹å†³å®šè¿”å›å€¼ç±»å‹</td>
<td align="left">å‡½æ•°é‡è½½</td>
<td align="left">æä¾›ç²¾ç¡®çš„è¿”å›ç±»å‹</td>
</tr>
<tr>
<td align="left">å‚æ•°æ•°é‡å˜åŒ–</td>
<td align="left">å‡½æ•°é‡è½½</td>
<td align="left">æ˜ç¡®ä¸åŒå‚æ•°ç»„åˆ</td>
</tr>
<tr>
<td align="left">å‚æ•°ç±»å‹ç›¸åŒä½†å¤„ç†é€»è¾‘ä¸åŒ</td>
<td align="left">è”åˆç±»å‹ + ç±»å‹å®ˆå«</td>
<td align="left">é¿å…é‡è½½ç­¾åè†¨èƒ€</td>
</tr>
<tr>
<td align="left">å¤æ‚é…ç½®å¯¹è±¡</td>
<td align="left">å‡½æ•°é‡è½½</td>
<td align="left">åŒºåˆ†ä¸åŒé…ç½®ç»“æ„</td>
</tr>
<tr>
<td align="left">ç®€å•ç±»å‹å˜æ¢</td>
<td align="left">è”åˆç±»å‹</td>
<td align="left">å‡å°‘æ ·æ¿ä»£ç </td>
</tr>
</tbody></table>
<p>è”åˆç±»å‹ç¤ºä¾‹ï¼ˆé€‚åˆç®€å•åœºæ™¯ï¼‰ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä½¿ç”¨è”åˆç±»å‹æ›¿ä»£é‡è½½</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">padLeft</span>(<span class="hljs-params"><span class="hljs-attr">value</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">padding</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">string</span> &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> padding === <span class="hljs-string">&quot;number&quot;</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&quot; &quot;</span>.<span class="hljs-title function_">repeat</span>(padding) + value;<br>  &#125;<br>  <span class="hljs-keyword">return</span> padding + value;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>æœ€ä½³å®è·µæŒ‡å—</strong></p>
<ol>
<li>æ§åˆ¶é‡è½½æ•°é‡ï¼š<ul>
<li>å»ºè®®ä¸è¶…è¿‡ 5 ä¸ªé‡è½½ç­¾å</li>
<li>è¿‡å¤šé‡è½½ä¼šå¯¼è‡´ç±»å‹ç³»ç»Ÿè´Ÿæ‹…å¢åŠ </li>
</ul>
</li>
<li>å…¬å…±å‰ç½®å¤„ç†ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">processData</span>(<span class="hljs-params"><span class="hljs-attr">data</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">ResultA</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">processData</span>(<span class="hljs-params"><span class="hljs-attr">data</span>: <span class="hljs-title class_">Buffer</span></span>): <span class="hljs-title class_">ResultB</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">processData</span>(<span class="hljs-params"><span class="hljs-attr">data</span>: <span class="hljs-built_in">string</span> | <span class="hljs-title class_">Buffer</span></span>): <span class="hljs-title class_">ResultA</span> | <span class="hljs-title class_">ResultB</span> &#123;<br>  <span class="hljs-comment">// å…¬å…±éªŒè¯é€»è¾‘</span><br>  <span class="hljs-keyword">if</span> (data.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Empty data&quot;</span>);<br>  <br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> data === <span class="hljs-string">&quot;string&quot;</span>) &#123;<br>    <span class="hljs-comment">/* ç‰¹å®šå¤„ç† */</span><br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-comment">/* ç‰¹å®šå¤„ç† */</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>ä½¿ç”¨ç±»å‹å‚æ•°å‡å°‘é‡è½½ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä½¿ç”¨æ³›å‹æ›¿ä»£å¤šä¸ªé‡è½½</span><br><span class="hljs-keyword">function</span> identity&lt;T&gt;(<span class="hljs-attr">arg</span>: T): T &#123;<br>  <span class="hljs-keyword">return</span> arg;<br>&#125;<br><br><span class="hljs-comment">// æ¯”ä»¥ä¸‹é‡è½½æ›´ç®€æ´ï¼š</span><br><span class="hljs-comment">// function identity(arg: string): string;</span><br><span class="hljs-comment">// function identity(arg: number): number;</span><br><span class="hljs-comment">// ...</span><br></code></pre></td></tr></table></figure>

<ol start="4">
<li>æ–‡æ¡£æ³¨é‡Šè§„èŒƒï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åˆ›å»ºç”¨æˆ·</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> <span class="hljs-variable">name</span> - ç”¨æˆ·å</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@returns</span> ç”¨æˆ·ID</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params"><span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">string</span>;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åˆ›å»ºç”¨æˆ·ï¼ˆå¸¦é…ç½®ï¼‰</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@param</span> <span class="hljs-variable">options</span> - ç”¨æˆ·é…ç½®</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@returns</span> ç”¨æˆ·ID</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params"><span class="hljs-attr">options</span>: <span class="hljs-title class_">UserOptions</span></span>): <span class="hljs-built_in">string</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">createUser</span>(<span class="hljs-params"><span class="hljs-attr">param</span>: <span class="hljs-built_in">string</span> | <span class="hljs-title class_">UserOptions</span></span>): <span class="hljs-built_in">string</span> &#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å¸¸è§é”™è¯¯ä¸è§£å†³æ–¹æ¡ˆ</strong></p>
<p>é”™è¯¯1ï¼šå¿½ç•¥å®ç°ç­¾åå…¼å®¹æ€§</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// é”™è¯¯å®ç°</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">void</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">void</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>?: <span class="hljs-built_in">string</span></span>) &#123;&#125; <span class="hljs-comment">// âœ… æ­£ç¡®</span><br><br><span class="hljs-comment">// æ­£ç¡®ï¼šæ·»åŠ å¿…è¦çš„å‚æ•°æ£€æŸ¥</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>?: <span class="hljs-built_in">string</span></span>) &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> a === <span class="hljs-string">&quot;number&quot;</span> &amp;&amp; b === <span class="hljs-literal">undefined</span>) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Missing second argument&quot;</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>é”™è¯¯2ï¼šè¿”å›å€¼ç±»å‹ä¸å®Œæ•´</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// é”™è¯¯ï¼šç¼ºå°‘booleanè¿”å›ç±»å‹</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">string</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"><span class="hljs-attr">flag</span>: <span class="hljs-built_in">boolean</span></span>): <span class="hljs-built_in">number</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"><span class="hljs-attr">flag</span>?: <span class="hljs-built_in">boolean</span></span>): <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> &#123; <br>  <span class="hljs-keyword">return</span> flag ? <span class="hljs-number">123</span> : <span class="hljs-string">&quot;abc&quot;</span>; <br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> result = <span class="hljs-title function_">test</span>(<span class="hljs-literal">true</span>);  <span class="hljs-comment">// number âœ…</span><br><span class="hljs-keyword">const</span> result2 = <span class="hljs-title function_">test</span>();     <span class="hljs-comment">// string âœ…</span><br><span class="hljs-keyword">const</span> result3 = <span class="hljs-title function_">test</span>(<span class="hljs-literal">false</span>); <span class="hljs-comment">// ğŸš« é”™è¯¯ï¼æœªå£°æ˜è¿”å›boolean</span><br></code></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä¿®æ­£ï¼šæ·»åŠ å®Œæ•´é‡è½½</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">string</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"><span class="hljs-attr">flag</span>: <span class="hljs-literal">true</span></span>): <span class="hljs-built_in">number</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"><span class="hljs-attr">flag</span>: <span class="hljs-literal">false</span></span>): <span class="hljs-built_in">string</span>;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">test</span>(<span class="hljs-params"><span class="hljs-attr">flag</span>?: <span class="hljs-built_in">boolean</span></span>): <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> &#123;<br>  <span class="hljs-keyword">return</span> flag ? <span class="hljs-number">123</span> : <span class="hljs-string">&quot;abc&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>é«˜çº§å·¥ç¨‹æ¡ˆä¾‹</strong></p>
<p>API è¯·æ±‚é‡è½½ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç®€å•GETè¯·æ±‚</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">request</span>(<span class="hljs-params"><span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Response</span>&gt;;<br><br><span class="hljs-comment">// å¸¦å‚æ•°çš„GETè¯·æ±‚</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">request</span>(<span class="hljs-params"><span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">params</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;</span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Response</span>&gt;;<br><br><span class="hljs-comment">// POSTè¯·æ±‚</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">request</span>(<span class="hljs-params"><span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;POST&quot;</span>, <span class="hljs-attr">body</span>: <span class="hljs-built_in">object</span></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Response</span>&gt;;<br><br><span class="hljs-comment">// å®ç°</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">request</span>(<span class="hljs-params"></span><br><span class="hljs-params">  <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span>,</span><br><span class="hljs-params">  <span class="hljs-attr">paramsOrMethod</span>?: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; | <span class="hljs-string">&quot;POST&quot;</span>,</span><br><span class="hljs-params">  <span class="hljs-attr">body</span>?: <span class="hljs-built_in">object</span></span><br><span class="hljs-params"></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Response</span>&gt; &#123;<br>  <span class="hljs-keyword">if</span> (paramsOrMethod === <span class="hljs-literal">undefined</span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(url);<br>  &#125;<br>  <br>  <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> paramsOrMethod === <span class="hljs-string">&quot;object&quot;</span>) &#123;<br>    <span class="hljs-keyword">const</span> query = <span class="hljs-keyword">new</span> <span class="hljs-title class_">URLSearchParams</span>(paramsOrMethod).<span class="hljs-title function_">toString</span>();<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;url&#125;</span>?<span class="hljs-subst">$&#123;query&#125;</span>`</span>);<br>  &#125;<br>  <br>  <span class="hljs-keyword">if</span> (paramsOrMethod === <span class="hljs-string">&quot;POST&quot;</span> &amp;&amp; body) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-title function_">fetch</span>(url, &#123;<br>      <span class="hljs-attr">method</span>: <span class="hljs-string">&quot;POST&quot;</span>,<br>      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(body)<br>    &#125;);<br>  &#125;<br>  <br>  <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;Invalid arguments&quot;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="1-3-3-æ³›å‹çº¦æŸä¸é»˜è®¤ç±»å‹"><a href="#1-3-3-æ³›å‹çº¦æŸä¸é»˜è®¤ç±»å‹" class="headerlink" title="1.3.3 æ³›å‹çº¦æŸä¸é»˜è®¤ç±»å‹"></a>1.3.3 æ³›å‹çº¦æŸä¸é»˜è®¤ç±»å‹</h3><p><strong>æ³›å‹çº¦æŸï¼ˆGeneric Constraintsï¼‰</strong></p>
<p>æ ¸å¿ƒç›®çš„ï¼šé™åˆ¶æ³›å‹å‚æ•°å¿…é¡»æ»¡è¶³ç‰¹å®šæ¡ä»¶</p>
<p>åŸºç¡€è¯­æ³•ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> identity&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ConstraintType</span>&gt;(<span class="hljs-attr">arg</span>: T): T &#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>åŸºæœ¬çº¦æŸç¤ºä¾‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Lengthwise</span> &#123;<br>  <span class="hljs-attr">length</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-comment">// T å¿…é¡»åŒ…å« length å±æ€§</span><br><span class="hljs-keyword">function</span> logLength&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Lengthwise</span>&gt;(<span class="hljs-attr">arg</span>: T): T &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arg.<span class="hljs-property">length</span>);<br>  <span class="hljs-keyword">return</span> arg;<br>&#125;<br><br><span class="hljs-title function_">logLength</span>(<span class="hljs-string">&quot;hello&quot;</span>); <span class="hljs-comment">// âœ… å­—ç¬¦ä¸²æœ‰ length</span><br><span class="hljs-title function_">logLength</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]); <span class="hljs-comment">// âœ… æ•°ç»„æœ‰ length</span><br><span class="hljs-title function_">logLength</span>(<span class="hljs-number">100</span>); <span class="hljs-comment">// ğŸš« é”™è¯¯ï¼æ•°å­—æ²¡æœ‰ length</span><br></code></pre></td></tr></table></figure>

<p><strong>å¤šçº¦æŸæ¡ä»¶</strong></p>
<p>ä½¿ç”¨ &amp; è¿ç®—ç¬¦ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Printable</span> &#123;<br>  <span class="hljs-title function_">print</span>(): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Loggable</span> &#123;<br>  <span class="hljs-title function_">log</span>(): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-comment">// T å¿…é¡»åŒæ—¶æ»¡è¶³ Printable å’Œ Loggable</span><br><span class="hljs-keyword">function</span> processItem&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Printable</span> &amp; <span class="hljs-title class_">Loggable</span>&gt;(<span class="hljs-attr">item</span>: T) &#123;<br>  item.<span class="hljs-title function_">print</span>();<br>  item.<span class="hljs-title function_">log</span>();<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Document</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Printable</span>, <span class="hljs-title class_">Loggable</span> &#123;<br>  <span class="hljs-title function_">print</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Printing document&quot;</span>); &#125;<br>  <span class="hljs-title function_">log</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Logging document&quot;</span>); &#125;<br>&#125;<br><br><span class="hljs-title function_">processItem</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Document</span>()); <span class="hljs-comment">// âœ…</span><br></code></pre></td></tr></table></figure>

<p><strong>ç±»å‹å‚æ•°çº¦æŸ</strong></p>
<p>çº¦æŸæ³›å‹å‚æ•°ä¹‹é—´çš„å…³ç³»ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç¡®ä¿ K æ˜¯ T çš„é”®å</span><br><span class="hljs-keyword">function</span> getProperty&lt;T, K <span class="hljs-keyword">extends</span> keyof T&gt;(<span class="hljs-attr">obj</span>: T, <span class="hljs-attr">key</span>: K) &#123;<br>  <span class="hljs-keyword">return</span> obj[key];<br>&#125;<br><br><span class="hljs-keyword">const</span> person = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> &#125;;<br><span class="hljs-title function_">getProperty</span>(person, <span class="hljs-string">&quot;name&quot;</span>); <span class="hljs-comment">// âœ…</span><br><span class="hljs-title function_">getProperty</span>(person, <span class="hljs-string">&quot;email&quot;</span>); <span class="hljs-comment">// ğŸš« é”™è¯¯ï¼ä¸å­˜åœ¨è¯¥å±æ€§</span><br></code></pre></td></tr></table></figure>

<p>æ„é€ å‡½æ•°çº¦æŸï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// è¦æ±‚æ³›å‹ T å¿…é¡»å¯æ„é€ </span><br><span class="hljs-keyword">function</span> createInstance&lt;T <span class="hljs-keyword">extends</span> &#123; <span class="hljs-title function_">new</span> (): <span class="hljs-title class_">InstanceType</span> &#125;&gt;(<span class="hljs-attr">ctor</span>: T) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">ctor</span>();<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyClass</span> &#123;&#125;<br><span class="hljs-keyword">const</span> instance = <span class="hljs-title function_">createInstance</span>(<span class="hljs-title class_">MyClass</span>); <span class="hljs-comment">// âœ…</span><br></code></pre></td></tr></table></figure>

<p><strong>æ³›å‹é»˜è®¤ç±»å‹ï¼ˆDefault Typesï¼‰</strong></p>
<p>æ ¸å¿ƒç›®çš„ï¼šä¸ºæ³›å‹å‚æ•°æä¾›é»˜è®¤å€¼ï¼Œç®€åŒ–ä½¿ç”¨</p>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApiResponse</span>&lt;T = <span class="hljs-built_in">any</span>&gt; &#123;<br>  <span class="hljs-attr">data</span>: T;<br>  <span class="hljs-attr">status</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨é»˜è®¤ç±»å‹</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">response</span>: <span class="hljs-title class_">ApiResponse</span> = &#123; <br>  <span class="hljs-attr">data</span>: <span class="hljs-string">&quot;untyped data&quot;</span>, <span class="hljs-comment">// any ç±»å‹</span><br>  <span class="hljs-attr">status</span>: <span class="hljs-number">200</span><br>&#125;;<br><br><span class="hljs-comment">// æ˜¾å¼æŒ‡å®šç±»å‹</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">userResponse</span>: <span class="hljs-title class_">ApiResponse</span>&lt;<span class="hljs-title class_">User</span>&gt; = &#123;<br>  <span class="hljs-attr">data</span>: &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Alice&quot;</span> &#125;,<br>  <span class="hljs-attr">status</span>: <span class="hljs-number">200</span><br>&#125;;<br></code></pre></td></tr></table></figure>

<p><strong>çº¦æŸä¸é»˜è®¤ç±»å‹ç»„åˆ</strong></p>
<p>å¤æ‚åœºæ™¯åº”ç”¨ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 1. çº¦æŸ + é»˜è®¤ç±»å‹</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">PaginatedResult</span>&lt;T = <span class="hljs-built_in">object</span>&gt; &#123;<br>  <span class="hljs-attr">items</span>: T[];<br>  <span class="hljs-attr">total</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-comment">// 2. å‡½æ•°ä¸­ä½¿ç”¨</span><br><span class="hljs-keyword">function</span> fetchData&lt;T <span class="hljs-keyword">extends</span> &#123; <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span> &#125; = &#123; <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span> &#125;&gt;(<br>  <span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span><br>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">PaginatedResult</span>&lt;T&gt;&gt; &#123;<br>  <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨é»˜è®¤çº¦æŸ</span><br><span class="hljs-title function_">fetchData</span>(<span class="hljs-string">&quot;/users&quot;</span>); <span class="hljs-comment">// Promise&lt;PaginatedResult&lt;&#123; id: string &#125;&gt;&gt;</span><br><br><span class="hljs-comment">// æŒ‡å®šå…·ä½“ç±»å‹</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Product</span> &#123;<br>  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">price</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br>fetchData&lt;<span class="hljs-title class_">Product</span>&gt;(<span class="hljs-string">&quot;/products&quot;</span>); <span class="hljs-comment">// Promise&lt;PaginatedResult&lt;Product&gt;&gt;</span><br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹å®è·µæ¨¡å¼</strong></p>
<p>æ¨¡å¼1ï¼šéƒ¨åˆ†å±æ€§è¦æ±‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// è¦æ±‚å¯¹è±¡è‡³å°‘åŒ…å«ç‰¹å®šå±æ€§</span><br><span class="hljs-keyword">function</span> updateRecord&lt;T <span class="hljs-keyword">extends</span> &#123; <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span> &#125;&gt;(<span class="hljs-attr">record</span>: T) &#123;<br>  db.<span class="hljs-title function_">save</span>(record.<span class="hljs-property">id</span>, record);<br>&#125;<br><br><span class="hljs-comment">// å…è®¸é¢å¤–å±æ€§</span><br><span class="hljs-title function_">updateRecord</span>(&#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Alice&quot;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> &#125;); <span class="hljs-comment">// âœ…</span><br></code></pre></td></tr></table></figure>

<p>æ¨¡å¼2ï¼šå·¥å‚å‡½æ•°çº¦æŸ</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// è¦æ±‚ç±»æ„é€ å‡½æ•°</span><br><span class="hljs-keyword">function</span> create&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title function_">new</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span>&gt;(<br>  <span class="hljs-title class_">Ctor</span>: T,<br>  ...<span class="hljs-attr">args</span>: <span class="hljs-title class_">ConstructorParameters</span>&lt;T&gt;<br>): <span class="hljs-title class_">InstanceType</span>&lt;T&gt; &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Ctor</span>(...args);<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Widget</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span></span>) &#123;&#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> w = <span class="hljs-title function_">create</span>(<span class="hljs-title class_">Widget</span>, <span class="hljs-string">&quot;MyWidget&quot;</span>); <span class="hljs-comment">// Widget å®ä¾‹</span><br></code></pre></td></tr></table></figure>

<p>æ¨¡å¼3ï¼šAPI å“åº”æ ‡å‡†åŒ–</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApiResponse</span>&lt;T = <span class="hljs-built_in">unknown</span>, E = <span class="hljs-title class_">Error</span>&gt; &#123;<br>  <span class="hljs-attr">success</span>: <span class="hljs-built_in">boolean</span>;<br>  <span class="hljs-attr">data</span>?: T;<br>  <span class="hljs-attr">error</span>?: E;<br>  <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span>;<br>&#125;<br><br><span class="hljs-keyword">function</span> createResponse&lt;T&gt;(<span class="hljs-attr">data</span>: T): <span class="hljs-title class_">ApiResponse</span>&lt;T&gt; &#123;<br>  <span class="hljs-keyword">return</span> &#123;<br>    <span class="hljs-attr">success</span>: <span class="hljs-literal">true</span>,<br>    data,<br>    <span class="hljs-attr">timestamp</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>()<br>  &#125;;<br>&#125;<br><br><span class="hljs-keyword">const</span> userResponse = <span class="hljs-title function_">createResponse</span>(&#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Alice&quot;</span> &#125;); <span class="hljs-comment">// ApiResponse&lt;&#123; name: string &#125;&gt;</span><br></code></pre></td></tr></table></figure>

<p><strong>æœ€ä½³å®è·µæŒ‡å—</strong></p>
<ol>
<li>é¿å…è¿‡åº¦çº¦æŸï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// è¿‡åº¦çº¦æŸï¼šé™åˆ¶ä¸ºç‰¹å®šç±»å‹</span><br><span class="hljs-keyword">function</span> process&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>&gt;(<span class="hljs-attr">input</span>: T): T &#123; ... &#125;<br><br><span class="hljs-comment">// æ¨èï¼šæ›´çµæ´»çš„çº¦æŸ</span><br><span class="hljs-keyword">function</span> process&lt;T&gt;(<span class="hljs-attr">input</span>: T): T &#123; ... &#125;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>åˆç†ä½¿ç”¨é»˜è®¤ç±»å‹ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä¸ºå¸¸ç”¨ç±»å‹æä¾›é»˜è®¤å€¼</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Formatter</span>&lt;T = <span class="hljs-built_in">string</span>&gt; = <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">input</span>: T</span>) =&gt;</span> <span class="hljs-built_in">string</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">dateFormatter</span>: <span class="hljs-title class_">Formatter</span>&lt;<span class="hljs-title class_">Date</span>&gt; = <span class="hljs-function"><span class="hljs-params">date</span> =&gt;</span> date.<span class="hljs-title function_">toISOString</span>();<br><span class="hljs-keyword">const</span> <span class="hljs-attr">defaultFormatter</span>: <span class="hljs-title class_">Formatter</span> = <span class="hljs-function"><span class="hljs-params">str</span> =&gt;</span> str.<span class="hljs-title function_">toUpperCase</span>(); <span class="hljs-comment">// é»˜è®¤ string</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>çº¦æŸæ–‡æ¡£åŒ–ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * åˆå¹¶ä¸¤ä¸ªå¯¹è±¡</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@template</span> <span class="hljs-variable">T</span> - ç¬¬ä¸€ä¸ªå¯¹è±¡çš„ç±»å‹</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@template</span> <span class="hljs-variable">U</span> - ç¬¬äºŒä¸ªå¯¹è±¡çš„ç±»å‹ï¼ˆå¿…é¡»ä¸Tå…¼å®¹ï¼‰</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">function</span> merge&lt;T, U <span class="hljs-keyword">extends</span> T&gt;(<span class="hljs-attr">obj1</span>: T, <span class="hljs-attr">obj2</span>: U): T &amp; U &#123;<br>  <span class="hljs-keyword">return</span> &#123; ...obj1, ...obj2 &#125;;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="4">
<li>ç±»å‹å‚æ•°å‘½åçº¦å®šï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ¨èï¼šä½¿ç”¨æœ‰æ„ä¹‰çš„ç±»å‹å‚æ•°å</span><br><span class="hljs-keyword">function</span> getValue&lt;<span class="hljs-title class_">TObject</span>, <span class="hljs-title class_">TKey</span> <span class="hljs-keyword">extends</span> keyof <span class="hljs-title class_">TObject</span>&gt;(<br>  <span class="hljs-attr">obj</span>: <span class="hljs-title class_">TObject</span>, <br>  <span class="hljs-attr">key</span>: <span class="hljs-title class_">TKey</span><br>): <span class="hljs-title class_">TObject</span>[<span class="hljs-title class_">TKey</span>] &#123;<br>  <span class="hljs-keyword">return</span> obj[key];<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å¤æ‚çº¦æŸæ¡ˆä¾‹</strong></p>
<p>é€’å½’çº¦æŸï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ ‘èŠ‚ç‚¹ç»“æ„çº¦æŸ</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">TreeNode</span> &#123;<br>  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">children</span>?: <span class="hljs-title class_">TreeNode</span>[];<br>&#125;<br><br><span class="hljs-keyword">function</span> walkTree&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">TreeNode</span>&gt;(<span class="hljs-attr">node</span>: T) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(node.<span class="hljs-property">id</span>);<br>  node.<span class="hljs-property">children</span>?.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">child</span> =&gt;</span> <span class="hljs-title function_">walkTree</span>(child));<br>&#125;<br><br><span class="hljs-keyword">const</span> tree = &#123;<br>  <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;root&quot;</span>,<br>  <span class="hljs-attr">children</span>: [<br>    &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;child1&quot;</span> &#125;,<br>    &#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;child2&quot;</span>, <span class="hljs-attr">children</span>: [&#123; <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;grandchild&quot;</span> &#125;] &#125;<br>  ]<br>&#125;;<br><span class="hljs-title function_">walkTree</span>(tree); <span class="hljs-comment">// âœ…</span><br></code></pre></td></tr></table></figure>

<p>æ¡ä»¶ç±»å‹çº¦æŸï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç¡®ä¿æ³›å‹æ˜¯å‡½æ•°ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ReturnTypeOrNever</span>&lt;T&gt; = T <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; infer R ? R : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-keyword">function</span> getReturnType&lt;T <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span>&gt;(<br>  <span class="hljs-attr">fn</span>: T<br>): <span class="hljs-title class_">ReturnTypeOrNever</span>&lt;T&gt; &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">fn</span>() <span class="hljs-keyword">as</span> <span class="hljs-title class_">ReturnTypeOrNever</span>&lt;T&gt;;<br>&#125;<br><br><span class="hljs-keyword">const</span> str = <span class="hljs-title function_">getReturnType</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-string">&quot;hello&quot;</span>); <span class="hljs-comment">// string</span><br><span class="hljs-keyword">const</span> num = <span class="hljs-title function_">getReturnType</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-number">123</span>); <span class="hljs-comment">// number</span><br></code></pre></td></tr></table></figure>

<p><strong>å¸¸è§é”™è¯¯è§£å†³æ–¹æ¡ˆ</strong></p>
<p>é”™è¯¯ï¼šçº¦æŸä¸æ»¡è¶³</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> getSize&lt;T <span class="hljs-keyword">extends</span> &#123; <span class="hljs-attr">length</span>: <span class="hljs-built_in">number</span> &#125;&gt;(<span class="hljs-attr">obj</span>: T): <span class="hljs-built_in">number</span> &#123;<br>  <span class="hljs-keyword">return</span> obj.<span class="hljs-property">length</span>;<br>&#125;<br><br><span class="hljs-title function_">getSize</span>(&#123; <span class="hljs-attr">size</span>: <span class="hljs-number">10</span> &#125;); <span class="hljs-comment">// ğŸš« é”™è¯¯ï¼šç¼ºå°‘ length å±æ€§</span><br></code></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ–¹æ³•1ï¼šæä¾›æ­£ç¡®ç±»å‹</span><br><span class="hljs-title function_">getSize</span>(&#123; <span class="hljs-attr">length</span>: <span class="hljs-number">10</span> &#125;);<br><br><span class="hljs-comment">// æ–¹æ³•2ï¼šæ‰©å±•çº¦æŸ</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Sizeable</span> &#123;<br>  <span class="hljs-attr">length</span>?: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">size</span>?: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-keyword">function</span> getSize&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Sizeable</span>&gt;(<span class="hljs-attr">obj</span>: T): <span class="hljs-built_in">number</span> &#123;<br>  <span class="hljs-keyword">return</span> obj.<span class="hljs-property">length</span> ?? obj.<span class="hljs-property">size</span> ?? <span class="hljs-number">0</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>é”™è¯¯ï¼šé»˜è®¤ç±»å‹ä¸çº¦æŸå†²çª</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> = <span class="hljs-built_in">number</span>&gt; &#123; <span class="hljs-comment">// ğŸš« é”™è¯¯ï¼é»˜è®¤ç±»å‹å¿…é¡»æ»¡è¶³çº¦æŸ</span><br>  <span class="hljs-attr">value</span>: T;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// çº¦æŸå’Œé»˜è®¤ç±»å‹éœ€å…¼å®¹</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span> = <span class="hljs-built_in">number</span>&gt; &#123;<br>  <span class="hljs-attr">value</span>: T;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="1-3-4-æ³›å‹åœ¨æ¥å£-ç±»ä¸­çš„é«˜çº§åº”ç”¨"><a href="#1-3-4-æ³›å‹åœ¨æ¥å£-ç±»ä¸­çš„é«˜çº§åº”ç”¨" class="headerlink" title="1.3.4 æ³›å‹åœ¨æ¥å£&#x2F;ç±»ä¸­çš„é«˜çº§åº”ç”¨"></a>1.3.4 æ³›å‹åœ¨æ¥å£&#x2F;ç±»ä¸­çš„é«˜çº§åº”ç”¨</h3><p><strong>æ³›å‹æ¥å£ï¼ˆGeneric Interfacesï¼‰</strong></p>
<p>åŸºç¡€æ¨¡å¼ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç®€å•æ³›å‹æ¥å£</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">KeyValuePair</span>&lt;K, V&gt; &#123;<br>  <span class="hljs-attr">key</span>: K;<br>  <span class="hljs-attr">value</span>: V;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">stringPair</span>: <span class="hljs-title class_">KeyValuePair</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = &#123;<br>  <span class="hljs-attr">key</span>: <span class="hljs-string">&quot;name&quot;</span>,<br>  <span class="hljs-attr">value</span>: <span class="hljs-string">&quot;Alice&quot;</span><br>&#125;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">numberPair</span>: <span class="hljs-title class_">KeyValuePair</span>&lt;<span class="hljs-built_in">number</span>, <span class="hljs-built_in">boolean</span>&gt; = &#123;<br>  <span class="hljs-attr">key</span>: <span class="hljs-number">1</span>,<br>  <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span><br>&#125;;<br></code></pre></td></tr></table></figure>

<p>å‡½æ•°ç­¾åæ³›å‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å¸¦è°ƒç”¨ç­¾åçš„æ³›å‹æ¥å£</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Transformer</span>&lt;T, U&gt; &#123;<br>  (<span class="hljs-attr">input</span>: T): U;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">toUpperCase</span>: <span class="hljs-title class_">Transformer</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt; = <br>  <span class="hljs-function"><span class="hljs-params">str</span> =&gt;</span> str.<span class="hljs-title function_">toUpperCase</span>();<br>  <br><span class="hljs-keyword">const</span> <span class="hljs-attr">toNumber</span>: <span class="hljs-title class_">Transformer</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>&gt; = <br>  <span class="hljs-function"><span class="hljs-params">str</span> =&gt;</span> <span class="hljs-built_in">parseFloat</span>(str);<br></code></pre></td></tr></table></figure>

<p><strong>æ³›å‹ç±»ï¼ˆGeneric Classesï¼‰</strong></p>
<p>åŸºæœ¬ç»“æ„ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Box</span>&lt;T&gt; &#123;<br>  <span class="hljs-keyword">private</span> <span class="hljs-attr">content</span>: T;<br>  <br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-attr">initialValue</span>: T</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> = initialValue;<br>  &#125;<br>  <br>  <span class="hljs-title function_">getValue</span>(): T &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span>;<br>  &#125;<br>  <br>  <span class="hljs-title function_">setValue</span>(<span class="hljs-attr">newValue</span>: T): <span class="hljs-built_in">void</span> &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">content</span> = newValue;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> stringBox = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Box</span>&lt;<span class="hljs-built_in">string</span>&gt;(<span class="hljs-string">&quot;Initial&quot;</span>);<br>stringBox.<span class="hljs-title function_">setValue</span>(<span class="hljs-string">&quot;New value&quot;</span>);<br><br><span class="hljs-keyword">const</span> numberBox = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Box</span>&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">100</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(numberBox.<span class="hljs-title function_">getValue</span>() * <span class="hljs-number">2</span>); <span class="hljs-comment">// 200</span><br></code></pre></td></tr></table></figure>

<p>é™æ€æˆå‘˜é™åˆ¶ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Factory</span>&lt;T&gt; &#123;<br>  <span class="hljs-comment">// ğŸš« é”™è¯¯ï¼é™æ€æˆå‘˜ä¸èƒ½å¼•ç”¨ç±»å‹å‚æ•°</span><br>  <span class="hljs-keyword">static</span> <span class="hljs-attr">default</span>: T;<br>  <br>  <span class="hljs-comment">// âœ… æ­£ç¡®ï¼šé™æ€æˆå‘˜ä½¿ç”¨ç‹¬ç«‹æ³›å‹</span><br>  <span class="hljs-keyword">static</span> create&lt;U&gt;(<span class="hljs-attr">value</span>: U): <span class="hljs-title class_">Factory</span>&lt;U&gt; &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Factory</span>(value);<br>  &#125;<br>  <br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-attr">value</span>: T</span>) &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>æ³›å‹çº¦æŸçš„é«˜çº§åº”ç”¨</strong></p>
<p>ç±»å‹å‚æ•°çº¦æŸï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç¡®ä¿ç±»å‹Tæœ‰idå±æ€§</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Identifiable</span> &#123;<br>  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Repository</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Identifiable</span>&gt; &#123;<br>  <span class="hljs-keyword">private</span> <span class="hljs-attr">items</span>: T[] = [];<br>  <br>  <span class="hljs-title function_">add</span>(<span class="hljs-params"><span class="hljs-attr">item</span>: T</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">push</span>(item);<br>  &#125;<br>  <br>  <span class="hljs-title function_">findById</span>(<span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>): T | <span class="hljs-literal">undefined</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">items</span>.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">item</span> =&gt;</span> item.<span class="hljs-property">id</span> === id);<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Identifiable</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>, <span class="hljs-keyword">public</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span></span>) &#123;&#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> userRepo = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Repository</span>&lt;<span class="hljs-title class_">User</span>&gt;();<br>userRepo.<span class="hljs-title function_">add</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-string">&quot;1&quot;</span>, <span class="hljs-string">&quot;Alice&quot;</span>));<br><span class="hljs-keyword">const</span> user = userRepo.<span class="hljs-title function_">findById</span>(<span class="hljs-string">&quot;1&quot;</span>);<br></code></pre></td></tr></table></figure>

<p>æ„é€ å‡½æ•°çº¦æŸï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// è¦æ±‚æ³›å‹Tå¿…é¡»æ˜¯ç±»ç±»å‹</span><br><span class="hljs-keyword">function</span> createInstance&lt;T&gt;(<span class="hljs-attr">ctor</span>: <span class="hljs-title function_">new</span> () =&gt; T): T &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">ctor</span>();<br>&#125;<br><br><span class="hljs-comment">// é«˜çº§ï¼šå¸¦å‚æ•°æ„é€ å‡½æ•°</span><br><span class="hljs-keyword">function</span> createWithParams&lt;T&gt;(<br>  <span class="hljs-attr">ctor</span>: <span class="hljs-title function_">new</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]) =&gt; T,<br>  ...<span class="hljs-attr">args</span>: <span class="hljs-title class_">ConstructorParameters</span>&lt;<span class="hljs-keyword">typeof</span> ctor&gt;<br>): T &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title function_">ctor</span>(...args);<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Point</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span>, <span class="hljs-keyword">public</span> <span class="hljs-attr">y</span>: <span class="hljs-built_in">number</span></span>) &#123;&#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> p = <span class="hljs-title function_">createWithParams</span>(<span class="hljs-title class_">Point</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>); <span class="hljs-comment">// Point &#123; x: 1, y: 2 &#125;</span><br></code></pre></td></tr></table></figure>

<p><strong>æ¥å£ä¸ç±»çš„ç»„åˆæ¨¡å¼</strong></p>
<p>æ¨¡å¼1ï¼šå·¥å‚æ¥å£</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Factory</span>&lt;T&gt; &#123;<br>  <span class="hljs-title function_">create</span>(): T;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CarFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Factory</span>&lt;<span class="hljs-title class_">Car</span>&gt; &#123;<br>  <span class="hljs-title function_">create</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Car</span>();<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BikeFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Factory</span>&lt;<span class="hljs-title class_">Bike</span>&gt; &#123;<br>  <span class="hljs-title function_">create</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Bike</span>();<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">function</span> assembleProduct&lt;T&gt;(<span class="hljs-attr">factory</span>: <span class="hljs-title class_">Factory</span>&lt;T&gt;): T &#123;<br>  <span class="hljs-keyword">return</span> factory.<span class="hljs-title function_">create</span>();<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æ¨¡å¼2ï¼šç­–ç•¥æ¨¡å¼</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">PaymentStrategy</span>&lt;T&gt; &#123;<br>  <span class="hljs-title function_">processPayment</span>(<span class="hljs-attr">amount</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">context</span>: T): <span class="hljs-built_in">boolean</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CreditCardStrategy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PaymentStrategy</span>&lt;<span class="hljs-title class_">CreditCardInfo</span>&gt; &#123;<br>  <span class="hljs-title function_">processPayment</span>(<span class="hljs-params"><span class="hljs-attr">amount</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">card</span>: <span class="hljs-title class_">CreditCardInfo</span></span>) &#123;<br>    <span class="hljs-comment">// ä¿¡ç”¨å¡æ”¯ä»˜é€»è¾‘</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PayPalStrategy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PaymentStrategy</span>&lt;<span class="hljs-title class_">PayPalAccount</span>&gt; &#123;<br>  <span class="hljs-title function_">processPayment</span>(<span class="hljs-params"><span class="hljs-attr">amount</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">account</span>: <span class="hljs-title class_">PayPalAccount</span></span>) &#123;<br>    <span class="hljs-comment">// PayPalæ”¯ä»˜é€»è¾‘</span><br>    <span class="hljs-keyword">return</span> <span class="hljs-literal">true</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">function</span> processOrder&lt;T&gt;(<br>  <span class="hljs-attr">amount</span>: <span class="hljs-built_in">number</span>,<br>  <span class="hljs-attr">strategy</span>: <span class="hljs-title class_">PaymentStrategy</span>&lt;T&gt;,<br>  <span class="hljs-attr">context</span>: T<br>) &#123;<br>  <span class="hljs-keyword">return</span> strategy.<span class="hljs-title function_">processPayment</span>(amount, context);<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>ç±»å‹æ¨å¯¼ä¸é»˜è®¤å€¼</strong></p>
<p>ç±»å‹å‚æ•°é»˜è®¤å€¼ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ¥å£é»˜è®¤ç±»å‹</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">PaginatedResponse</span>&lt;T = <span class="hljs-built_in">any</span>&gt; &#123;<br>  <span class="hljs-attr">data</span>: T[];<br>  <span class="hljs-attr">page</span>: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">totalPages</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-comment">// ç±»é»˜è®¤ç±»å‹</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cache</span>&lt;T = <span class="hljs-built_in">string</span>&gt; &#123;<br>  <span class="hljs-keyword">private</span> map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, T&gt;();<br>  <br>  <span class="hljs-title function_">set</span>(<span class="hljs-params"><span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">value</span>: T</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">set</span>(key, value);<br>  &#125;<br>  <br>  <span class="hljs-title function_">get</span>(<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>): T | <span class="hljs-literal">undefined</span> &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">map</span>.<span class="hljs-title function_">get</span>(key);<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨é»˜è®¤ç±»å‹</span><br><span class="hljs-keyword">const</span> stringCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cache</span>(); <span class="hljs-comment">// Cache&lt;string&gt;</span><br>stringCache.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;name&quot;</span>, <span class="hljs-string">&quot;Alice&quot;</span>);<br><br><span class="hljs-keyword">const</span> anyCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cache</span>&lt;<span class="hljs-built_in">any</span>&gt;();<br>anyCache.<span class="hljs-title function_">set</span>(<span class="hljs-string">&quot;user&quot;</span>, &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Bob&quot;</span> &#125;);<br></code></pre></td></tr></table></figure>

<p>ä¸Šä¸‹æ–‡ç±»å‹æ¨å¯¼ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ ¹æ®å®ç°è‡ªåŠ¨æ¨å¯¼ç±»å‹å‚æ•°</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">StringContainer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Container</span>&lt;<span class="hljs-built_in">string</span>&gt; &#123;<br>  <span class="hljs-title function_">add</span>(<span class="hljs-params"><span class="hljs-attr">item</span>: <span class="hljs-built_in">string</span></span>) &#123; <span class="hljs-comment">/*...*/</span> &#125;<br>&#125;<br><br><span class="hljs-comment">// æ˜¾å¼æŒ‡å®šç±»å‹å‚æ•°</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">NumberContainer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Container</span>&lt;<span class="hljs-built_in">number</span>&gt; &#123;<br>  <span class="hljs-title function_">add</span>(<span class="hljs-params"><span class="hljs-attr">item</span>: <span class="hljs-built_in">number</span></span>) &#123; <span class="hljs-comment">/*...*/</span> &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>é«˜çº§å·¥ç¨‹æ¡ˆä¾‹</strong></p>
<p>æ¡ˆä¾‹1ï¼šAPI å®¢æˆ·ç«¯å°è£…</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApiClient</span>&lt;T&gt; &#123;<br>  <span class="hljs-title function_">fetchData</span>(<span class="hljs-attr">endpoint</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt;;<br>  <span class="hljs-title function_">postData</span>(<span class="hljs-attr">endpoint</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">data</span>: <span class="hljs-title class_">Partial</span>&lt;T&gt;): <span class="hljs-title class_">Promise</span>&lt;T&gt;;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">JsonApiClient</span>&lt;T&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ApiClient</span>&lt;T&gt; &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-attr">baseUrl</span>: <span class="hljs-built_in">string</span></span>) &#123;&#125;<br>  <br>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-attr">endpoint</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt; &#123;<br>    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.baseUrl&#125;</span>/<span class="hljs-subst">$&#123;endpoint&#125;</span>`</span>);<br>    <span class="hljs-keyword">return</span> response.<span class="hljs-title function_">json</span>();<br>  &#125;<br>  <br>  <span class="hljs-keyword">async</span> <span class="hljs-title function_">postData</span>(<span class="hljs-attr">endpoint</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">data</span>: <span class="hljs-title class_">Partial</span>&lt;T&gt;): <span class="hljs-title class_">Promise</span>&lt;T&gt; &#123;<br>    <span class="hljs-keyword">const</span> response = <span class="hljs-keyword">await</span> <span class="hljs-title function_">fetch</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.baseUrl&#125;</span>/<span class="hljs-subst">$&#123;endpoint&#125;</span>`</span>, &#123;<br>      <span class="hljs-attr">method</span>: <span class="hljs-string">&#x27;POST&#x27;</span>,<br>      <span class="hljs-attr">body</span>: <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data)<br>    &#125;);<br>    <span class="hljs-keyword">return</span> response.<span class="hljs-title function_">json</span>();<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> &#123;<br>  <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>;<br>&#125;<br><br><span class="hljs-keyword">const</span> userClient = <span class="hljs-keyword">new</span> <span class="hljs-title class_">JsonApiClient</span>&lt;<span class="hljs-title class_">User</span>&gt;(<span class="hljs-string">&quot;https://api.example.com/users&quot;</span>);<br><span class="hljs-keyword">const</span> user = <span class="hljs-keyword">await</span> userClient.<span class="hljs-title function_">fetchData</span>(<span class="hljs-string">&quot;123&quot;</span>);<br></code></pre></td></tr></table></figure>

<p>æ¡ˆä¾‹2ï¼šçŠ¶æ€ç®¡ç†</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">State</span>&lt;T&gt; &#123;<br>  <span class="hljs-attr">current</span>: T;<br>  <span class="hljs-attr">history</span>: T[];<br>  <span class="hljs-title function_">update</span>(<span class="hljs-attr">newState</span>: T): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">HistoryState</span>&lt;T&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">State</span>&lt;T&gt; &#123;<br>  <span class="hljs-attr">history</span>: T[] = [];<br>  <br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> <span class="hljs-attr">current</span>: T</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">push</span>(current);<br>  &#125;<br>  <br>  <span class="hljs-title function_">update</span>(<span class="hljs-params"><span class="hljs-attr">newState</span>: T</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">current</span> = newState;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>.<span class="hljs-title function_">push</span>(newState);<br>  &#125;<br>  <br>  <span class="hljs-title function_">getHistory</span>(): T[] &#123;<br>    <span class="hljs-keyword">return</span> [...<span class="hljs-variable language_">this</span>.<span class="hljs-property">history</span>];<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> counterState = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HistoryState</span>&lt;<span class="hljs-built_in">number</span>&gt;(<span class="hljs-number">0</span>);<br>counterState.<span class="hljs-title function_">update</span>(<span class="hljs-number">1</span>);<br>counterState.<span class="hljs-title function_">update</span>(<span class="hljs-number">2</span>);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(counterState.<span class="hljs-title function_">getHistory</span>()); <span class="hljs-comment">// [0, 1, 2]</span><br></code></pre></td></tr></table></figure>

<p><strong>æœ€ä½³å®è·µæŒ‡å—</strong></p>
<ol>
<li>é¿å…è¿‡åº¦æ³›å‹åŒ–ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä¸æ¨èï¼šä¸å¿…è¦çš„æ³›å‹</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Printer</span>&lt;T&gt; &#123;<br>  <span class="hljs-title function_">print</span>(<span class="hljs-params"><span class="hljs-attr">value</span>: T</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value);<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// æ¨èï¼šç›´æ¥ä½¿ç”¨å…·ä½“ç±»å‹</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConsolePrinter</span> &#123;<br>  <span class="hljs-title function_">print</span>(<span class="hljs-params"><span class="hljs-attr">value</span>: <span class="hljs-built_in">any</span></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>æä¾›æœ‰æ„ä¹‰çš„ç±»å‹å‚æ•°åï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ¨è</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Repository</span>&lt;<span class="hljs-title class_">EntityType</span>&gt; &#123;<br>  <span class="hljs-title function_">save</span>(<span class="hljs-attr">entity</span>: <span class="hljs-title class_">EntityType</span>): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-comment">// ä¸æ¨è</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Repository</span>&lt;T&gt; &#123;<br>  <span class="hljs-title function_">save</span>(<span class="hljs-attr">e</span>: T): <span class="hljs-built_in">void</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>é»˜è®¤ç±»å‹ç”¨äºé€šç”¨åœºæ™¯ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// é€šç”¨ç¼“å­˜é»˜è®¤å­˜å‚¨å¯¹è±¡</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cache</span>&lt;T = <span class="hljs-built_in">object</span>&gt; &#123;<br>  <span class="hljs-keyword">private</span> storage = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>&lt;<span class="hljs-built_in">string</span>, T&gt;();<br>  <span class="hljs-comment">// ...</span><br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨é»˜è®¤ç±»å‹</span><br><span class="hljs-keyword">const</span> objectCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cache</span>();<br></code></pre></td></tr></table></figure>

<ol start="4">
<li>çº¦æŸæ–‡æ¡£åŒ–ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æ’åºæœåŠ¡</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@template</span> <span class="hljs-variable">T</span> - æ’åºå…ƒç´ çš„ç±»å‹</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@template</span> <span class="hljs-variable">K</span> - æ’åºä¾æ®çš„é”®åï¼ˆå¿…é¡»æ˜¯Tçš„é”®ï¼‰</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Sorter</span>&lt;T, K <span class="hljs-keyword">extends</span> keyof T&gt; &#123;<br>  <span class="hljs-title function_">sort</span>(<span class="hljs-params"><span class="hljs-attr">items</span>: T[], <span class="hljs-attr">key</span>: K</span>) &#123;<br>    <span class="hljs-keyword">return</span> items.<span class="hljs-title function_">sort</span>(<span class="hljs-function">(<span class="hljs-params">a, b</span>) =&gt;</span> <br>      a[key] &gt; b[key] ? <span class="hljs-number">1</span> : -<span class="hljs-number">1</span><br>    );<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="5">
<li>ç±»ä¸æ¥å£ååŒï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å®šä¹‰æ³›å‹æ¥å£</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Processor</span>&lt;T&gt; &#123;<br>  <span class="hljs-title function_">process</span>(<span class="hljs-attr">input</span>: T): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-comment">// å®ç°å…·ä½“å¤„ç†å™¨</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">NumberProcessor</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Processor</span>&lt;<span class="hljs-built_in">number</span>&gt; &#123;<br>  <span class="hljs-title function_">process</span>(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">number</span></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(input * <span class="hljs-number">2</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// åˆ›å»ºå¤„ç†å™¨å·¥å‚</span><br><span class="hljs-keyword">const</span> processors = &#123;<br>  <span class="hljs-attr">number</span>: <span class="hljs-keyword">new</span> <span class="hljs-title class_">NumberProcessor</span>()<br>&#125;;<br><br><span class="hljs-keyword">function</span> processData&lt;T&gt;(<span class="hljs-attr">type</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">data</span>: T) &#123;<br>  <span class="hljs-keyword">if</span> (processors[<span class="hljs-keyword">type</span>]) &#123;<br>    (processors[<span class="hljs-keyword">type</span>] <span class="hljs-keyword">as</span> <span class="hljs-title class_">Processor</span>&lt;T&gt;).<span class="hljs-title function_">process</span>(data);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</strong></p>
<p>é—®é¢˜ï¼šæ³›å‹ç±»å®ä¾‹æ–¹æ³•ç±»å‹ä¸¢å¤±</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Wrapper</span>&lt;T&gt; &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-attr">value</span>: T</span>) &#123;&#125;<br>  <br>  <span class="hljs-title function_">getValue</span>(): T &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ç±»å‹ä¿¡æ¯ä¸¢å¤±</span><br><span class="hljs-keyword">const</span> wrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Wrapper</span>(<span class="hljs-number">42</span>);<br><span class="hljs-keyword">const</span> value = wrapper.<span class="hljs-title function_">getValue</span>(); <span class="hljs-comment">// value ç±»å‹ä¸º number âœ…</span><br></code></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨æˆå‘˜å˜é‡ä¿å­˜ç±»å‹</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">TypeSafeWrapper</span>&lt;T&gt; &#123;<br>  <span class="hljs-comment">// æ˜¾å¼ä¿å­˜ç±»å‹å¼•ç”¨</span><br>  <span class="hljs-keyword">public</span> <span class="hljs-keyword">readonly</span> valueType!: T;<br>  <br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-attr">value</span>: T</span>) &#123;&#125;<br>  <br>  <span class="hljs-title function_">getValue</span>(): T &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> safeWrapper = <span class="hljs-keyword">new</span> <span class="hljs-title class_">TypeSafeWrapper</span>(<span class="hljs-string">&quot;text&quot;</span>);<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ValueType</span> = <span class="hljs-keyword">typeof</span> safeWrapper.<span class="hljs-property">valueType</span>; <span class="hljs-comment">// string</span><br></code></pre></td></tr></table></figure>

<p>é—®é¢˜ï¼šæ³›å‹æ¥å£å®ç°å†²çª</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Adder</span>&lt;T&gt; &#123;<br>  <span class="hljs-title function_">add</span>(<span class="hljs-attr">a</span>: T, <span class="hljs-attr">b</span>: T): T;<br>&#125;<br><br><span class="hljs-comment">// é”™è¯¯ï¼šå¿…é¡»ä¸ºæ‰€æœ‰ç±»å‹å‚æ•°æä¾›å®ç°</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">NumberAdder</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Adder</span> &#123;<br>  <span class="hljs-title function_">add</span>(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span></span>) &#123; <span class="hljs-keyword">return</span> a + b; &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ­£ç¡®ï¼šæŒ‡å®šå…·ä½“ç±»å‹</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">NumberAdder</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Adder</span>&lt;<span class="hljs-built_in">number</span>&gt; &#123;<br>  <span class="hljs-title function_">add</span>(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span></span>) &#123; <span class="hljs-keyword">return</span> a + b; &#125;<br>&#125;<br><br><span class="hljs-comment">// æˆ–ä½¿ç”¨æ³›å‹ç±»</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">GenericAdder</span>&lt;T&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Adder</span>&lt;T&gt; &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> <span class="hljs-attr">zeroValue</span>: T</span>) &#123;&#125;<br>  <br>  <span class="hljs-title function_">add</span>(<span class="hljs-attr">a</span>: T, <span class="hljs-attr">b</span>: T): T &#123;<br>    <span class="hljs-comment">// å®é™…å®ç°éœ€ä¾èµ–å…·ä½“ç±»å‹</span><br>    <span class="hljs-keyword">return</span> a; <span class="hljs-comment">// ç®€åŒ–ç¤ºä¾‹</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="1-4-æ¨¡å—ç³»ç»Ÿ"><a href="#1-4-æ¨¡å—ç³»ç»Ÿ" class="headerlink" title="1.4 æ¨¡å—ç³»ç»Ÿ"></a>1.4 æ¨¡å—ç³»ç»Ÿ</h2><h3 id="1-4-1-ES-Module-ä¸-CommonJS-äº’æ“ä½œ"><a href="#1-4-1-ES-Module-ä¸-CommonJS-äº’æ“ä½œ" class="headerlink" title="1.4.1 ES Module ä¸ CommonJS äº’æ“ä½œ"></a>1.4.1 ES Module ä¸ CommonJS äº’æ“ä½œ</h3><p><strong>åŸºæœ¬äº’æ“ä½œæ¨¡å¼</strong></p>
<table>
<thead>
<tr>
<th align="left">å¯¼å…¥æ–¹å‘</th>
<th align="left">è¯­æ³•ç¤ºä¾‹</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ES â†’ CommonJS</td>
<td align="left"><code>import fs from &#39;fs&#39;;</code><br><code>import &#123; readFile &#125; from &#39;fs&#39;;</code></td>
<td align="left">é»˜è®¤å¯¼å…¥æˆ–å…·åå¯¼å…¥</td>
</tr>
<tr>
<td align="left">CommonJS â†’ ES</td>
<td align="left"><code>const esModule = require(&#39;./es-module&#39;);</code></td>
<td align="left">é€šè¿‡requireåŠ è½½</td>
</tr>
<tr>
<td align="left">CommonJS â†’ ES (è§£æ„)</td>
<td align="left"><code>const &#123; namedExport &#125; = require(&#39;./es-module&#39;);</code></td>
<td align="left">è§£æ„ESæ¨¡å—çš„å…·åå¯¼å‡º</td>
</tr>
</tbody></table>
<p><strong>ESM å¯¼å…¥ CommonJS æ¨¡å—</strong></p>
<ol>
<li>é»˜è®¤å¯¼å…¥ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å¯¼å…¥æ•´ä¸ªCommonJSæ¨¡å—</span><br><span class="hljs-keyword">import</span> express <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;express&#x27;</span>;<br><span class="hljs-keyword">const</span> app = <span class="hljs-title function_">express</span>();<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>å…·åå¯¼å…¥ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å¯¼å…¥ç‰¹å®šå±æ€§ï¼ˆéœ€æ¨¡å—æ”¯æŒï¼‰</span><br><span class="hljs-keyword">import</span> &#123; readFile &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;fs&#x27;</span>;<br><span class="hljs-title function_">readFile</span>(<span class="hljs-string">&#x27;file.txt&#x27;</span>, <span class="hljs-string">&#x27;utf8&#x27;</span>, <span class="hljs-function">() =&gt;</span> &#123;&#125;);<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>åŠ¨æ€å¯¼å…¥ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å¼‚æ­¥åŠ è½½CommonJSæ¨¡å—</span><br><span class="hljs-keyword">const</span> util = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;util&#x27;</span>);<br>util.<span class="hljs-title function_">promisify</span>(<span class="hljs-built_in">setTimeout</span>)(<span class="hljs-number">1000</span>);<br></code></pre></td></tr></table></figure>

<p>ç±»å‹å£°æ˜è¦æ±‚ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç±»å‹å£°æ˜æ–‡ä»¶éœ€æ”¯æŒä¸¤ç§å¯¼å‡ºæ ¼å¼</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;cjs-module&#x27;</span> &#123;<br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">_default</span>: <span class="hljs-built_in">any</span>;<br>  <span class="hljs-keyword">export</span> = _default;  <span class="hljs-comment">// CommonJSå¯¼å‡º</span><br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> _default; <span class="hljs-comment">// ESé»˜è®¤å¯¼å‡º</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>CommonJS å¯¼å…¥ ESM æ¨¡å—</strong></p>
<ol>
<li>é»˜è®¤å¯¼å…¥ï¼š</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// CommonJS ç¯å¢ƒ</span><br><span class="hljs-keyword">const</span> esModule = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./es-module&#x27;</span>).<span class="hljs-property">default</span>; <span class="hljs-comment">// å¿…é¡»è®¿é—®.default</span><br>esModule.<span class="hljs-title function_">someMethod</span>();<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>å…·åå¯¼å…¥ï¼š</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// è§£æ„å…·åå¯¼å‡º</span><br><span class="hljs-keyword">const</span> &#123; namedExport &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./es-module&#x27;</span>);<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>å¼‚æ­¥åŠ è½½ï¼š</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// åœ¨æ”¯æŒtop-level awaitçš„ç¯å¢ƒ</span><br><span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">default</span>: esModule &#125; = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./es-module&#x27;</span>);<br></code></pre></td></tr></table></figure>

<p><strong>äº’æ“ä½œä¸­çš„ç±»å‹å¤„ç†</strong></p>
<ol>
<li>CommonJS æ¨¡å—ç±»å‹å£°æ˜ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ ‡å‡†å£°æ˜</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;cjs-module&#x27;</span> &#123;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">someFunction</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span>;<br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">someValue</span>: <span class="hljs-built_in">number</span>;<br>  <br>  <span class="hljs-keyword">export</span> = &#123; <br>    someFunction,<br>    someValue<br>  &#125;;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">import</span> cjs <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;cjs-module&#x27;</span>;<br>cjs.<span class="hljs-title function_">someFunction</span>();<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>ES æ¨¡å—ç±»å‹å£°æ˜ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ESæ¨¡å—å£°æ˜</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;es-module&#x27;</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">namedExport</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span>;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">defaultExport</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-comment">// CommonJSä½¿ç”¨</span><br><span class="hljs-keyword">const</span> esm = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;es-module&#x27;</span>);<br>esm.<span class="hljs-title function_">default</span>(); <span class="hljs-comment">// è®¿é—®é»˜è®¤å¯¼å‡º</span><br>esm.<span class="hljs-title function_">namedExport</span>(); <span class="hljs-comment">// è®¿é—®å…·åå¯¼å‡º</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>å…¼å®¹ç±»å‹å£°æ˜ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åŒæ—¶æ”¯æŒä¸¤ç§å¯¼å…¥æ–¹å¼</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;dual-module&#x27;</span> &#123;<br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">defaultExport</span>: <span class="hljs-built_in">any</span>;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> defaultExport; <span class="hljs-comment">// ESé»˜è®¤å¯¼å‡º</span><br>  <span class="hljs-keyword">export</span> = defaultExport;       <span class="hljs-comment">// CommonJSå¯¼å‡º</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>äº’æ“ä½œé™·é˜±ä¸è§£å†³æ–¹æ¡ˆ</strong></p>
<p>é™·é˜±1ï¼šé»˜è®¤å¯¼å‡ºæ··æ·†</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// CommonJSæ¨¡å—</span><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;&#125;; <span class="hljs-comment">// å¯¼å‡ºå‡½æ•°</span><br><br><span class="hljs-comment">// ESæ¨¡å—å¯¼å…¥</span><br><span class="hljs-keyword">import</span> cjsFunc <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;cjs-module&#x27;</span>; <span class="hljs-comment">// âœ… æ­£ç¡®</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-keyword">default</span> <span class="hljs-keyword">as</span> cjsFunc &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;cjs-module&#x27;</span>; <span class="hljs-comment">// âœ… æ­£ç¡®</span><br><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> cjsModule <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;cjs-module&#x27;</span>; <br>cjsModule.<span class="hljs-title function_">default</span>(); <span class="hljs-comment">// âœ… æ­£ç¡®</span><br></code></pre></td></tr></table></figure>

<p>é™·é˜±2ï¼š__esModule æ ‡å¿—</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// Babel/TSç¼–è¯‘çš„ESMæ¨¡å—ä¼šæ·»åŠ </span><br><span class="hljs-title class_">Object</span>.<span class="hljs-title function_">defineProperty</span>(<span class="hljs-built_in">exports</span>, <span class="hljs-string">&quot;__esModule&quot;</span>, &#123; <span class="hljs-attr">value</span>: <span class="hljs-literal">true</span> &#125;);<br><br><span class="hljs-comment">// äº’æ“ä½œæ„ä¹‰ï¼šæ ‡è®°æ¨¡å—ä¸ºESMè½¬æ¢è€Œæ¥</span><br><span class="hljs-keyword">if</span> (<span class="hljs-variable language_">module</span>.<span class="hljs-property">__esModule</span>) &#123;<br>  <span class="hljs-comment">// æŒ‰ESMè§„èŒƒå¤„ç†</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>é™·é˜±3ï¼šåŠ¨æ€å¯¼å…¥å·®å¼‚</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ESæ¨¡å—</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> value = <span class="hljs-number">42</span>;<br><br><span class="hljs-comment">// CommonJSå¯¼å…¥</span><br><span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./es-module&#x27;</span>).<span class="hljs-property">value</span>; <span class="hljs-comment">// âŒ å¯èƒ½æœªå®šä¹‰</span><br><span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./es-module&#x27;</span>).<span class="hljs-property">default</span>.<span class="hljs-property">value</span>; <span class="hljs-comment">// âœ… æ­£ç¡®</span><br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹æœ€ä½³å®è·µ</strong></p>
<ol>
<li>ç»Ÿä¸€æ¨¡å—æ ¼å¼ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// tsconfig.json</span><br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;module&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ESNext&quot;</span><span class="hljs-punctuation">,</span>       <span class="hljs-comment">// è¾“å‡ºESM</span><br>    <span class="hljs-attr">&quot;moduleResolution&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Node&quot;</span> <span class="hljs-comment">// æ”¯æŒNodeè§£æè§„åˆ™</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>æ¡ä»¶å¯¼å‡ºï¼ˆpackage.jsonï¼‰ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;exports&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;import&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./dist/esm/index.js&quot;</span><span class="hljs-punctuation">,</span>   <span class="hljs-comment">// ESMå…¥å£</span><br>    <span class="hljs-attr">&quot;require&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./dist/cjs/index.js&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// CommonJSå…¥å£</span><br>    <span class="hljs-attr">&quot;default&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./dist/cjs/index.js&quot;</span>   <span class="hljs-comment">// å›é€€</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>åŒæ ¼å¼å‘å¸ƒï¼š</li>
</ol>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs text">my-package/<br>â”œâ”€â”€ dist/<br>â”‚   â”œâ”€â”€ esm/        // ESæ¨¡å—ç‰ˆæœ¬<br>â”‚   â”‚   â””â”€â”€ index.js<br>â”‚   â””â”€â”€ cjs/        // CommonJSç‰ˆæœ¬<br>â”‚       â””â”€â”€ index.js<br>â”œâ”€â”€ package.json<br></code></pre></td></tr></table></figure>

<ol start="4">
<li>äº’æ“ä½œå°è£…å±‚ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// cjs-compat.ts - CommonJSå°è£…å±‚</span><br><span class="hljs-keyword">import</span> esModule <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./es-module&#x27;</span>;<br><span class="hljs-keyword">export</span> = esModule; <span class="hljs-comment">// è½¬æ¢ä¸ºCommonJSå¯¼å‡º</span><br></code></pre></td></tr></table></figure>

<p><strong>TypeScript ç¼–è¯‘é€‰é¡¹</strong></p>
<table>
<thead>
<tr>
<th align="left">é€‰é¡¹</th>
<th align="left">å€¼</th>
<th align="left">äº’æ“ä½œå½±å“</th>
</tr>
</thead>
<tbody><tr>
<td align="left">esModuleInterop</td>
<td align="left">true (æ¨è)</td>
<td align="left">ç”Ÿæˆå…¼å®¹ä»£ç ï¼Œå…è®¸é»˜è®¤å¯¼å…¥CommonJSæ¨¡å—</td>
</tr>
<tr>
<td align="left">allowSyntheticDefaultImports</td>
<td align="left">true</td>
<td align="left">å…è®¸ç±»å‹ç³»ç»Ÿä¸­çš„é»˜è®¤å¯¼å…¥</td>
</tr>
<tr>
<td align="left">module</td>
<td align="left">CommonJS&#x2F;Node16</td>
<td align="left">æ§åˆ¶è¾“å‡ºæ¨¡å—æ ¼å¼</td>
</tr>
<tr>
<td align="left">moduleResolution</td>
<td align="left">Node16 (æ¨è)</td>
<td align="left">æ”¯æŒpackage.jsonçš„exportså’Œimportså­—æ®µ</td>
</tr>
</tbody></table>
<p>esModuleInterop å·¥ä½œåŸç†ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// å¼€å¯å‰</span><br><span class="hljs-keyword">var</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;fs&#x27;</span>);<br><span class="hljs-built_in">exports</span>.<span class="hljs-property">default</span> = fs;<br><br><span class="hljs-comment">// å¼€å¯å</span><br><span class="hljs-keyword">var</span> __importDefault = (<span class="hljs-variable language_">this</span> &amp;&amp; <span class="hljs-variable language_">this</span>.<span class="hljs-property">__importDefault</span>) || <span class="hljs-keyword">function</span> (<span class="hljs-params">mod</span>) &#123;<br>    <span class="hljs-keyword">return</span> (mod &amp;&amp; mod.<span class="hljs-property">__esModule</span>) ? mod : &#123; <span class="hljs-string">&quot;default&quot;</span>: mod &#125;;<br>&#125;;<br><span class="hljs-keyword">var</span> fs_1 = <span class="hljs-title function_">__importDefault</span>(<span class="hljs-built_in">require</span>(<span class="hljs-string">&quot;fs&quot;</span>));<br><span class="hljs-built_in">exports</span>.<span class="hljs-property">default</span> = fs_1.<span class="hljs-property">default</span>;<br></code></pre></td></tr></table></figure>

<p><strong>Node.js ç¯å¢ƒäº’æ“ä½œ</strong></p>
<ol>
<li>.mjs ä¸ .cjs æ‰©å±•åï¼š</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// ESæ¨¡å— (module.mjs)</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">hello</span>(<span class="hljs-params"></span>) &#123;&#125;<br><br><span class="hljs-comment">// CommonJSå¯¼å…¥ (script.cjs)</span><br><span class="hljs-keyword">const</span> &#123; hello &#125; = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./module.mjs&#x27;</span>); <span class="hljs-comment">// âŒ Nodeä¸å…è®¸</span><br><span class="hljs-keyword">const</span> esm = <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./module.mjs&#x27;</span>); <span class="hljs-comment">// âœ… å¿…é¡»ä½¿ç”¨åŠ¨æ€å¯¼å…¥</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>package.json type å­—æ®µï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;module&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ‰€æœ‰.jsæ–‡ä»¶è§†ä¸ºESæ¨¡å—</span><br>  <span class="hljs-attr">&quot;type&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;commonjs&quot;</span> <span class="hljs-comment">// é»˜è®¤å€¼</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>æ–‡ä»¶æ‰©å±•åè§„åˆ™ï¼š</li>
</ol>
<table>
<thead>
<tr>
<th align="left">æ–‡ä»¶æ‰©å±•å</th>
<th align="left">æ¨¡å—ç±»å‹</th>
<th align="left">å¯¼å…¥æ–¹å¼</th>
</tr>
</thead>
<tbody><tr>
<td align="left">.js</td>
<td align="left">ç”±typeå­—æ®µå†³å®š</td>
<td align="left">æ ¹æ®typeå­—æ®µå¤„ç†</td>
</tr>
<tr>
<td align="left">.mjs</td>
<td align="left">ESæ¨¡å—</td>
<td align="left">åªèƒ½importå¯¼å…¥</td>
</tr>
<tr>
<td align="left">.cjs</td>
<td align="left">CommonJS</td>
<td align="left">åªèƒ½requireå¯¼å…¥</td>
</tr>
</tbody></table>
<p><strong>æµè§ˆå™¨ç¯å¢ƒäº’æ“ä½œ</strong></p>
<ol>
<li>è„šæœ¬ç±»å‹å£°æ˜ï¼š</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs html">&lt;!-- åŠ è½½ESæ¨¡å— --&gt;<br>&lt;script type=&quot;module&quot; src=&quot;app.js&quot;&gt;&lt;/script&gt;<br><br>&lt;!-- åŠ è½½CommonJSæ¨¡å—ï¼ˆéœ€æ‰“åŒ…è½¬æ¢ï¼‰ --&gt;<br>&lt;script src=&quot;cjs-bundle.js&quot;&gt;&lt;/script&gt;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>åŠ¨æ€å¯¼å…¥å…¼å®¹ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æµè§ˆå™¨ä¸­çš„åŠ¨æ€å¯¼å…¥</span><br><span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> <span class="hljs-variable language_">module</span> === <span class="hljs-string">&#x27;object&#x27;</span>) &#123;<br>  <span class="hljs-comment">// Nodeç¯å¢ƒ</span><br>  <span class="hljs-keyword">const</span> mod = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;./cjs-module&#x27;</span>);<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>  <span class="hljs-comment">// æµè§ˆå™¨ç¯å¢ƒ</span><br>  <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./es-module.js&#x27;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">mod</span> =&gt;</span> &#123;&#125;);<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>äº’æ“ä½œç±»å‹å®‰å…¨ç­–ç•¥</strong></p>
<ol>
<li>æ¨¡å—æ‰©å……å£°æ˜ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ‰©å……CommonJSæ¨¡å—ç±»å‹</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;fs&#x27;</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">customMethod</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">import</span> fs <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;fs&#x27;</span>;<br>fs.<span class="hljs-title function_">customMethod</span>(); <span class="hljs-comment">// âœ… ç±»å‹å®‰å…¨</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>æ¡ä»¶ç±»å‹å¤„ç†ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åŒºåˆ†æ¨¡å—ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ModuleType</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> &#123; <span class="hljs-attr">__esModule</span>: <span class="hljs-literal">true</span> &#125; ? <br>  &#123; <span class="hljs-attr">default</span>: infer U &#125; : T;<br><br><span class="hljs-keyword">function</span> importCompat&lt;T&gt;(<span class="hljs-attr">module</span>: T): <span class="hljs-title class_">ModuleType</span>&lt;T&gt; &#123;<br>  <span class="hljs-comment">// å®ç°äº’æ“ä½œè½¬æ¢</span><br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>è¿è¡Œæ—¶ç±»å‹å®ˆå«ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ£€æµ‹ESæ¨¡å—</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">isESModule</span>(<span class="hljs-params"><span class="hljs-attr">module</span>: <span class="hljs-built_in">any</span></span>): <span class="hljs-variable language_">module</span> is &#123; <span class="hljs-attr">default</span>: <span class="hljs-built_in">any</span> &#125; &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">module</span>.<span class="hljs-property">__esModule</span> || <br>    (<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Symbol</span> !== <span class="hljs-string">&#x27;undefined&#x27;</span> &amp;&amp; <br>     <span class="hljs-title class_">Symbol</span>.<span class="hljs-property">toStringTag</span> <span class="hljs-keyword">in</span> <span class="hljs-variable language_">module</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="1-4-2-å‘½åç©ºé—´ä¸ç°ä»£æ¨¡å—å¯¹æ¯”"><a href="#1-4-2-å‘½åç©ºé—´ä¸ç°ä»£æ¨¡å—å¯¹æ¯”" class="headerlink" title="1.4.2 å‘½åç©ºé—´ä¸ç°ä»£æ¨¡å—å¯¹æ¯”"></a>1.4.2 å‘½åç©ºé—´ä¸ç°ä»£æ¨¡å—å¯¹æ¯”</h3><p><strong>å‘½åç©ºé—´ï¼ˆNamespacesï¼‰</strong></p>
<p>æ ¸å¿ƒæ¦‚å¿µï¼šTypeScript æ—©æœŸæä¾›çš„é€»è¾‘åˆ†ç»„æœºåˆ¶ï¼Œç”¨äºç»„ç»‡å…¨å±€ä½œç”¨åŸŸä»£ç </p>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å®šä¹‰å‘½åç©ºé—´</span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">MyUtils</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params"><span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span></span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message);<br>  &#125;<br>  <br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Math</span> &#123;<br>    <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PI</span> = <span class="hljs-number">3.14</span>;<br>    <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">circleArea</span>(<span class="hljs-params"><span class="hljs-attr">r</span>: <span class="hljs-built_in">number</span></span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">PI</span> * r * r;<br>    &#125;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-title class_">MyUtils</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Hello&quot;</span>);<br><span class="hljs-keyword">const</span> area = <span class="hljs-title class_">MyUtils</span>.<span class="hljs-property">Math</span>.<span class="hljs-title function_">circleArea</span>(<span class="hljs-number">5</span>);<br></code></pre></td></tr></table></figure>

<p>ç¼–è¯‘ç»“æœï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// è½¬æ¢ä¸ºé—­åŒ…å½¢å¼</span><br><span class="hljs-keyword">var</span> <span class="hljs-title class_">MyUtils</span>;<br>(<span class="hljs-keyword">function</span> (<span class="hljs-params">MyUtils</span>) &#123;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">message</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message);<br>  &#125;<br>  <span class="hljs-title class_">MyUtils</span>.<span class="hljs-property">log</span> = log;<br>  <br>  <span class="hljs-keyword">let</span> <span class="hljs-title class_">Math</span>;<br>  (<span class="hljs-keyword">function</span> (<span class="hljs-params"><span class="hljs-built_in">Math</span></span>) &#123;<br>    <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> = <span class="hljs-number">3.14</span>;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">circleArea</span>(<span class="hljs-params">r</span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-title class_">Math</span>.<span class="hljs-property">PI</span> * r * r;<br>    &#125;<br>    <span class="hljs-title class_">Math</span>.<span class="hljs-property">circleArea</span> = circleArea;<br>  &#125;)(<span class="hljs-title class_">Math</span> = <span class="hljs-title class_">MyUtils</span>.<span class="hljs-property">Math</span> || (<span class="hljs-title class_">MyUtils</span>.<span class="hljs-property">Math</span> = &#123;&#125;));<br>&#125;)(<span class="hljs-title class_">MyUtils</span> || (<span class="hljs-title class_">MyUtils</span> = &#123;&#125;));<br></code></pre></td></tr></table></figure>

<p><strong>ç°ä»£æ¨¡å—ï¼ˆES Modulesï¼‰</strong></p>
<p>æ ¸å¿ƒæ¦‚å¿µï¼šES6 æ ‡å‡†å¼•å…¥çš„æ–‡ä»¶çº§ä½œç”¨åŸŸéš”ç¦»æœºåˆ¶</p>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// math.ts</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">PI</span> = <span class="hljs-number">3.14</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">circleArea</span>(<span class="hljs-params"><span class="hljs-attr">r</span>: <span class="hljs-built_in">number</span></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-variable constant_">PI</span> * r * r;<br>&#125;<br><br><span class="hljs-comment">// logger.ts</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params"><span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span></span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message);<br>&#125;<br><br><span class="hljs-comment">// app.ts</span><br><span class="hljs-keyword">import</span> &#123; log &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./logger&#x27;</span>;<br><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">MathUtils</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./math&#x27;</span>;<br><br><span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Calculating area&quot;</span>);<br><span class="hljs-keyword">const</span> area = <span class="hljs-title class_">MathUtils</span>.<span class="hljs-title function_">circleArea</span>(<span class="hljs-number">5</span>);<br></code></pre></td></tr></table></figure>

<p><strong>æ ¸å¿ƒå·®å¼‚å¯¹æ¯”</strong></p>
<table>
<thead>
<tr>
<th align="left">ç‰¹æ€§</th>
<th align="left">å‘½åç©ºé—´</th>
<th align="left">ç°ä»£æ¨¡å—</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ä½œç”¨åŸŸ</td>
<td align="left">å…¨å±€&#x2F;æ–‡ä»¶å†…</td>
<td align="left">æ–‡ä»¶çº§ä½œç”¨åŸŸ</td>
</tr>
<tr>
<td align="left">ä¾èµ–ç®¡ç†</td>
<td align="left">æ‰‹åŠ¨æ’åº<code>&lt;script&gt;</code>æ ‡ç­¾</td>
<td align="left">è‡ªåŠ¨ä¾èµ–è§£æï¼ˆimport&#x2F;exportï¼‰</td>
</tr>
<tr>
<td align="left">ä»£ç ç»„ç»‡</td>
<td align="left">é€»è¾‘åˆ†ç»„</td>
<td align="left">ç‰©ç†æ–‡ä»¶åˆ†ç»„</td>
</tr>
<tr>
<td align="left">ä»£ç åˆ†å‰²</td>
<td align="left">ä¸æ”¯æŒ</td>
<td align="left">åŸç”Ÿæ”¯æŒï¼ˆåŠ¨æ€å¯¼å…¥ï¼‰</td>
</tr>
<tr>
<td align="left">æ‘‡æ ‘ä¼˜åŒ–</td>
<td align="left">ä¸æ”¯æŒ</td>
<td align="left">åŸç”Ÿæ”¯æŒï¼ˆTree Shakingï¼‰</td>
</tr>
<tr>
<td align="left">è¿è¡Œæ—¶æ€§èƒ½</td>
<td align="left">æ‰€æœ‰ä»£ç ç«‹å³åŠ è½½</td>
<td align="left">æŒ‰éœ€åŠ è½½</td>
</tr>
<tr>
<td align="left">ç±»å‹å£°æ˜</td>
<td align="left">é€šè¿‡&#x2F;&#x2F;&#x2F; <code>&lt;reference&gt;</code>æŒ‡ä»¤</td>
<td align="left">è‡ªåŠ¨è§£æ.d.tsæ–‡ä»¶</td>
</tr>
<tr>
<td align="left">å…¨å±€æ±¡æŸ“</td>
<td align="left">å¯èƒ½æ±¡æŸ“å…¨å±€å‘½åç©ºé—´</td>
<td align="left">æ— å…¨å±€æ±¡æŸ“</td>
</tr>
</tbody></table>
<p><strong>ä½¿ç”¨åœºæ™¯æŒ‡å—</strong></p>
<p>å‘½åç©ºé—´é€‚ç”¨åœºæ™¯ï¼š</p>
<ol>
<li>æµè§ˆå™¨ç¯å¢ƒä¸‹çš„æ—§é¡¹ç›®ç»´æŠ¤</li>
<li>éœ€è¦å…¨å±€å¯è®¿é—®çš„åº“ç±»å‹å£°æ˜ï¼ˆå¦‚window.myLibï¼‰</li>
<li>å°†å¤§å‹åº“æ‹†åˆ†ä¸ºå¤šä¸ªæ–‡ä»¶ä½†ä»éœ€å…±äº«ä½œç”¨åŸŸ</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å¤šæ–‡ä»¶å‘½åç©ºé—´</span><br><span class="hljs-comment">// Validation.ts</span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Validation</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Validator</span> &#123;<br>    <span class="hljs-title function_">isValid</span>(<span class="hljs-attr">s</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">boolean</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// LettersOnlyValidator.ts</span><br><span class="hljs-comment">/// &lt;reference path=&quot;Validation.ts&quot; /&gt;</span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Validation</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LettersOnlyValidator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Validator</span> &#123;<br>    <span class="hljs-title function_">isValid</span>(<span class="hljs-params"><span class="hljs-attr">s</span>: <span class="hljs-built_in">string</span></span>) &#123; <span class="hljs-comment">/*...*/</span> &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ç°ä»£æ¨¡å—é€‚ç”¨åœºæ™¯ï¼š</p>
<ol>
<li>æ–°é¡¹ç›®å¼€å‘</li>
<li>éœ€è¦ä»£ç åˆ†å‰²çš„åº”ç”¨</li>
<li>ç»„ä»¶åŒ–æ¶æ„ï¼ˆReact&#x2F;Vueï¼‰</li>
<li>Node.js æœåŠ¡ç«¯åº”ç”¨</li>
<li>éœ€è¦ Tree Shaking ä¼˜åŒ–çš„åº“</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç°ä»£æ¨¡å—åŒ–ç»„ä»¶</span><br><span class="hljs-comment">// Button.tsx</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params">&#123; text &#125;: &#123; text: <span class="hljs-built_in">string</span> &#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">button</span>&gt;</span>&#123;text&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span></span>;<br>&#125;<br><br><span class="hljs-comment">// App.tsx</span><br><span class="hljs-keyword">import</span> <span class="hljs-title class_">Button</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./Button&#x27;</span>;<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">Button</span> <span class="hljs-attr">text</span>=<span class="hljs-string">&quot;Click&quot;</span> /&gt;</span></span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>æ··åˆä½¿ç”¨æ¨¡å¼</strong></p>
<p>åœºæ™¯ï¼šæ¨¡å—æ‰©å±•å‘½åç©ºé—´</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// shapes.ts - å‘½åç©ºé—´å®šä¹‰</span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Shapes</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> &#123; <span class="hljs-comment">/*...*/</span> &#125;<br>&#125;<br><br><span class="hljs-comment">// extensions.ts - æ¨¡å—æ‰©å±•å‘½åç©ºé—´</span><br><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;./shapes&#x27;</span>; <span class="hljs-comment">// ç¡®ä¿å‘½åç©ºé—´å­˜åœ¨</span><br><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">global</span> &#123;<br>  <span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Shapes</span> &#123;<br>    <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Triangle</span> &#123; <span class="hljs-comment">/*...*/</span> &#125; <span class="hljs-comment">// æ‰©å±•å‘½åç©ºé—´</span><br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> triangle = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Shapes</span>.<span class="hljs-title class_">Triangle</span>();<br></code></pre></td></tr></table></figure>

<p>åœºæ™¯ï¼šå‘½åç©ºé—´å°è£…æ¨¡å—ç±»å‹</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä¸ºç¬¬ä¸‰æ–¹æ¨¡å—å£°æ˜å…¨å±€ç±»å‹</span><br><span class="hljs-keyword">import</span> * <span class="hljs-keyword">as</span> <span class="hljs-title class_">React</span> <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">global</span> &#123;<br>  <span class="hljs-keyword">namespace</span> <span class="hljs-title class_">JSX</span> &#123;<br>    <span class="hljs-keyword">interface</span> <span class="hljs-title class_">IntrinsicElements</span> &#123;<br>      <span class="hljs-attr">customElement</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">DetailedHTMLProps</span>&lt;<br>        <span class="hljs-title class_">React</span>.<span class="hljs-property">HTMLAttributes</span>&lt;<span class="hljs-title class_">HTMLElement</span>&gt;,<br>        <span class="hljs-title class_">HTMLElement</span><br>      &gt;;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹è¿ç§»ç­–ç•¥</strong></p>
<p>æ­¥éª¤1ï¼šå‘½åç©ºé—´è½¬æ¨¡å—</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åŸå‘½åç©ºé—´ä»£ç </span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Utilities</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-comment">/*...*/</span> &#125;<br>&#125;<br><br><span class="hljs-comment">// è½¬æ¢ä¸ºæ¨¡å—</span><br><span class="hljs-comment">// utilities.ts</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-comment">/*...*/</span> &#125;<br></code></pre></td></tr></table></figure>

<p>æ­¥éª¤2ï¼šå¤„ç†å…¨å±€ä¾èµ–</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åŸå…¨å±€ä¾èµ–</span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">App</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> config = &#123; <span class="hljs-attr">debug</span>: <span class="hljs-literal">true</span> &#125;;<br>&#125;<br><br><span class="hljs-comment">// è½¬æ¢ä¸ºå•ä¾‹æ¨¡å—</span><br><span class="hljs-comment">// config.ts</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> config = &#123; <span class="hljs-attr">debug</span>: <span class="hljs-literal">true</span> &#125;;<br><br><span class="hljs-comment">// ä½¿ç”¨å¤„æ”¹ä¸ºå¯¼å…¥</span><br><span class="hljs-keyword">import</span> &#123; config &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./config&#x27;</span>;<br></code></pre></td></tr></table></figure>

<p>æ­¥éª¤3ï¼šå¤„ç†å¤šæ–‡ä»¶å‘½åç©ºé—´</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åŸå¤šæ–‡ä»¶å‘½åç©ºé—´</span><br><span class="hljs-comment">/// &lt;reference path=&quot;validation.ts&quot; /&gt;</span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Validation</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmailValidator</span> &#123; <span class="hljs-comment">/*...*/</span> &#125;<br>&#125;<br><br><span class="hljs-comment">// è½¬æ¢ä¸ºæ¨¡å—</span><br><span class="hljs-comment">// EmailValidator.ts</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">Validator</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./validation&#x27;</span>; <span class="hljs-comment">// è½¬æ¢ä¸ºæ¨¡å—</span><br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">EmailValidator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Validator</span> &#123; <span class="hljs-comment">/*...*/</span> &#125;<br></code></pre></td></tr></table></figure>

<p><strong>æœ€ä½³å®è·µæŒ‡å—</strong></p>
<ol>
<li>æ–°é¡¹ç›®å¼ºåˆ¶ä½¿ç”¨æ¨¡å—ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// tsconfig.json</span><br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;module&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ESNext&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;moduleResolution&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;NodeNext&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>æ—§é¡¹ç›®æ¸è¿›è¿ç§»ï¼š<ul>
<li>æ–°æ–‡ä»¶ä½¿ç”¨æ¨¡å—è¯­æ³•</li>
<li>æ—§æ–‡ä»¶ä¿æŒå‘½åç©ºé—´</li>
<li>ä½¿ç”¨export as namespaceæä¾›å…¨å±€è®¿é—®</li>
</ul>
</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// legacy.d.ts</span><br><span class="hljs-keyword">export</span> = <span class="hljs-title class_">MyLib</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">as</span> <span class="hljs-keyword">namespace</span> <span class="hljs-title class_">myLib</span>;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>é¿å…å…¨å±€æ‰©å±•æ±¡æŸ“ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä¸æ¨èï¼šæ±¡æŸ“å…¨å±€å‘½åç©ºé—´</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">global</span> &#123;<br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Window</span> &#123;<br>    <span class="hljs-attr">myGlobalVar</span>: <span class="hljs-built_in">any</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// æ¨èï¼šæ¨¡å—å°è£…</span><br><span class="hljs-comment">// my-module.ts</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">init</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-variable language_">window</span>.<span class="hljs-property">myGlobalVar</span> = &#123; <span class="hljs-comment">/*...*/</span> &#125;;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="4">
<li>ç±»å‹å£°æ˜ç­–ç•¥ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç°ä»£æ¨¡å—ç±»å‹å£°æ˜</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;modern-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">calculate</span>(<span class="hljs-params"></span>): <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-comment">// å‘½åç©ºé—´ç±»å‹å£°æ˜</span><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">namespace</span> <span class="hljs-title class_">LegacyLib</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">version</span>: <span class="hljs-built_in">string</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</strong></p>
<p>é—®é¢˜ï¼šå…¨å±€ç±»å‹å†²çª</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// file1.ts</span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">MyApp</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> version = <span class="hljs-string">&quot;1.0&quot;</span>;<br>&#125;<br><br><span class="hljs-comment">// file2.ts</span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">MyApp</span> &#123; <span class="hljs-comment">// âŒ å¯èƒ½ä¸å…¶ä»–æ–‡ä»¶åˆå¹¶</span><br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params"></span>) &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// è½¬æ¢ä¸ºæ¨¡å—åŒ–</span><br><span class="hljs-comment">// version.ts</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> version = <span class="hljs-string">&quot;1.0&quot;</span>;<br><br><span class="hljs-comment">// logger.ts</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params"></span>) &#123;&#125;<br></code></pre></td></tr></table></figure>

<p>é—®é¢˜ï¼šç¬¬ä¸‰æ–¹åº“å…¨å±€æ‰©å±•</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ‰©å±•jQuery</span><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">namespace</span> <span class="hljs-title class_">JQuery</span> &#123;<br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Static</span> &#123;<br>    <span class="hljs-title function_">newPlugin</span>(): <span class="hljs-built_in">void</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ç°ä»£æ–¹æ¡ˆï¼šæ¨¡å—å¢å¼º</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;jquery&#x27;</span> &#123;<br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">JQueryStatic</span> &#123;<br>    <span class="hljs-title function_">newPlugin</span>(): <span class="hljs-built_in">void</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>é—®é¢˜ï¼šå¾ªç¯ä¾èµ–</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å‘½åç©ºé—´ä¸­çš„å¾ªç¯å¼•ç”¨</span><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">A</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> b = B.<span class="hljs-property">value</span>; <span class="hljs-comment">// âŒ Bå°šæœªå®šä¹‰</span><br>&#125;<br><br><span class="hljs-keyword">namespace</span> <span class="hljs-title class_">B</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> value = <span class="hljs-number">10</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>æ¨¡å—åŒ–è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// a.ts</span><br><span class="hljs-keyword">import</span> &#123; value &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./b&#x27;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> b = value;<br><br><span class="hljs-comment">// b.ts</span><br><span class="hljs-keyword">import</span> &#123; b &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./a&#x27;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> value = b + <span class="hljs-number">10</span>; <span class="hljs-comment">// âŒ å¾ªç¯ä¾èµ–</span><br><br><span class="hljs-comment">// é‡æ„ï¼šæå–å…¬å…±é€»è¾‘</span><br><span class="hljs-comment">// constants.ts</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-variable constant_">BASE_VALUE</span> = <span class="hljs-number">5</span>;<br><br><span class="hljs-comment">// a.ts</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-variable constant_">BASE_VALUE</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./constants&#x27;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> a = <span class="hljs-variable constant_">BASE_VALUE</span> * <span class="hljs-number">2</span>;<br><br><span class="hljs-comment">// b.ts</span><br><span class="hljs-keyword">import</span> &#123; <span class="hljs-variable constant_">BASE_VALUE</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;./constants&#x27;</span>;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> b = <span class="hljs-variable constant_">BASE_VALUE</span> * <span class="hljs-number">3</span>;<br></code></pre></td></tr></table></figure>

<h3 id="1-4-3-æ¨¡å—è§£æç­–ç•¥ä¸è·¯å¾„æ˜ å°„"><a href="#1-4-3-æ¨¡å—è§£æç­–ç•¥ä¸è·¯å¾„æ˜ å°„" class="headerlink" title="1.4.3 æ¨¡å—è§£æç­–ç•¥ä¸è·¯å¾„æ˜ å°„"></a>1.4.3 æ¨¡å—è§£æç­–ç•¥ä¸è·¯å¾„æ˜ å°„</h3><p><strong>æ¨¡å—è§£æç­–ç•¥</strong></p>
<p>TypeScript æ”¯æŒä¸¤ç§æ¨¡å—è§£æç­–ç•¥ï¼š</p>
<table>
<thead>
<tr>
<th align="left">ç­–ç•¥</th>
<th align="left">è§¦å‘æ¡ä»¶</th>
<th align="left">è§£æé€»è¾‘</th>
<th align="left">é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Classic</td>
<td align="left">â€œmoduleResolutionâ€: â€œClassicâ€</td>
<td align="left">1. ç›¸å¯¹è·¯å¾„ï¼š.&#x2F;module â†’ .&#x2F;module.ts<br>2. éç›¸å¯¹è·¯å¾„ï¼šmodule â†’ .&#x2F;module.ts â†’ ..&#x2F;module.ts</td>
<td align="left">TS 1.6 å‰æ—§é¡¹ç›®</td>
</tr>
<tr>
<td align="left">Node</td>
<td align="left">â€œmoduleResolutionâ€: â€œNodeâ€<br>(é»˜è®¤å€¼)</td>
<td align="left">éµå¾ª Node.js è§£æè§„åˆ™ï¼š<br>1. æ£€æŸ¥æ–‡ä»¶<br>2. æ£€æŸ¥ç›®å½•<br>3. æ£€æŸ¥ package.json<br>4. æ£€æŸ¥ @types	ç°ä»£</td>
<td align="left">Node.js&#x2F;Web é¡¹ç›®</td>
</tr>
</tbody></table>
<p>Node ç­–ç•¥è§£ææµç¨‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; helper &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;my-utils&#x27;</span>;<br><span class="hljs-comment">// è§£ææ­¥éª¤ï¼š</span><br><span class="hljs-comment">// 1. æ£€æŸ¥æ–‡ä»¶: node_modules/my-utils.ts</span><br><span class="hljs-comment">// 2. æ£€æŸ¥æ–‡ä»¶: node_modules/my-utils.tsx</span><br><span class="hljs-comment">// 3. æ£€æŸ¥æ–‡ä»¶: node_modules/my-utils.d.ts</span><br><span class="hljs-comment">// 4. æ£€æŸ¥ç›®å½•: node_modules/my-utils/package.json (main/types å­—æ®µ)</span><br><span class="hljs-comment">// 5. æ£€æŸ¥ç›®å½•: node_modules/my-utils/index.ts</span><br><span class="hljs-comment">// 6. æ£€æŸ¥ä¸Šçº§ node_modules: ../node_modules/my-utils</span><br></code></pre></td></tr></table></figure>

<p><strong>è·¯å¾„æ˜ å°„ï¼ˆPath Mappingï¼‰</strong></p>
<p>æ ¸å¿ƒç›®çš„ï¼šç®€åŒ–æ¨¡å—å¯¼å…¥è·¯å¾„ï¼Œé¿å…ç›¸å¯¹è·¯å¾„åµŒå¥—</p>
<p>é…ç½®æ–¹å¼ (tsconfig.json)ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;baseUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./src&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;paths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;@components/*&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;components/*&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;@utils&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;utils/index&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;shared/*&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;../shared/*&quot;</span><span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<p>æ˜ å°„è§„åˆ™è§£æï¼š</p>
<table>
<thead>
<tr>
<th align="left">æ˜ å°„é…ç½®</th>
<th align="left">å¯¼å…¥è¯­å¥</th>
<th align="left">è§£æè·¯å¾„</th>
</tr>
</thead>
<tbody><tr>
<td align="left"><code>&quot;@components/*&quot;</code><br><code>[&quot;components/*&quot;]</code></td>
<td align="left"><code>import Button from &#39;@components/Button&#39;</code></td>
<td align="left"><code>./src/components/Button.ts</code></td>
</tr>
<tr>
<td align="left"><code>&quot;@utils&quot;</code><br><code>[&quot;utils/index&quot;]</code></td>
<td align="left"><code>import &#123; log &#125; from &#39;@utils&#39;</code></td>
<td align="left"><code>./src/utils/index.ts</code></td>
</tr>
<tr>
<td align="left"><code>&quot;shared/*&quot;</code><br><code>[&quot;../shared/*&quot;]</code></td>
<td align="left"><code>import config from &#39;shared/config&#39;</code></td>
<td align="left"><code>../shared/config.ts</code></td>
</tr>
</tbody></table>
<p><strong>è·¯å¾„æ˜ å°„ç±»å‹å£°æ˜</strong></p>
<p>åœºæ™¯ï¼šä¸ºè·¯å¾„æ˜ å°„æä¾›ç±»å‹æ”¯æŒ</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// src/global.d.ts</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;@components/*&#x27;</span> &#123;<br>  <span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">ComponentType</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">component</span>: <span class="hljs-title class_">ComponentType</span>;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> component;<br>&#125;<br><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;@utils&#x27;</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params"><span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">void</span>;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">version</span>: <span class="hljs-built_in">string</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹æœ€ä½³å®è·µ</strong></p>
<ol>
<li>åŸºç¡€è·¯å¾„é…ç½®ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;baseUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;src&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// æ‰€æœ‰éç»å¯¹è·¯å¾„ç›¸å¯¹srcè§£æ</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><br><span class="hljs-comment">// ä½¿ç”¨</span><br>import utils from &#x27;utils&#x27;; <span class="hljs-comment">// è§£æä¸º src/utils.ts</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>å¤šè·¯å¾„æ˜ å°„æ¨¡å¼ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;paths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-comment">// å¤šè·¯å¾„å›é€€</span><br>    <span class="hljs-attr">&quot;@services/*&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-string">&quot;services/v2/*&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ä¼˜å…ˆå°è¯•v2</span><br>      <span class="hljs-string">&quot;services/v1/*&quot;</span>  <span class="hljs-comment">// å›é€€åˆ°v1</span><br>    <span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>é€šé…ç¬¦æ‰©å±•ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;paths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;@assets/*&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;assets/*&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-string">&quot;assets/images/*&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-comment">// å¤šç›®å½•æ˜ å°„</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<ol start="4">
<li>ç»å¯¹è·¯å¾„æ˜ å°„ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;baseUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;paths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;src/*&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;src/*&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-comment">// å…è®¸ import from &#x27;src/components&#x27;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<p><strong>è·¯å¾„æ˜ å°„ä¸æ‰“åŒ…å™¨é›†æˆ</strong></p>
<p>Webpack é…ç½®ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// webpack.config.js</span><br><span class="hljs-keyword">const</span> path = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;path&#x27;</span>);<br><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">resolve</span>: &#123;<br>    <span class="hljs-attr">alias</span>: &#123;<br>      <span class="hljs-string">&#x27;@components&#x27;</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&#x27;src/components&#x27;</span>),<br>      <span class="hljs-string">&#x27;@utils&#x27;</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&#x27;src/utils&#x27;</span>)<br>    &#125;<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>Vite é…ç½®ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// vite.config.ts</span><br><span class="hljs-keyword">import</span> &#123; defineConfig &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite&#x27;</span>;<br><span class="hljs-keyword">import</span> path <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;path&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(&#123;<br>  <span class="hljs-attr">resolve</span>: &#123;<br>    <span class="hljs-attr">alias</span>: &#123;<br>      <span class="hljs-string">&#x27;@&#x27;</span>: path.<span class="hljs-title function_">resolve</span>(__dirname, <span class="hljs-string">&#x27;./src&#x27;</span>),<br>    &#125;<br>  &#125;<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><strong>å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</strong></p>
<p>é—®é¢˜1ï¼šè·¯å¾„æ˜ å°„åœ¨è¿è¡Œæ—¶å¤±æ•ˆ</p>
<p>åŸå› ï¼šTypeScript åªå¤„ç†ç¼–è¯‘æ—¶è·¯å¾„ï¼Œè¿è¡Œæ—¶éœ€æ‰“åŒ…å™¨æ”¯æŒ</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å®‰è£…è·¯å¾„è½¬æ¢å·¥å…·</span><br>npm install tsconfig-paths --save-dev<br><br><span class="hljs-comment"># è¿è¡Œæ—¶åŠ è½½</span><br>node -r tsconfig-paths/register app.ts<br></code></pre></td></tr></table></figure>

<p>é—®é¢˜2ï¼šå¾ªç¯ä¾èµ–è­¦å‘Š</p>
<p>åœºæ™¯ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">src/<br>  components/<br>    Button.ts  // import &#123; theme &#125; from &#x27;@utils&#x27;<br>  utils/<br>    index.ts   // import &#123; Button &#125; from &#x27;@components&#x27;<br></code></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<ol>
<li>é‡æ„æå–å…¬å…±æ¨¡å—</li>
<li>ä½¿ç”¨ä¾èµ–æ³¨å…¥</li>
<li>åŠ¨æ€å¯¼å…¥æ‰“ç ´å¾ªç¯</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// utils/index.ts</span><br><span class="hljs-keyword">let</span> <span class="hljs-title class_">Button</span>: <span class="hljs-built_in">any</span>;<br><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadButton</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">if</span> (!<span class="hljs-title class_">Button</span>) &#123;<br>    <span class="hljs-title class_">Button</span> = (<span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;@components/Button&#x27;</span>)).<span class="hljs-property">default</span>;<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title class_">Button</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>é—®é¢˜3ï¼šå£°æ˜æ–‡ä»¶ç¼ºå¤±</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä¸ºè·¯å¾„æ˜ å°„åˆ›å»ºå£°æ˜æ–‡ä»¶</span><br><span class="hljs-comment">// src/path-mappings.d.ts</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;@components/*&#x27;</span> &#123;<br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">component</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ComponentType</span>;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> component;<br>&#125;<br><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;@utils&#x27;</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">formatDate</span>(<span class="hljs-params"><span class="hljs-attr">date</span>: <span class="hljs-title class_">Date</span></span>): <span class="hljs-built_in">string</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>é«˜çº§è·¯å¾„æ˜ å°„æŠ€æœ¯</strong></p>
<ol>
<li>æ¡ä»¶è·¯å¾„æ˜ å°„ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;paths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;config&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-string">&quot;config/production&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒ</span><br>      <span class="hljs-string">&quot;config/development&quot;</span> <span class="hljs-comment">// å¼€å‘ç¯å¢ƒ</span><br>    <span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>å¤šé¡¹ç›®å…±äº«æ˜ å°„ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// åŸºåº§é¡¹ç›® tsconfig.base.json</span><br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;paths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;@shared/*&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;../shared/*&quot;</span><span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br><br><span class="hljs-comment">// å­é¡¹ç›® tsconfig.json</span><br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;extends&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;../tsconfig.base.json&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;baseUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;src&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>è·¯å¾„æ˜ å°„é‡å®šå‘ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;paths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;old-module&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;new-module&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-comment">// é‡å®šå‘æ—§è·¯å¾„</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<p><strong>è·¯å¾„æ˜ å°„è§„èŒƒæŒ‡å—</strong></p>
<ol>
<li>ç»Ÿä¸€å‰ç¼€çº¦å®šï¼š</li>
</ol>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">@app/      // åº”ç”¨æ ¸å¿ƒä»£ç <br>@lib/      // å…¬å…±åº“<br>@assets/   // é™æ€èµ„æº<br>@test/     // æµ‹è¯•å·¥å…·<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>ç¦æ­¢æ·±å±‚ç›¸å¯¹è·¯å¾„ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç¦ç”¨</span><br><span class="hljs-keyword">import</span> util <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;../../../../utils&#x27;</span>;<br><br><span class="hljs-comment">// å¯ç”¨</span><br><span class="hljs-keyword">import</span> util <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@core/utils&#x27;</span>;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>æ˜ å°„è·¯å¾„é•¿åº¦é™åˆ¶ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨çŸ­è·¯å¾„</span><br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;paths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;@c&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;components&quot;</span><span class="hljs-punctuation">]</span> <span class="hljs-comment">// ä¸æ¨èï¼šè¿‡äºç®€çŸ­</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<ol start="4">
<li>æ–‡æ¡£åŒ–æ˜ å°„è§„åˆ™ï¼š</li>
</ol>
<p>è·¯å¾„æ˜ å°„è§„èŒƒï¼š</p>
<table>
<thead>
<tr>
<th align="left">æ˜ å°„è·¯å¾„</th>
<th align="left">å®é™…è·¯å¾„</th>
<th align="left">è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td align="left">@components&#x2F;*</td>
<td align="left">src&#x2F;components&#x2F;*</td>
<td align="left">å…¨å±€ç»„ä»¶</td>
</tr>
<tr>
<td align="left">@utils</td>
<td align="left">src&#x2F;utils&#x2F;index.ts</td>
<td align="left">å·¥å…·å‡½æ•°å…¥å£</td>
</tr>
</tbody></table>
<h3 id="1-4-4-åŠ¨æ€å¯¼å…¥ä¸ä»£ç åˆ†å‰²ç±»å‹å®‰å…¨"><a href="#1-4-4-åŠ¨æ€å¯¼å…¥ä¸ä»£ç åˆ†å‰²ç±»å‹å®‰å…¨" class="headerlink" title="1.4.4 åŠ¨æ€å¯¼å…¥ä¸ä»£ç åˆ†å‰²ç±»å‹å®‰å…¨"></a>1.4.4 åŠ¨æ€å¯¼å…¥ä¸ä»£ç åˆ†å‰²ç±»å‹å®‰å…¨</h3><p><strong>åŠ¨æ€å¯¼å…¥åŸºç¡€è¯­æ³•</strong></p>
<p>æ ¸å¿ƒè¯­æ³•ï¼šimport() å‡½æ•°è¿”å› Promiseï¼Œåœ¨æ¨¡å—åŠ è½½å®Œæˆåè§£æä¸ºæ¨¡å—å¯¹è±¡</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åŸºæœ¬ç”¨æ³•</span><br><span class="hljs-keyword">const</span> modulePromise = <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./module&#x27;</span>);<br><br><span class="hljs-comment">// å¸¦è·¯å¾„å˜é‡</span><br><span class="hljs-keyword">const</span> moduleName = <span class="hljs-string">&#x27;utils&#x27;</span>;<br><span class="hljs-keyword">const</span> utilsModule = <span class="hljs-keyword">import</span>(<span class="hljs-string">`./<span class="hljs-subst">$&#123;moduleName&#125;</span>`</span>);<br></code></pre></td></tr></table></figure>

<p>ç±»å‹å®‰å…¨å¤„ç†ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MathModule</span> &#123;<br>  <span class="hljs-attr">add</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">PI</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-keyword">const</span> mathModule = <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./math&#x27;</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">Promise</span>&lt;&#123; <span class="hljs-attr">default</span>: <span class="hljs-title class_">MathModule</span> &#125;&gt;;<br><br>mathModule.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">mod</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(mod.<span class="hljs-property">default</span>.<span class="hljs-title function_">add</span>(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>)); <span class="hljs-comment">// ç±»å‹å®‰å…¨è®¿é—®</span><br>&#125;);<br></code></pre></td></tr></table></figure>

<p><strong>ä»£ç åˆ†å‰²ç±»å‹å£°æ˜</strong></p>
<ol>
<li>æ¨¡å—å£°æ˜æ–‡ä»¶ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// math.module.d.ts</span><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">mathModule</span>: &#123;<br>  <span class="hljs-attr">add</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">PI</span>: <span class="hljs-built_in">number</span>;<br>&#125;;<br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> mathModule;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>åŠ¨æ€æ¨¡å—ç±»å‹ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä½¿ç”¨æ³›å‹å®šä¹‰è¿”å›ç±»å‹</span><br><span class="hljs-keyword">function</span> dynamicImport&lt;T&gt;(<span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt; &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">import</span>(path) <span class="hljs-keyword">as</span> <span class="hljs-title class_">Promise</span>&lt;T&gt;;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br>dynamicImport&lt;&#123; <span class="hljs-attr">default</span>: <span class="hljs-title class_">MathModule</span> &#125;&gt;(<span class="hljs-string">&#x27;./math&#x27;</span>)<br>  .<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">&#123; <span class="hljs-keyword">default</span>: math &#125;</span>) =&gt;</span> math.<span class="hljs-title function_">add</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>));<br></code></pre></td></tr></table></figure>

<p><strong>React åŠ¨æ€ç»„ä»¶ç±»å‹å®‰å…¨</strong></p>
<ol>
<li>React.lazy åŸºç¡€ç”¨æ³•ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> <span class="hljs-title class_">LazyComponent</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./HeavyComponent&#x27;</span>));<br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">App</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-keyword">return</span> (<br>    <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">div</span>&gt;</span>Loading...<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>&#125;&gt;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;<span class="hljs-name">LazyComponent</span> /&gt;</span></span><br><span class="language-xml">    <span class="hljs-tag">&lt;/<span class="hljs-name">React.Suspense</span>&gt;</span></span><br>  );<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>å¸¦å±æ€§çš„ç»„ä»¶ç±»å‹ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// HeavyComponent.tsx</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Props</span> &#123;<br>  <span class="hljs-attr">title</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><span class="hljs-keyword">const</span> <span class="hljs-title class_">HeavyComponent</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;<span class="hljs-title class_">Props</span>&gt; = <span class="hljs-function">(<span class="hljs-params">&#123; title, count &#125;</span>) =&gt;</span> (<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>&#123;title&#125;: &#123;count&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span><br>);<br><br><span class="hljs-comment">// åŠ¨æ€å¯¼å…¥</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">LazyComponent</span> = <span class="hljs-title class_">React</span>.<span class="hljs-title function_">lazy</span>(<span class="hljs-function">() =&gt;</span> <br>  <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./HeavyComponent&#x27;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">mod</span> =&gt;</span> (&#123;<br>    <span class="hljs-attr">default</span>: mod.<span class="hljs-property">HeavyComponent</span><br>  &#125;))<br>);<br><br><span class="hljs-comment">// ä½¿ç”¨ï¼ˆä¿ç•™å±æ€§ç±»å‹æ£€æŸ¥ï¼‰</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">LazyComponent</span> <span class="hljs-attr">title</span>=<span class="hljs-string">&quot;Items&quot;</span> <span class="hljs-attr">count</span>=<span class="hljs-string">&#123;5&#125;</span> /&gt;</span></span><br></code></pre></td></tr></table></figure>

<p><strong>Vue å¼‚æ­¥ç»„ä»¶ç±»å‹</strong></p>
<ol>
<li>defineAsyncComponentï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; defineAsyncComponent &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vue&#x27;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">AsyncComponent</span> = <span class="hljs-title function_">defineAsyncComponent</span>(<span class="hljs-function">() =&gt;</span> <br>  <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./AsyncComponent.vue&#x27;</span>)<br>);<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">template</span>&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;<span class="hljs-name">AsyncComponent</span> <span class="hljs-attr">:count</span>=<span class="hljs-string">&quot;5&quot;</span> /&gt;</span></span><br><span class="language-xml"><span class="hljs-tag">&lt;/<span class="hljs-name">template</span>&gt;</span></span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>ç±»å‹æ¨æ–­ç»„ä»¶å±æ€§ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å£°æ˜ç»„ä»¶ç±»å‹</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">AsyncComponentProps</span> &#123;<br>  <span class="hljs-attr">count</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">AsyncComponent</span> = <span class="hljs-title function_">defineAsyncComponent</span>(&#123;<br>  <span class="hljs-attr">loader</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./AsyncComponent.vue&#x27;</span>),<br>  <span class="hljs-attr">loadingComponent</span>: <span class="hljs-title class_">LoadingSpinner</span>,<br>  <span class="hljs-attr">delay</span>: <span class="hljs-number">200</span>,<br>&#125;) <span class="hljs-keyword">as</span> <span class="hljs-title class_">DefineComponent</span>&lt;<span class="hljs-title class_">AsyncComponentProps</span>&gt;;<br></code></pre></td></tr></table></figure>

<p><strong>ä»£ç åˆ†å‰²æ¨¡å¼</strong></p>
<ol>
<li>è·¯ç”±çº§åˆ†å‰²ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// React Router v6</span><br><span class="hljs-keyword">const</span> router = <span class="hljs-title function_">createBrowserRouter</span>([<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/dashboard&#x27;</span>,<br>    <span class="hljs-attr">element</span>: (<br>      <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">Spinner</span> /&gt;</span>&#125;&gt;</span><br><span class="language-xml">        &#123;import(&#x27;./Dashboard&#x27;)&#125;</span><br><span class="language-xml">      <span class="hljs-tag">&lt;/<span class="hljs-name">React.Suspense</span>&gt;</span></span><br>    )<br>  &#125;,<br>  &#123;<br>    <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/reports&#x27;</span>,<br>    <span class="hljs-attr">lazy</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./Reports&#x27;</span>) <span class="hljs-comment">// è‡ªåŠ¨å¤„ç†Suspense</span><br>  &#125;<br>]);<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>åŠŸèƒ½çº§åˆ†å‰²ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æŒ‰éœ€åŠ è½½å·¥å…·åº“</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">processData</span>(<span class="hljs-params"><span class="hljs-attr">data</span>: <span class="hljs-built_in">any</span>[]</span>) &#123;<br>  <span class="hljs-keyword">if</span> (data.<span class="hljs-property">length</span> &gt; <span class="hljs-number">1000</span>) &#123;<br>    <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./heavy-utils&#x27;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">&#123; sortBigData &#125;</span>) =&gt;</span> &#123;<br>      <span class="hljs-title function_">sortBigData</span>(data);<br>    &#125;);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>æ¡ä»¶åˆ†å‰²ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ ¹æ®è®¾å¤‡åŠ è½½ä¸åŒæ¨¡å—</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">loadEditor</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">if</span> (<span class="hljs-title function_">isMobileDevice</span>()) &#123;<br>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./mobile-editor&#x27;</span>);<br>  &#125;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./desktop-editor&#x27;</span>);<br>&#125;;<br></code></pre></td></tr></table></figure>

<p><strong>ç±»å‹å®‰å…¨ç­–ç•¥</strong></p>
<ol>
<li>åŠ¨æ€å¯¼å…¥æ³›å‹å°è£…ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// safeImport.ts</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> safeImport&lt;T&gt;(<span class="hljs-attr">modulePath</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt; &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: &quot;[request]&quot; */</span> modulePath) <span class="hljs-keyword">as</span> <span class="hljs-title class_">Promise</span>&lt;T&gt;;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ChartModule</span> &#123;<br>  <span class="hljs-attr">renderChart</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">data</span>: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;<br>&#125;<br><br>safeImport&lt;<span class="hljs-title class_">ChartModule</span>&gt;(<span class="hljs-string">&#x27;./charting-lib&#x27;</span>)<br>  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">chart</span> =&gt;</span> chart.<span class="hljs-title function_">renderChart</span>(data));<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>æ¨¡å—ç±»å‹éªŒè¯ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// è¿è¡Œæ—¶ç±»å‹éªŒè¯</span><br><span class="hljs-keyword">import</span> &#123; is &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;typescript-is&#x27;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">loadModule</span> = <span class="hljs-keyword">async</span> (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> mod = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./plugin&#x27;</span>);<br>  <br>  <span class="hljs-keyword">if</span> (!is&lt;<span class="hljs-title class_">PluginInterface</span>&gt;(mod)) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;Invalid plugin interface&#x27;</span>);<br>  &#125;<br>  <br>  <span class="hljs-keyword">return</span> mod;<br>&#125;;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>ç±»å‹æ–­è¨€è¾…åŠ©ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åˆ›å»ºç±»å‹æ–­è¨€å‡½æ•°</span><br><span class="hljs-keyword">function</span> assertModule&lt;T&gt;(<span class="hljs-attr">module</span>: <span class="hljs-built_in">any</span>, <span class="hljs-attr">key</span>: keyof T): asserts <span class="hljs-variable language_">module</span> is T &#123;<br>  <span class="hljs-keyword">if</span> (!(key <span class="hljs-keyword">in</span> <span class="hljs-variable language_">module</span>)) &#123;<br>    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">`Module missing required export: <span class="hljs-subst">$&#123;<span class="hljs-built_in">String</span>(key)&#125;</span>`</span>);<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> mod = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./validator&#x27;</span>);<br>assertModule&lt;&#123; <span class="hljs-attr">validate</span>: <span class="hljs-title class_">Function</span> &#125;&gt;(mod, <span class="hljs-string">&#x27;validate&#x27;</span>);<br>mod.<span class="hljs-title function_">validate</span>(input); <span class="hljs-comment">// å®‰å…¨è°ƒç”¨</span><br></code></pre></td></tr></table></figure>

<p><strong>Webpack é­”æ³•æ³¨é‡Š</strong></p>
<ol>
<li>åŸºç¡€æ³¨é‡Šï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å‘½åä»£ç å—</span><br><span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: &quot;math&quot; */</span> <span class="hljs-string">&#x27;./math&#x27;</span>);<br><br><span class="hljs-comment">// é¢„è·å–</span><br><span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackPrefetch: true */</span> <span class="hljs-string">&#x27;./prefetch-module&#x27;</span>);<br><br><span class="hljs-comment">// é¢„åŠ è½½</span><br><span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackPreload: true */</span> <span class="hljs-string">&#x27;./critical-module&#x27;</span>);<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>ç»„åˆä½¿ç”¨ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒå¯ç”¨é¢„å–</span><br><span class="hljs-keyword">const</span> isProd = process.<span class="hljs-property">env</span>.<span class="hljs-property">NODE_ENV</span> === <span class="hljs-string">&#x27;production&#x27;</span>;<br><span class="hljs-keyword">const</span> comments = isProd ? <span class="hljs-string">&#x27;webpackPrefetch: true&#x27;</span> : <span class="hljs-string">&#x27;&#x27;</span>;<br><br><span class="hljs-keyword">const</span> mod = <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackChunkName: &quot;utils&quot;, $&#123;comments&#125; */</span> <span class="hljs-string">&#x27;./utils&#x27;</span>);<br></code></pre></td></tr></table></figure>

<p><strong>æœ€ä½³å®è·µæŒ‡å—</strong></p>
<ol>
<li>ä»£ç åˆ†å‰²ç­–ç•¥ï¼š</li>
</ol>
<table>
<thead>
<tr>
<th align="left">åˆ†å‰²ç²’åº¦</th>
<th align="left">é€‚åˆåœºæ™¯</th>
<th align="left">ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">è·¯ç”±çº§</td>
<td align="left">SPAåº”ç”¨</td>
<td align="left"><code>lazy(() =&gt; import(&#39;./page&#39;))</code></td>
</tr>
<tr>
<td align="left">ç»„ä»¶çº§</td>
<td align="left">å¤§å‹ç»„ä»¶&#x2F;ä¸‰æ–¹ç»„ä»¶</td>
<td align="left"><code>const Heavy = lazy(() =&gt; import(...))</code></td>
</tr>
<tr>
<td align="left">åº“çº§</td>
<td align="left">ç¬¬ä¸‰æ–¹å¤§ä½“ç§¯åº“</td>
<td align="left"><code>import(&#39;lodash/debounce&#39;)</code></td>
</tr>
<tr>
<td align="left">åŠŸèƒ½çº§</td>
<td align="left">éé¦–å±å…³é”®åŠŸèƒ½</td>
<td align="left">ç‚¹å‡»ååŠ è½½ç¼–è¾‘å™¨æ¨¡å—</td>
</tr>
</tbody></table>
<ol start="2">
<li>åŠ è½½çŠ¶æ€ç®¡ç†ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// è‡ªå®šä¹‰åŠ è½½çŠ¶æ€</span><br><span class="hljs-keyword">function</span> useLazyModule&lt;T&gt;(<span class="hljs-attr">loader</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;T&gt;) &#123;<br>  <span class="hljs-keyword">const</span> [<span class="hljs-variable language_">module</span>, setModule] = useState&lt;T | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);<br>  <span class="hljs-keyword">const</span> [loading, setLoading] = <span class="hljs-title function_">useState</span>(<span class="hljs-literal">true</span>);<br>  <span class="hljs-keyword">const</span> [error, setError] = useState&lt;<span class="hljs-title class_">Error</span> | <span class="hljs-literal">null</span>&gt;(<span class="hljs-literal">null</span>);<br><br>  <span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>    <span class="hljs-title function_">loader</span>()<br>      .<span class="hljs-title function_">then</span>(setModule)<br>      .<span class="hljs-title function_">catch</span>(setError)<br>      .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">setLoading</span>(<span class="hljs-literal">false</span>));<br>  &#125;, []);<br><br>  <span class="hljs-keyword">return</span> &#123; <span class="hljs-variable language_">module</span>, loading, error &#125;;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> &#123; <span class="hljs-attr">module</span>: math, loading &#125; = <span class="hljs-title function_">useLazyModule</span>(<span class="hljs-function">() =&gt;</span> <br>  <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./math&#x27;</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">m</span> =&gt;</span> m.<span class="hljs-property">default</span>)<br>);<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>é”™è¯¯è¾¹ç•Œå¤„ç†ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// React é”™è¯¯è¾¹ç•Œ</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LazyErrorBoundary</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">React.Component</span> &#123;<br>  state = &#123; <span class="hljs-attr">hasError</span>: <span class="hljs-literal">false</span> &#125;;<br>  <br>  <span class="hljs-keyword">static</span> <span class="hljs-title function_">getDerivedStateFromError</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">return</span> &#123; <span class="hljs-attr">hasError</span>: <span class="hljs-literal">true</span> &#125;;<br>  &#125;<br>  <br>  <span class="hljs-title function_">render</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> (<span class="hljs-variable language_">this</span>.<span class="hljs-property">state</span>.<span class="hljs-property">hasError</span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">FallbackUI</span> /&gt;</span></span>;<br>    &#125;<br>    <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">props</span>.<span class="hljs-property">children</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br>&lt;<span class="hljs-title class_">LazyErrorBoundary</span>&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">React.Suspense</span> <span class="hljs-attr">fallback</span>=<span class="hljs-string">&#123;</span>&lt;<span class="hljs-attr">Spinner</span> /&gt;</span>&#125;&gt;</span><br><span class="language-xml">    <span class="hljs-tag">&lt;<span class="hljs-name">LazyComponent</span> /&gt;</span></span><br><span class="language-xml">  <span class="hljs-tag">&lt;/<span class="hljs-name">React.Suspense</span>&gt;</span></span><br>&lt;/<span class="hljs-title class_">LazyErrorBoundary</span>&gt;<br></code></pre></td></tr></table></figure>

<p><strong>æ€§èƒ½ä¼˜åŒ–æŠ€å·§</strong></p>
<ol>
<li>é¢„åŠ è½½å…³é”®æ¨¡å—ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// é¦–å±æ¸²æŸ“åé¢„åŠ è½½</span><br><span class="hljs-title function_">useEffect</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./next-page&#x27;</span>).<span class="hljs-title function_">catch</span>(<span class="hljs-variable language_">console</span>.<span class="hljs-property">error</span>);<br>&#125;, []);<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>æ‰¹é‡åŠ è½½ç­–ç•¥ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åŒæ—¶åŠ è½½å¤šä¸ªæ¨¡å—</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">loadDashboardModules</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([<br>  <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./chart&#x27;</span>),<br>  <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./stats&#x27;</span>),<br>  <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;./recent-activity&#x27;</span>)<br>]);<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-title function_">loadDashboardModules</span>().<span class="hljs-title function_">then</span>(<span class="hljs-function">(<span class="hljs-params">[chart, stats, activity]</span>) =&gt;</span> &#123;<br>  chart.<span class="hljs-title function_">render</span>();<br>  stats.<span class="hljs-title function_">update</span>();<br>&#125;);<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>è¯·æ±‚åˆå¹¶ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä½¿ç”¨Webpacké­”æ³•æ³¨é‡Šåˆå¹¶è¯·æ±‚</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">getEditor</span> = (<span class="hljs-params"></span>) =&gt; <span class="hljs-keyword">import</span>(<span class="hljs-comment">/* webpackMode: &quot;lazy-once&quot; */</span> <span class="hljs-string">&#x27;./editor&#x27;</span>);<br><br><span class="hljs-comment">// ä¸åŒåœ°æ–¹è°ƒç”¨åªåŠ è½½ä¸€æ¬¡</span><br>button1.<span class="hljs-property">onclick</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getEditor</span>().<span class="hljs-title function_">then</span>(...);<br>button2.<span class="hljs-property">onclick</span> = <span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">getEditor</span>().<span class="hljs-title function_">then</span>(...);<br></code></pre></td></tr></table></figure>

<p><strong>ç±»å‹å®‰å…¨é™·é˜±ä¸è§£å†³æ–¹æ¡ˆ</strong></p>
<p>é™·é˜±1ï¼šæ¨¡å—ç±»å‹æ¼‚ç§»</p>
<p>ç°è±¡ï¼šæ¨¡å—æ›´æ–°åç±»å‹ä¸åŒ¹é…</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç‰ˆæœ¬åŒ–ç±»å‹å£°æ˜</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;./chart&#x27;</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ChartV2</span> &#123;<br>    <span class="hljs-title function_">newMethod</span>(): <span class="hljs-built_in">void</span>;<br>  &#125;<br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">chart</span>: <span class="hljs-title class_">ChartV2</span>;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> chart;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>é™·é˜±2ï¼šåŠ¨æ€è·¯å¾„ç±»å‹ä¸¢å¤±</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// è·¯å¾„æ˜ å°„ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ModulePaths</span> = <br>  | <span class="hljs-string">&#x27;./math&#x27;</span> <br>  | <span class="hljs-string">&#x27;./chart&#x27;</span> <br>  | <span class="hljs-string">&#x27;./utils&#x27;</span>;<br><br><span class="hljs-keyword">function</span> loadModule&lt;T&gt;(<span class="hljs-attr">path</span>: <span class="hljs-title class_">ModulePaths</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt; &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">import</span>(path) <span class="hljs-keyword">as</span> <span class="hljs-title class_">Promise</span>&lt;T&gt;;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>é™·é˜±3ï¼šCJS&#x2F;ESM äº’æ“ä½œé—®é¢˜</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç»Ÿä¸€å°è£…</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">loadCompatModule</span>(<span class="hljs-params"><span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span></span>) &#123;<br>  <span class="hljs-keyword">const</span> mod = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(path);<br>  <span class="hljs-keyword">return</span> mod.<span class="hljs-property">default</span> || mod;<br>&#125;<br></code></pre></td></tr></table></figure>

<h1 id="äºŒã€é«˜çº§ç±»å‹ç³»ç»Ÿ"><a href="#äºŒã€é«˜çº§ç±»å‹ç³»ç»Ÿ" class="headerlink" title="äºŒã€é«˜çº§ç±»å‹ç³»ç»Ÿ"></a>äºŒã€é«˜çº§ç±»å‹ç³»ç»Ÿ</h1><h2 id="2-1-å·¥å…·ç±»å‹åŸç†"><a href="#2-1-å·¥å…·ç±»å‹åŸç†" class="headerlink" title="2.1 å·¥å…·ç±»å‹åŸç†"></a>2.1 å·¥å…·ç±»å‹åŸç†</h2><h3 id="2-1-1-å†…ç½®å·¥å…·ç±»å‹æºç è§£æ"><a href="#2-1-1-å†…ç½®å·¥å…·ç±»å‹æºç è§£æ" class="headerlink" title="2.1.1 å†…ç½®å·¥å…·ç±»å‹æºç è§£æ"></a>2.1.1 å†…ç½®å·¥å…·ç±»å‹æºç è§£æ</h3><p>TypeScript å†…ç½®å·¥å…·ç±»å‹é€šè¿‡æ¡ä»¶ç±»å‹å’Œæ˜ å°„ç±»å‹å®ç°</p>
<p><strong>åŸºç¡€å·¥å…·ç±»å‹</strong></p>
<ol>
<li><code>Partial&lt;T&gt;</code>ï¼šå°†ç±»å‹ T çš„æ‰€æœ‰å±æ€§å˜ä¸ºå¯é€‰</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Partial</span>&lt;T&gt; = &#123;<br>  [P <span class="hljs-keyword">in</span> keyof T]?: T[P];<br>&#125;;<br></code></pre></td></tr></table></figure>

<ul>
<li>å®ç°åŸç†ï¼šæ˜ å°„ç±»å‹ + ? ä¿®é¥°ç¬¦</li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">PartialUser</span> = <span class="hljs-title class_">Partial</span>&lt;<span class="hljs-title class_">User</span>&gt;; <span class="hljs-comment">// &#123; name?: string; age?: number &#125;</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li><code>Required&lt;T&gt;</code>ï¼šå°†ç±»å‹ T çš„æ‰€æœ‰å±æ€§å˜ä¸ºå¿…å¡«</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Required</span>&lt;T&gt; = &#123;<br>  [P <span class="hljs-keyword">in</span> keyof T]-?: T[P];<br>&#125;;<br></code></pre></td></tr></table></figure>

<ul>
<li>å®ç°åŸç†ï¼šæ˜ å°„ç±»å‹ + -? ç§»é™¤å¯é€‰ä¿®é¥°ç¬¦</li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">RequiredUser</span> = <span class="hljs-title class_">Required</span>&lt;<span class="hljs-title class_">PartialUser</span>&gt;; <span class="hljs-comment">// &#123; name: string; age: number &#125;</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li><code>Readonly&lt;T&gt;</code>ï¼šå°†ç±»å‹ T çš„æ‰€æœ‰å±æ€§å˜ä¸ºåªè¯»</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Readonly</span>&lt;T&gt; = &#123;<br>  <span class="hljs-keyword">readonly</span> [P <span class="hljs-keyword">in</span> keyof T]: T[P];<br>&#125;;<br></code></pre></td></tr></table></figure>

<ul>
<li>å®ç°åŸç†ï¼šæ˜ å°„ç±»å‹ + readonly ä¿®é¥°ç¬¦</li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ReadonlyUser</span> = <span class="hljs-title class_">Readonly</span>&lt;<span class="hljs-title class_">User</span>&gt;; <span class="hljs-comment">// &#123; readonly name: string; readonly age: number &#125;</span><br></code></pre></td></tr></table></figure>

<p><strong>ç»“æ„æ“ä½œå·¥å…·ç±»å‹</strong></p>
<ol>
<li><code>Pick&lt;T, K extends keyof T&gt;</code>: ä»ç±»å‹ T ä¸­é€‰å–æŒ‡å®šå±æ€§ K</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Pick</span>&lt;T, K <span class="hljs-keyword">extends</span> keyof T&gt; = &#123;<br>  [P <span class="hljs-keyword">in</span> K]: T[P];<br>&#125;;<br></code></pre></td></tr></table></figure>

<ul>
<li>å®ç°åŸç†ï¼šæ˜ å°„ç±»å‹ + é”®åçº¦æŸ</li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">NameOnly</span> = <span class="hljs-title class_">Pick</span>&lt;<span class="hljs-title class_">User</span>, <span class="hljs-string">&#x27;name&#x27;</span>&gt;; <span class="hljs-comment">// &#123; name: string &#125;</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li><code>Omit&lt;T, K extends keyof any&gt;</code>: ä»ç±»å‹ T ä¸­æ’é™¤æŒ‡å®šå±æ€§ K</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Omit</span>&lt;T, K <span class="hljs-keyword">extends</span> keyof <span class="hljs-built_in">any</span>&gt; = <span class="hljs-title class_">Pick</span>&lt;T, <span class="hljs-title class_">Exclude</span>&lt;keyof T, K&gt;&gt;;<br></code></pre></td></tr></table></figure>

<ul>
<li>å®ç°åŸç†ï¼šç»„åˆ Pick å’Œ Exclude</li>
<li>æºç ä¾èµ–ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Exclude</span>&lt;T, U&gt; = T <span class="hljs-keyword">extends</span> U ? <span class="hljs-built_in">never</span> : T;<br></code></pre></td></tr></table></figure>

<ul>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">WithoutAge</span> = <span class="hljs-title class_">Omit</span>&lt;<span class="hljs-title class_">User</span>, <span class="hljs-string">&#x27;age&#x27;</span>&gt;; <span class="hljs-comment">// &#123; name: string &#125;</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li><code>Record&lt;K extends keyof any, T&gt;</code>: åˆ›å»ºé”®ä¸º Kã€å€¼ä¸º T çš„ç±»å‹</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Record</span>&lt;K <span class="hljs-keyword">extends</span> keyof <span class="hljs-built_in">any</span>, T&gt; = &#123;<br>  [P <span class="hljs-keyword">in</span> K]: T;<br>&#125;;<br></code></pre></td></tr></table></figure>

<ul>
<li>å®ç°åŸç†ï¼šåŠ¨æ€é”®æ˜ å°„</li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">UserMap</span> = <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">User</span>&gt;; <span class="hljs-comment">// &#123; [key: string]: User &#125;</span><br></code></pre></td></tr></table></figure>

<p><strong>ç±»å‹æ“ä½œå·¥å…·ç±»å‹</strong></p>
<ol>
<li><code>Exclude&lt;T, U&gt;</code>: ä» T ä¸­æ’é™¤å¯åˆ†é…ç»™ U çš„ç±»å‹</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Exclude</span>&lt;T, U&gt; = T <span class="hljs-keyword">extends</span> U ? <span class="hljs-built_in">never</span> : T;<br></code></pre></td></tr></table></figure>

<ul>
<li>å®ç°åŸç†ï¼šæ¡ä»¶ç±»å‹ + never</li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T0</span> = <span class="hljs-title class_">Exclude</span>&lt;<span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-string">&quot;b&quot;</span> | <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;a&quot;</span>&gt;; <span class="hljs-comment">// &quot;b&quot; | &quot;c&quot;</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li><code>Extract&lt;T, U&gt;</code>: ä» T ä¸­æå–å¯åˆ†é…ç»™ U çš„ç±»å‹</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Extract</span>&lt;T, U&gt; = T <span class="hljs-keyword">extends</span> U ? T : <span class="hljs-built_in">never</span>;<br></code></pre></td></tr></table></figure>

<ul>
<li>å®ç°åŸç†ï¼šæ¡ä»¶ç±»å‹åå‘æ“ä½œ</li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T1</span> = <span class="hljs-title class_">Extract</span>&lt;<span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-string">&quot;b&quot;</span> | <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-string">&quot;f&quot;</span>&gt;; <span class="hljs-comment">// &quot;a&quot;</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li><code>NonNullable&lt;T&gt;</code>: ä» T ä¸­æ’é™¤ null å’Œ undefined</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">NonNullable</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">never</span> : T;<br></code></pre></td></tr></table></figure>

<ul>
<li>å®ç°åŸç†ï¼šæ¡ä»¶ç±»å‹è¿‡æ»¤</li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T2</span> = <span class="hljs-title class_">NonNullable</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>&gt;; <span class="hljs-comment">// string</span><br></code></pre></td></tr></table></figure>

<p><strong>å‡½æ•°æ“ä½œå·¥å…·ç±»å‹</strong></p>
<ol>
<li><code>Parameters&lt;T extends (...args: any) =&gt; any&gt;</code>: è·å–å‡½æ•°å‚æ•°ç±»å‹å…ƒç»„</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Parameters</span>&lt;T <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span>&gt; = <br>  T <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: infer P) =&gt; <span class="hljs-built_in">any</span> ? P : <span class="hljs-built_in">never</span>;<br></code></pre></td></tr></table></figure>

<ul>
<li>å®ç°åŸç†ï¼šinfer æ¨å¯¼å‚æ•°ç±»å‹</li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">FnParams</span> = <span class="hljs-title class_">Parameters</span>&lt;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>&gt;; <span class="hljs-comment">// [string, number]</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li><code>ReturnType&lt;T extends (...args: any) =&gt; any&gt;</code>: è·å–å‡½æ•°è¿”å›å€¼ç±»å‹</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ReturnType</span>&lt;T <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span>&gt; = <br>  T <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; infer R ? R : <span class="hljs-built_in">any</span>;<br></code></pre></td></tr></table></figure>

<ul>
<li>å®ç°åŸç†ï¼šinfer æ¨å¯¼è¿”å›ç±»å‹</li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">FnReturn</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">boolean</span>&gt;; <span class="hljs-comment">// boolean</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li><code>ConstructorParameters&lt;T extends new (...args: any) =&gt; any&gt;</code>: è·å–æ„é€ å‡½æ•°å‚æ•°ç±»å‹å…ƒç»„</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ConstructorParameters</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title function_">new</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span>&gt; = <br>  T <span class="hljs-keyword">extends</span> <span class="hljs-title function_">new</span> (...<span class="hljs-attr">args</span>: infer P) =&gt; <span class="hljs-built_in">any</span> ? P : <span class="hljs-built_in">never</span>;<br></code></pre></td></tr></table></figure>

<ul>
<li>å®ç°åŸç†ï¼šinfer æ¨å¯¼æ„é€ å‡½æ•°å‚æ•°</li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span></span>) &#123;&#125;<br>&#125;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Params</span> = <span class="hljs-title class_">ConstructorParameters</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">Person</span>&gt;; <span class="hljs-comment">// [string, number]</span><br></code></pre></td></tr></table></figure>

<p><strong>é«˜çº§å·¥å…·ç±»å‹</strong></p>
<ol>
<li><code>ThisParameterType&lt;T&gt;</code>: æå–å‡½æ•°çš„ this å‚æ•°ç±»å‹</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ThisParameterType</span>&lt;T&gt; = <br>  T <span class="hljs-title function_">extends</span> (<span class="hljs-attr">this</span>: infer U, ...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]) =&gt; <span class="hljs-built_in">any</span> ? U : <span class="hljs-built_in">unknown</span>;<br></code></pre></td></tr></table></figure>

<ul>
<li>å®ç°åŸç†ï¼šinfer æ•è· this ç±»å‹</li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"><span class="hljs-attr">this</span>: <span class="hljs-title class_">Window</span></span>) &#123;&#125;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ThisType</span> = <span class="hljs-title class_">ThisParameterType</span>&lt;<span class="hljs-keyword">typeof</span> fn&gt;; <span class="hljs-comment">// Window</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li><code>OmitThisParameter&lt;T&gt;</code>: ç§»é™¤å‡½æ•°çš„ this å‚æ•°ç±»å‹</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">OmitThisParameter</span>&lt;T&gt; = <br>  <span class="hljs-built_in">unknown</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ThisParameterType</span>&lt;T&gt; ? T : <br>  T <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: infer A) =&gt; infer R ? <span class="hljs-function">(<span class="hljs-params">...<span class="hljs-attr">args</span>: A</span>) =&gt;</span> R : T;<br></code></pre></td></tr></table></figure>

<ul>
<li>å®ç°åŸç†ï¼šç»„åˆ ThisParameterType + å‚æ•°æ¨å¯¼</li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">WithoutThis</span> = <span class="hljs-title class_">OmitThisParameter</span>&lt;<span class="hljs-keyword">typeof</span> fn&gt;; <span class="hljs-comment">// () =&gt; void</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li><code>Awaited&lt;T&gt;</code>: é€’å½’è§£åŒ… Promise ç±»å‹</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Awaited</span>&lt;T&gt; =<br>    T <span class="hljs-keyword">extends</span> <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span> ? T : <span class="hljs-comment">// ç‰¹æ®Šå¤„ç† null/undefined</span><br>    T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span> &amp; &#123; <span class="hljs-title function_">then</span>(<span class="hljs-attr">onfulfilled</span>: infer F): <span class="hljs-built_in">any</span> &#125; ? <span class="hljs-comment">// æ£€æŸ¥ thenable å¯¹è±¡</span><br>        F <span class="hljs-title function_">extends</span> (<span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">value</span>: infer V, ...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">any</span>) ? <br>            <span class="hljs-title class_">Awaited</span>&lt;V&gt; : <span class="hljs-comment">// é€’å½’è§£åŒ…</span><br>        <span class="hljs-built_in">never</span> : <br>    T; <span class="hljs-comment">// é Promise ç±»å‹ç›´æ¥è¿”å›</span><br></code></pre></td></tr></table></figure>

<ul>
<li>å®ç°åŸç†ï¼šæ¡ä»¶ç±»å‹é€’å½’ + thenable æ£€æµ‹</li>
<li>ç¤ºä¾‹ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-variable constant_">T3</span> = <span class="hljs-title class_">Awaited</span>&lt;<span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt;&gt;; <span class="hljs-comment">// string</span><br></code></pre></td></tr></table></figure>

<p><strong>æºç è®¾è®¡æ¨¡å¼åˆ†æ</strong></p>
<ol>
<li>åˆ†å¸ƒå¼æ¡ä»¶ç±»å‹</li>
</ol>
<p>å½“æ³›å‹å‚æ•°ä¸ºè”åˆç±»å‹æ—¶ï¼Œæ¡ä»¶ç±»å‹ä¼šåˆ†å¸ƒå¼åº”ç”¨ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// Exclude ä¸­çš„åˆ†å¸ƒå¼ç‰¹æ€§</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Exclude</span>&lt;T, U&gt; = T <span class="hljs-keyword">extends</span> U ? <span class="hljs-built_in">never</span> : T;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Result</span> = <span class="hljs-title class_">Exclude</span>&lt;<span class="hljs-string">&#x27;a&#x27;</span> | <span class="hljs-string">&#x27;b&#x27;</span> | <span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-string">&#x27;a&#x27;</span> | <span class="hljs-string">&#x27;b&#x27;</span>&gt;; <span class="hljs-comment">// &#x27;c&#x27;</span><br><br><span class="hljs-comment">// ç­‰ä»·äºï¼š</span><br>(<span class="hljs-string">&#x27;a&#x27;</span> <span class="hljs-keyword">extends</span> <span class="hljs-string">&#x27;a&#x27;</span> | <span class="hljs-string">&#x27;b&#x27;</span> ? <span class="hljs-built_in">never</span> : <span class="hljs-string">&#x27;a&#x27;</span>) |<br>(<span class="hljs-string">&#x27;b&#x27;</span> <span class="hljs-keyword">extends</span> <span class="hljs-string">&#x27;a&#x27;</span> | <span class="hljs-string">&#x27;b&#x27;</span> ? <span class="hljs-built_in">never</span> : <span class="hljs-string">&#x27;b&#x27;</span>) |<br>(<span class="hljs-string">&#x27;c&#x27;</span> <span class="hljs-keyword">extends</span> <span class="hljs-string">&#x27;a&#x27;</span> | <span class="hljs-string">&#x27;b&#x27;</span> ? <span class="hljs-built_in">never</span> : <span class="hljs-string">&#x27;c&#x27;</span>)<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>ç±»å‹é€’å½’æ¨¡å¼</li>
</ol>
<p>å¤„ç†åµŒå¥—ç»“æ„çš„å…³é”®æŠ€æœ¯ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å†…ç½®å·¥å…·ç±»å‹ä¸­çš„é€’å½’</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">DeepReadonly</span>&lt;T&gt; = &#123;<br>  <span class="hljs-keyword">readonly</span> [P <span class="hljs-keyword">in</span> keyof T]: T[P] <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span> <br>    ? <span class="hljs-title class_">DeepReadonly</span>&lt;T[P]&gt; <br>    : T[P];<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>ç±»å‹æ¨æ–­ä¼˜å…ˆçº§</li>
</ol>
<p>infer å…³é”®å­—çš„å·¥ä½œæœºåˆ¶ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åå˜ä½ç½®ï¼ˆè¿”å›å€¼ï¼‰æ¨æ–­</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">GetReturnType</span>&lt;T&gt; = T <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]) =&gt; infer R ? R : <span class="hljs-built_in">any</span>;<br><br><span class="hljs-comment">// é€†å˜ä½ç½®ï¼ˆå‚æ•°ï¼‰æ¨æ–­</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">GetFirstArg</span>&lt;T&gt; = T <span class="hljs-title function_">extends</span> (<span class="hljs-attr">arg</span>: infer A, ...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]) =&gt; <span class="hljs-built_in">any</span> ? A : <span class="hljs-built_in">never</span>;<br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹å®è·µè¦ç‚¹</strong></p>
<ol>
<li>é¿å…è¿‡åº¦åµŒå¥—ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å±é™©ï¼šæ·±å±‚åµŒå¥—å¯èƒ½å¯¼è‡´ç±»å‹å®ä¾‹åŒ–è¿‡æ·±é”™è¯¯</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">DeepNested</span> = <span class="hljs-title class_">Awaited</span>&lt;<span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt;&gt;&gt;;<br><br><span class="hljs-comment">// è§£å†³æ–¹æ¡ˆï¼šè®¾ç½®é€’å½’æ·±åº¦é™åˆ¶</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">SafeAwaited</span>&lt;T, <span class="hljs-title class_">Depth</span> <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span> = <span class="hljs-number">5</span>&gt; = <br>  <span class="hljs-title class_">Depth</span> <span class="hljs-keyword">extends</span> <span class="hljs-number">0</span> ? T :<br>  T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Promise</span>&lt;infer U&gt; ? <span class="hljs-title class_">SafeAwaited</span>&lt;U, [-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>][<span class="hljs-title class_">Depth</span>]&gt; : T;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>æ€§èƒ½æ•æ„Ÿåœºæ™¯ä¼˜åŒ–ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä½¿ç”¨å†…ç½®å·¥å…·ç±»å‹æ›¿ä»£è‡ªå®šä¹‰å¤æ‚ç±»å‹</span><br><span class="hljs-comment">// ä¸æ¨èï¼š</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">MyPartial</span>&lt;T&gt; = &#123; [P <span class="hljs-keyword">in</span> keyof T]?: T[P] &#125;;<br><br><span class="hljs-comment">// æ¨èï¼šç›´æ¥ä½¿ç”¨ Partial</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>ç±»å‹å®‰å…¨æ£€æŸ¥ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç¡®ä¿å·¥å…·ç±»å‹å®‰å…¨</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">SafeExtract</span>&lt;T, U&gt; = [T] <span class="hljs-keyword">extends</span> [U] ? T : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// é˜²æ­¢åˆ†å¸ƒå¼è¡Œä¸º</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">DistributiveCheck</span>&lt;T&gt; = [T] <span class="hljs-keyword">extends</span> [<span class="hljs-built_in">never</span>] ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;<br></code></pre></td></tr></table></figure>

<ol start="4">
<li>æºç è°ƒè¯•æŠ€å·§ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä½¿ç”¨ç±»å‹æ‰“å°è°ƒè¯•</span><br><span class="hljs-keyword">type</span> _Debug&lt;T&gt; = T <span class="hljs-keyword">extends</span> infer U ? U : <span class="hljs-built_in">never</span>;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Reveal</span>&lt;T&gt; = &#123; [P <span class="hljs-keyword">in</span> keyof T]: T[P] &#125; &amp; &#123;&#125;;<br><br><span class="hljs-comment">// æŸ¥çœ‹å®é™…ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">DebugView</span> = <span class="hljs-title class_">Reveal</span>&lt;<span class="hljs-title class_">SomeComplexType</span>&gt;;<br></code></pre></td></tr></table></figure>

<p><strong>å†…ç½®å·¥å…·ç±»å‹å…³ç³»å›¾</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs text">åŸºç¡€æ“ä½œ<br>â”œâ”€ Partial<br>â”œâ”€ Required<br>â”œâ”€ Readonly<br>â”‚<br>ç»“æ„æ“ä½œ<br>â”œâ”€ Pick<br>â”œâ”€ Omit â†’ ä¾èµ– Exclude<br>â”œâ”€ Record<br>â”‚<br>é›†åˆæ“ä½œ<br>â”œâ”€ Exclude<br>â”œâ”€ Extract<br>â”œâ”€ NonNullable<br>â”‚<br>å‡½æ•°æ“ä½œ<br>â”œâ”€ Parameters<br>â”œâ”€ ReturnType<br>â”œâ”€ ConstructorParameters<br>â”œâ”€ ThisParameterType<br>â””â”€ OmitThisParameter<br></code></pre></td></tr></table></figure>

<h3 id="2-1-2-ç±»å‹æ˜ å°„ä¿®é¥°ç¬¦ï¼ˆ-ï¼‰åŸç†"><a href="#2-1-2-ç±»å‹æ˜ å°„ä¿®é¥°ç¬¦ï¼ˆ-ï¼‰åŸç†" class="headerlink" title="2.1.2 ç±»å‹æ˜ å°„ä¿®é¥°ç¬¦ï¼ˆ+&#x2F;-ï¼‰åŸç†"></a>2.1.2 ç±»å‹æ˜ å°„ä¿®é¥°ç¬¦ï¼ˆ+&#x2F;-ï¼‰åŸç†</h3><p><strong>ä¿®é¥°ç¬¦åŸºç¡€æ¦‚å¿µ</strong></p>
<p>ç±»å‹æ˜ å°„ä¿®é¥°ç¬¦ç”¨äºæ§åˆ¶å±æ€§ä¿®é¥°ç¬¦ï¼ˆ? å’Œ readonlyï¼‰çš„æ·»åŠ æˆ–ç§»é™¤ï¼š</p>
<table>
<thead>
<tr>
<th align="left">ä¿®é¥°ç¬¦</th>
<th align="left">ä½œç”¨</th>
<th align="left">ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">+</td>
<td align="left">æ·»åŠ ä¿®é¥°ç¬¦ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰</td>
<td align="left"><code>&#123; +readonly [P in K]: T &#125;</code></td>
</tr>
<tr>
<td align="left">-</td>
<td align="left">ç§»é™¤ä¿®é¥°ç¬¦</td>
<td align="left"><code>&#123; -? [P in K]: T &#125;</code></td>
</tr>
</tbody></table>
<p><strong>æ ¸å¿ƒè¯­æ³•è§£æ</strong></p>
<ol>
<li>æ·»åŠ ä¿®é¥°ç¬¦ï¼ˆæ˜¾å¼+ï¼‰ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ˜¾å¼æ·»åŠ åªè¯»å±æ€§</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">AddReadonly</span>&lt;T&gt; = &#123;<br>  +<span class="hljs-keyword">readonly</span> [P <span class="hljs-keyword">in</span> keyof T]: T[P];<br>&#125;;<br><br><span class="hljs-comment">// æ˜¾å¼æ·»åŠ å¯é€‰å±æ€§</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">AddOptional</span>&lt;T&gt; = &#123;<br>  [P <span class="hljs-keyword">in</span> keyof T]+?: T[P];<br>&#125;;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>ç§»é™¤ä¿®é¥°ç¬¦ï¼ˆ-ï¼‰ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç§»é™¤åªè¯»å±æ€§</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">RemoveReadonly</span>&lt;T&gt; = &#123;<br>  -<span class="hljs-keyword">readonly</span> [P <span class="hljs-keyword">in</span> keyof T]: T[P];<br>&#125;;<br><br><span class="hljs-comment">// ç§»é™¤å¯é€‰å±æ€§</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">RemoveOptional</span>&lt;T&gt; = &#123;<br>  [P <span class="hljs-keyword">in</span> keyof T]-?: T[P];<br>&#125;;<br></code></pre></td></tr></table></figure>

<p><strong>å®ç°åŸç†åˆ†æ</strong></p>
<ol>
<li>ä¿®é¥°ç¬¦çš„ç¼–è¯‘è½¬æ¢ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æºç ï¼š</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Mutable</span>&lt;T&gt; = &#123;<br>  -<span class="hljs-keyword">readonly</span> [P <span class="hljs-keyword">in</span> keyof T]: T[P];<br>&#125;;<br><br><span class="hljs-comment">// ç¼–è¯‘åç­‰ä»·äºï¼š</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Mutable</span>&lt;T&gt; = &#123;<br>  [P <span class="hljs-keyword">in</span> keyof T]: T[P];<br>&#125;;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>ç±»å‹ç³»ç»Ÿå†…éƒ¨å¤„ç†ï¼š<ul>
<li><code>+</code> æ“ä½œï¼šæ·»åŠ å±æ€§æè¿°ç¬¦æ ‡å¿—</li>
<li><code>-</code> æ“ä½œï¼šæ¸…é™¤å±æ€§æè¿°ç¬¦æ ‡å¿—</li>
<li>æ˜ å°„è¿‡ç¨‹æœ¬è´¨æ˜¯åˆ›å»ºæ–°å±æ€§æè¿°ç¬¦</li>
</ul>
</li>
</ol>
<p><strong>å†…ç½®å·¥å…·ç±»å‹åº”ç”¨</strong></p>
<ol>
<li><code>Required&lt;T&gt;</code> å®ç°ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Required</span>&lt;T&gt; = &#123;<br>  [P <span class="hljs-keyword">in</span> keyof T]-?: T[P];<br>&#125;;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li><code>Readonly&lt;T&gt;</code> å®ç°ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Readonly</span>&lt;T&gt; = &#123;<br>  +<span class="hljs-keyword">readonly</span> [P <span class="hljs-keyword">in</span> keyof T]: T[P];<br>&#125;;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li><code>Mutable&lt;T&gt;</code>ï¼ˆéå†…ç½®ä½†å¸¸ç”¨ï¼‰ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Mutable</span>&lt;T&gt; = &#123;<br>  -<span class="hljs-keyword">readonly</span> [P <span class="hljs-keyword">in</span> keyof T]: T[P];<br>&#125;;<br></code></pre></td></tr></table></figure>

<p><strong>ç»„åˆä¿®é¥°ç¬¦æŠ€å·§</strong></p>
<ol>
<li>åŒæ—¶æ·»åŠ &#x2F;ç§»é™¤å¤šä¸ªä¿®é¥°ç¬¦ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åˆ›å»ºå¯å˜ä¸”å¿…å¡«çš„ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">MutableRequired</span>&lt;T&gt; = &#123;<br>  -<span class="hljs-keyword">readonly</span> [P <span class="hljs-keyword">in</span> keyof T]-?: T[P];<br>&#125;;<br><br><span class="hljs-comment">// ç­‰ä»·äºï¼š</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">MutableRequired</span>&lt;T&gt; = <span class="hljs-title class_">Mutable</span>&lt;<span class="hljs-title class_">Required</span>&lt;T&gt;&gt;;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>æ¡ä»¶ä¿®é¥°ç¬¦ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä»…å¯¹å‡½æ•°å±æ€§æ·»åŠ åªè¯»</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ReadonlyMethods</span>&lt;T&gt; = &#123;<br>  <span class="hljs-keyword">readonly</span> [P <span class="hljs-keyword">in</span> keyof T]: T[P] <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Function</span> ? T[P] : <span class="hljs-built_in">never</span>;<br>&#125; &amp; &#123;<br>  [P <span class="hljs-keyword">in</span> keyof T <span class="hljs-keyword">as</span> T[P] <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Function</span> ? <span class="hljs-built_in">never</span> : P]: T[P];<br>&#125;;<br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹å®è·µæŒ‡å—</strong></p>
<ol>
<li>ä¸å¯å˜çŠ¶æ€ç®¡ç†ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åˆ›å»ºæ·±åº¦åªè¯»çŠ¶æ€</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ImmutableState</span>&lt;T&gt; = &#123;<br>  +<span class="hljs-keyword">readonly</span> [P <span class="hljs-keyword">in</span> keyof T]: <span class="hljs-title class_">ImmutableState</span>&lt;T[P]&gt;;<br>&#125;;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">AppState</span> &#123;<br>  <span class="hljs-attr">user</span>: &#123; <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> &#125;;<br>  <span class="hljs-attr">settings</span>: &#123; <span class="hljs-attr">darkMode</span>: <span class="hljs-built_in">boolean</span> &#125;;<br>&#125;<br><span class="hljs-keyword">const</span> <span class="hljs-attr">state</span>: <span class="hljs-title class_">ImmutableState</span>&lt;<span class="hljs-title class_">AppState</span>&gt; = &#123;<br>  <span class="hljs-attr">user</span>: &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Alice&quot;</span> &#125;,<br>  <span class="hljs-attr">settings</span>: &#123; <span class="hljs-attr">darkMode</span>: <span class="hljs-literal">true</span> &#125;<br>&#125;;<br>state.<span class="hljs-property">user</span>.<span class="hljs-property">name</span> = <span class="hljs-string">&quot;Bob&quot;</span>; <span class="hljs-comment">// ğŸš« ç¼–è¯‘é”™è¯¯</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>API å“åº”å¤„ç†ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç§»é™¤APIå“åº”ä¸­çš„å¯é€‰å±æ€§</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ConcreteResponse</span>&lt;T&gt; = &#123;<br>  [P <span class="hljs-keyword">in</span> keyof T]-?: T[P];<br>&#125;;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ApiResponse</span> &#123;<br>  <span class="hljs-attr">data</span>?: <span class="hljs-built_in">unknown</span>;<br>  <span class="hljs-attr">error</span>?: <span class="hljs-built_in">string</span>;<br>&#125;<br><span class="hljs-keyword">function</span> <span class="hljs-title function_">handleResponse</span>(<span class="hljs-params"><span class="hljs-attr">res</span>: <span class="hljs-title class_">ConcreteResponse</span>&lt;<span class="hljs-title class_">ApiResponse</span>&gt;</span>) &#123;<br>  <span class="hljs-comment">// res.data å’Œ res.error ä¸€å®šå­˜åœ¨</span><br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>å®‰å…¨è¡¥ä¸ç­–ç•¥ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åˆ›å»ºéƒ¨åˆ†æ›´æ–°ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">SafePatch</span>&lt;T&gt; = <span class="hljs-title class_">Partial</span>&lt;<span class="hljs-title class_">Mutable</span>&lt;T&gt;&gt; &amp; &#123;<br>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// ä¿æŒIDåªè¯»</span><br>&#125;;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Product</span> &#123;<br>  <span class="hljs-keyword">readonly</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">price</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><span class="hljs-keyword">const</span> <span class="hljs-attr">update</span>: <span class="hljs-title class_">SafePatch</span>&lt;<span class="hljs-title class_">Product</span>&gt; = &#123;<br>  <span class="hljs-attr">id</span>: <span class="hljs-string">&quot;p1&quot;</span>, <span class="hljs-comment">// âœ… å…è®¸ï¼ˆä½†å®é™…ä¸èƒ½ä¿®æ”¹ï¼‰</span><br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;New Name&quot;</span> <span class="hljs-comment">// âœ…</span><br>&#125;;<br></code></pre></td></tr></table></figure>

<p><strong>æ€§èƒ½ä¼˜åŒ–æŠ€å·§</strong></p>
<ol>
<li>é¿å…æ·±åº¦é€’å½’ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// é™åˆ¶é€’å½’æ·±åº¦</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">DeepReadonly</span>&lt;T, <span class="hljs-title class_">Depth</span> <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span> = <span class="hljs-number">3</span>&gt; = <br>  <span class="hljs-title class_">Depth</span> <span class="hljs-keyword">extends</span> <span class="hljs-number">0</span> ? T : <br>  T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span> ? &#123;<br>    <span class="hljs-keyword">readonly</span> [P <span class="hljs-keyword">in</span> keyof T]: <span class="hljs-title class_">DeepReadonly</span>&lt;T[P], [-<span class="hljs-number">1</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>][<span class="hljs-title class_">Depth</span>]&gt;;<br>  &#125; : T;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>æ¡ä»¶çŸ­è·¯ä¼˜åŒ–ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">OptimizedMutable</span>&lt;T&gt; = <br>  T <span class="hljs-keyword">extends</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">any</span>[] ? <span class="hljs-title class_">Array</span>&lt;<span class="hljs-title class_">OptimizedMutable</span>&lt;T[<span class="hljs-built_in">number</span>]&gt;&gt; :<br>  T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span> ? &#123; -<span class="hljs-keyword">readonly</span> [P <span class="hljs-keyword">in</span> keyof T]: <span class="hljs-title class_">OptimizedMutable</span>&lt;T[P]&gt; &#125; :<br>  T;<br></code></pre></td></tr></table></figure>

<p><strong>ç¼–è¯‘åŸç†é€è§†</strong></p>
<ol>
<li>ä¿®é¥°ç¬¦çš„ AST è¡¨ç¤ºï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// TypeScript AST èŠ‚ç‚¹ç¤ºä¾‹</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MappingModifier</span> &#123;<br>  +?: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// æ·»åŠ ä¿®é¥°ç¬¦</span><br>  -?: <span class="hljs-built_in">boolean</span>; <span class="hljs-comment">// ç§»é™¤ä¿®é¥°ç¬¦</span><br>  <span class="hljs-attr">readonly</span>?: <span class="hljs-string">&quot;+&quot;</span> | <span class="hljs-string">&quot;-&quot;</span> | <span class="hljs-literal">null</span>;<br>  <span class="hljs-attr">optional</span>?: <span class="hljs-string">&quot;+&quot;</span> | <span class="hljs-string">&quot;-&quot;</span> | <span class="hljs-literal">null</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>ç±»å‹å®ä¾‹åŒ–æµç¨‹ï¼š</li>
</ol>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">1. è§£ææ˜ å°„è¯­æ³•<br>2. è·å–æºç±»å‹å±æ€§æè¿°ç¬¦<br>3. åº”ç”¨ä¿®é¥°ç¬¦æ“ä½œï¼ˆ+/-ï¼‰<br>4. åˆ›å»ºæ–°å±æ€§æè¿°ç¬¦<br>5. ç»„åˆä¸ºæ–°å¯¹è±¡ç±»å‹<br></code></pre></td></tr></table></figure>

<p><strong>å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</strong></p>
<p>é—®é¢˜ï¼šä¿®é¥°ç¬¦å¯¹æ–¹æ³•æ— æ•ˆ</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Test</span> &#123;<br>  <span class="hljs-keyword">readonly</span> <span class="hljs-title function_">method</span>(<span class="hljs-params"></span>) &#123;&#125; <span class="hljs-comment">// æ–¹æ³•æœ¬è´¨æ˜¯åªè¯»çš„</span><br>&#125;<br><span class="hljs-keyword">type</span> T = <span class="hljs-title class_">Mutable</span>&lt;<span class="hljs-title class_">Test</span>&gt;; <span class="hljs-comment">// ä»ç„¶åªè¯»</span><br></code></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">MutableMethods</span>&lt;T&gt; = &#123;<br>  -<span class="hljs-keyword">readonly</span> [P <span class="hljs-keyword">in</span> keyof T]: T[P];<br>&#125; &amp; &#123;<br>  [P <span class="hljs-keyword">in</span> keyof T]: T[P] <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Function</span> ? <span class="hljs-function">(<span class="hljs-params">...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]</span>) =&gt;</span> <span class="hljs-built_in">any</span> : T[P];<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>é—®é¢˜ï¼šä¿®é¥°ç¬¦ä¸äº¤å‰ç±»å‹å†²çª</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> A = &#123; <span class="hljs-keyword">readonly</span> <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span> &#125;;<br><span class="hljs-keyword">type</span> B = &#123; <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span> &#125;;<br><span class="hljs-keyword">type</span> C = A &amp; B; <span class="hljs-comment">// id å˜ä¸º stringï¼ˆåªè¯»è¢«è¦†ç›–ï¼‰</span><br></code></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">EnforceReadonly</span>&lt;T&gt; = &#123;<br>  <span class="hljs-keyword">readonly</span> [P <span class="hljs-keyword">in</span> keyof T]: T[P];<br>&#125;;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">SafeMerge</span>&lt;A, B&gt; = <span class="hljs-title class_">EnforceReadonly</span>&lt;A&gt; &amp; <span class="hljs-title class_">EnforceReadonly</span>&lt;B&gt;;<br></code></pre></td></tr></table></figure>

<p>é—®é¢˜ï¼šæ•°ç»„å’Œå…ƒç»„å¤„ç†</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å…ƒç»„å¯å˜åŒ–</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">MutableTuple</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-keyword">readonly</span> <span class="hljs-built_in">any</span>[]&gt; = &#123;<br>  -<span class="hljs-keyword">readonly</span> [K <span class="hljs-keyword">in</span> keyof T]: T[K];<br>&#125;;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">arr</span>: <span class="hljs-title class_">MutableTuple</span>&lt;<span class="hljs-keyword">readonly</span> [<span class="hljs-built_in">string</span>, <span class="hljs-built_in">number</span>]&gt; = [<span class="hljs-string">&quot;a&quot;</span>, <span class="hljs-number">1</span>];<br>arr[<span class="hljs-number">0</span>] = <span class="hljs-string">&quot;b&quot;</span>; <span class="hljs-comment">// âœ…</span><br></code></pre></td></tr></table></figure>

<p><strong>ä¿®é¥°ç¬¦ä¸å†…ç½®å·¥å…·ç±»å‹å…³ç³»</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs text">æ˜ å°„ä¿®é¥°ç¬¦ä½“ç³»<br>â”œâ”€ æ·»åŠ æ“ä½œ (+)<br>â”‚  â”œâ”€ +readonly â†’ Readonly&lt;T&gt;<br>â”‚  â””â”€ +? â†’ Partial&lt;T&gt;<br>â”‚<br>â””â”€ ç§»é™¤æ“ä½œ (-)<br>   â”œâ”€ -readonly â†’ Mutable&lt;T&gt;<br>   â””â”€ -? â†’ Required&lt;T&gt;<br></code></pre></td></tr></table></figure>

<h3 id="2-1-3-æ¡ä»¶ç±»å‹åˆ†å¸ƒå¼ç‰¹æ€§"><a href="#2-1-3-æ¡ä»¶ç±»å‹åˆ†å¸ƒå¼ç‰¹æ€§" class="headerlink" title="2.1.3 æ¡ä»¶ç±»å‹åˆ†å¸ƒå¼ç‰¹æ€§"></a>2.1.3 æ¡ä»¶ç±»å‹åˆ†å¸ƒå¼ç‰¹æ€§</h3><p><strong>åˆ†å¸ƒå¼æ¡ä»¶ç±»å‹æ ¸å¿ƒæ¦‚å¿µ</strong></p>
<p>è§¦å‘æ¡ä»¶ï¼šå½“æ¡ä»¶ç±»å‹ä½œç”¨äºè£¸ç±»å‹å‚æ•°ï¼ˆnaked type parameterï¼‰çš„è”åˆç±»å‹æ—¶ï¼Œä¼šè§¦å‘åˆ†å¸ƒå¼è¡Œä¸º</p>
<p>åŸºæœ¬æ¨¡å¼ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript">T <span class="hljs-keyword">extends</span> U ? X : Y<br></code></pre></td></tr></table></figure>

<ul>
<li>T æ˜¯è£¸ç±»å‹å‚æ•°ï¼ˆæœªåŒ…è£¹åœ¨æ•°ç»„ã€å…ƒç»„æˆ–å‡½æ•°ä¸­ï¼‰</li>
<li>T æ˜¯è”åˆç±»å‹ A | B | C</li>
<li>ç»“æœç­‰ä»·äº (A extends U ? X : Y) | (B extends U ? X : Y) | (C extends U ? X : Y)</li>
</ul>
<p><strong>åˆ†å¸ƒå¼è¡Œä¸ºè§£æ</strong></p>
<ol>
<li>åŸºç¡€ç¤ºä¾‹ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">StringOrNumber</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> ? <span class="hljs-string">&quot;string&quot;</span> : <span class="hljs-string">&quot;number&quot;</span>;<br><br><span class="hljs-comment">// åˆ†å¸ƒå¼è®¡ç®—</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Result</span> = <span class="hljs-title class_">StringOrNumber</span>&lt;<span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-number">1</span>&gt;; <br><span class="hljs-comment">// ç­‰ä»·äºï¼š</span><br><span class="hljs-comment">// (&quot;a&quot; extends string ? &quot;string&quot; : &quot;number&quot;) |</span><br><span class="hljs-comment">// (1 extends string ? &quot;string&quot; : &quot;number&quot;)</span><br><span class="hljs-comment">// â†’ &quot;string&quot; | &quot;number&quot;</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>éåˆ†å¸ƒå¼å¯¹æ¯”ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åŒ…è£¹ç±»å‹å‚æ•°ï¼ˆéè£¸ç±»å‹ï¼‰</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Wrapped</span>&lt;T&gt; = [T] <span class="hljs-keyword">extends</span> [<span class="hljs-built_in">string</span>] ? <span class="hljs-string">&quot;string&quot;</span> : <span class="hljs-string">&quot;number&quot;</span>;<br><br><span class="hljs-comment">// éåˆ†å¸ƒå¼è®¡ç®—</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Result2</span> = <span class="hljs-title class_">Wrapped</span>&lt;<span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-number">1</span>&gt;;<br><span class="hljs-comment">// ç­‰ä»·äºï¼š</span><br><span class="hljs-comment">// [&quot;a&quot; | 1] extends [string] ? &quot;string&quot; : &quot;number&quot;</span><br><span class="hljs-comment">// â†’ &quot;number&quot;ï¼ˆå› ä¸º [&quot;a&quot; | 1] ä¸ç»§æ‰¿ [string]ï¼‰</span><br></code></pre></td></tr></table></figure>

<p><strong>åˆ†å¸ƒå¼è§„åˆ™è¯¦è§£</strong></p>
<ol>
<li>ç©ºè”åˆç±»å‹å¤„ç†ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Test</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Result</span> = <span class="hljs-title class_">Test</span>&lt;<span class="hljs-built_in">never</span>&gt;; <span class="hljs-comment">// neverï¼ˆç©ºè”åˆç±»å‹è¿”å›neverï¼‰</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>è”åˆç±»å‹åŒ…å«neverï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Test</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Result</span> = <span class="hljs-title class_">Test</span>&lt;<span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-built_in">never</span>&gt;; <span class="hljs-comment">// trueï¼ˆneverè¢«å¿½ç•¥ï¼‰</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>è”åˆç±»å‹ä¼˜å…ˆçº§ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Test</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span> ? T : <span class="hljs-built_in">never</span>;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Result</span> = <span class="hljs-title class_">Test</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// string | number</span><br></code></pre></td></tr></table></figure>

<p><strong>å†…ç½®å·¥å…·ç±»å‹åº”ç”¨</strong></p>
<ol>
<li><code>Exclude&lt;T, U&gt;</code>ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Exclude</span>&lt;T, U&gt; = T <span class="hljs-keyword">extends</span> U ? <span class="hljs-built_in">never</span> : T;<br><br><span class="hljs-comment">// åˆ†å¸ƒå¼è®¡ç®—</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Result</span> = <span class="hljs-title class_">Exclude</span>&lt;<span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-string">&quot;b&quot;</span> | <span class="hljs-string">&quot;c&quot;</span>, <span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-string">&quot;b&quot;</span>&gt;;<br><span class="hljs-comment">// â†’ (&quot;a&quot; extends &quot;a&quot;|&quot;b&quot; ? never : &quot;a&quot;) |</span><br><span class="hljs-comment">//   (&quot;b&quot; extends &quot;a&quot;|&quot;b&quot; ? never : &quot;b&quot;) |</span><br><span class="hljs-comment">//   (&quot;c&quot; extends &quot;a&quot;|&quot;b&quot; ? never : &quot;c&quot;)</span><br><span class="hljs-comment">// â†’ never | never | &quot;c&quot; â†’ &quot;c&quot;</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li><code>Extract&lt;T, U&gt;</code>ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Extract</span>&lt;T, U&gt; = T <span class="hljs-keyword">extends</span> U ? T : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// åˆ†å¸ƒå¼è®¡ç®—</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Result</span> = <span class="hljs-title class_">Extract</span>&lt;<span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-string">&quot;b&quot;</span> | <span class="hljs-number">1</span>, <span class="hljs-built_in">string</span>&gt;;<br><span class="hljs-comment">// â†’ (&quot;a&quot; extends string ? &quot;a&quot; : never) |</span><br><span class="hljs-comment">//   (&quot;b&quot; extends string ? &quot;b&quot; : never) |</span><br><span class="hljs-comment">//   (1 extends string ? 1 : never)</span><br><span class="hljs-comment">// â†’ &quot;a&quot; | &quot;b&quot; | never â†’ &quot;a&quot; | &quot;b&quot;</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li><code>NonNullable&lt;T&gt;</code>ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">NonNullable</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span> ? <span class="hljs-built_in">never</span> : T;<br><br><span class="hljs-comment">// åˆ†å¸ƒå¼è®¡ç®—</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Result</span> = <span class="hljs-title class_">NonNullable</span>&lt;<span class="hljs-built_in">string</span> | <span class="hljs-literal">null</span> | <span class="hljs-literal">undefined</span>&gt;;<br><span class="hljs-comment">// â†’ (string extends null|undefined ? never : string) |</span><br><span class="hljs-comment">//   (null extends null|undefined ? never : null) |</span><br><span class="hljs-comment">//   (undefined extends null|undefined ? never : undefined)</span><br><span class="hljs-comment">// â†’ string | never | never â†’ string</span><br></code></pre></td></tr></table></figure>

<p><strong>é¿å…åˆ†å¸ƒå¼è¡Œä¸º</strong></p>
<ol>
<li>åŒ…è£¹ç±»å‹å‚æ•°ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ–¹æ³•1ï¼šå…ƒç»„åŒ…è£¹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">NoDistribute</span>&lt;T&gt; = [T] <span class="hljs-keyword">extends</span> [<span class="hljs-built_in">string</span>] ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;<br><br><span class="hljs-comment">// æ–¹æ³•2ï¼šæ•°ç»„åŒ…è£¹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">NoDistribute2</span>&lt;T&gt; = T[] <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>[] ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;<br><br><span class="hljs-comment">// æ–¹æ³•3ï¼šå‡½æ•°åŒ…è£¹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">NoDistribute3</span>&lt;T&gt; = (<span class="hljs-function">() =&gt;</span> T) <span class="hljs-title function_">extends</span> () =&gt; <span class="hljs-built_in">string</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>ç‰¹æ®Šç±»å‹çº¦æŸï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä½¿ç”¨neverçº¦æŸ</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">IsNever</span>&lt;T&gt; = [T] <span class="hljs-keyword">extends</span> [<span class="hljs-built_in">never</span>] ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨anyçº¦æŸ</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">IsAny</span>&lt;T&gt; = <span class="hljs-number">0</span> <span class="hljs-title function_">extends</span> (<span class="hljs-number">1</span> &amp; T) ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;<br></code></pre></td></tr></table></figure>

<p><strong>é«˜çº§åº”ç”¨åœºæ™¯</strong></p>
<ol>
<li>è”åˆç±»å‹è¿‡æ»¤ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// è¿‡æ»¤å‡ºå‡½æ•°ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">FilterFunctions</span>&lt;T&gt; = T <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]) =&gt; <span class="hljs-built_in">any</span> ? T : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Functions</span> = <span class="hljs-title class_">FilterFunctions</span>&lt;<span class="hljs-built_in">string</span> | (<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>) | <span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// () =&gt; void</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>ç±»å‹å·®å¼‚æ£€æµ‹ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ£€æµ‹ç±»å‹å·®å¼‚</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Diff</span>&lt;T, U&gt; = T <span class="hljs-keyword">extends</span> U ? <span class="hljs-built_in">never</span> : T;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">MissingProps</span> = <span class="hljs-title class_">Diff</span>&lt;<span class="hljs-string">&quot;name&quot;</span> | <span class="hljs-string">&quot;age&quot;</span>, keyof <span class="hljs-title class_">User</span>&gt;; <span class="hljs-comment">// Userä¸­ç¼ºå¤±çš„å±æ€§</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>é€’å½’ç±»å‹æ“ä½œï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// è”åˆç±»å‹è½¬å…ƒç»„ï¼ˆç®€åŒ–ç‰ˆï¼‰</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">UnionToTuple</span>&lt;T&gt; = <br>  T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span> ? <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">arg</span>: T</span>) =&gt;</span> <span class="hljs-built_in">void</span> : <span class="hljs-built_in">never</span> <span class="hljs-title function_">extends</span> (<span class="hljs-attr">arg</span>: infer U) =&gt; <span class="hljs-built_in">void</span> ? U : <span class="hljs-built_in">never</span>;<br></code></pre></td></tr></table></figure>

<p><strong>åˆ†å¸ƒå¼ä¸æ˜ å°„ç±»å‹ç»“åˆ</strong></p>
<ol>
<li>åˆ†å¸ƒå¼é”®åé‡æ˜ å°„ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">AddPrefix</span>&lt;T&gt; = &#123;<br>  [K <span class="hljs-keyword">in</span> keyof T <span class="hljs-keyword">as</span> K <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> ? <span class="hljs-string">`data_<span class="hljs-subst">$&#123;K&#125;</span>`</span> : <span class="hljs-built_in">never</span>]: T[K]<br>&#125;;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Props</span> &#123; <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">value</span>: <span class="hljs-built_in">number</span>; &#125;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">PrefixedProps</span> = <span class="hljs-title class_">AddPrefix</span>&lt;<span class="hljs-title class_">Props</span>&gt;;<br><span class="hljs-comment">// &#123; data_id: string; data_value: number &#125;</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>æ¡ä»¶é”®åè¿‡æ»¤ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä»…ä¿ç•™å­—ç¬¦ä¸²é”®</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">StringKeys</span>&lt;T&gt; = &#123;<br>  [K <span class="hljs-keyword">in</span> keyof T]: K <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> ? K : <span class="hljs-built_in">never</span><br>&#125;[keyof T];<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Keys</span> = <span class="hljs-title class_">StringKeys</span>&lt;&#123; <span class="hljs-number">1</span>: <span class="hljs-built_in">number</span>; <span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-built_in">string</span> &#125;&gt;; <span class="hljs-comment">// &quot;name&quot;</span><br></code></pre></td></tr></table></figure>

<p><strong>ç¼–è¯‘åŸç†é€è§†</strong></p>
<ol>
<li>åˆ†å¸ƒå¼å¤„ç†æµç¨‹ï¼š</li>
</ol>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs text">1. è§£ææ¡ä»¶ç±»å‹ï¼šT extends U ? X : Y<br>2. æ£€æŸ¥Tæ˜¯å¦ä¸ºè£¸ç±»å‹å‚æ•°çš„è”åˆç±»å‹<br>3. è‹¥æ˜¯ï¼Œå¯¹è”åˆç±»å‹æ¯ä¸ªæˆå‘˜è¿›è¡Œç‹¬ç«‹è®¡ç®—<br>4. å°†è®¡ç®—ç»“æœç»„åˆä¸ºæ–°è”åˆç±»å‹<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>ç±»å‹å®ä¾‹åŒ–ä¼˜åŒ–ï¼š<ul>
<li>TSç¼–è¯‘å™¨å¯¹åˆ†å¸ƒå¼æ¡ä»¶ç±»å‹è¿›è¡Œç¼“å­˜ä¼˜åŒ–</li>
<li>ç›¸åŒç±»å‹å‚æ•°çš„è®¡ç®—ç»“æœä¼šè¢«å¤ç”¨</li>
<li>é¿å…é‡å¤è®¡ç®—æå‡æ€§èƒ½</li>
</ul>
</li>
</ol>
<p><strong>å·¥ç¨‹å®è·µæŒ‡å—</strong></p>
<ol>
<li>æ˜ç¡®è®¾è®¡æ„å›¾ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// éœ€è¦åˆ†å‘æ—¶</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Distributed</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span> ? T[] : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// ä¸éœ€è¦åˆ†å‘æ—¶</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">NonDistributed</span>&lt;T&gt; = [T] <span class="hljs-keyword">extends</span> [<span class="hljs-built_in">any</span>] ? T[] : <span class="hljs-built_in">never</span>;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>æ–‡æ¡£æ³¨é‡Šè§„èŒƒï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * æå–æ•°ç»„å…ƒç´ ç±»å‹ï¼ˆåˆ†å‘æ¨¡å¼ï¼‰</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@template</span> <span class="hljs-variable">T</span> - è”åˆç±»å‹æ•°ç»„</span><br><span class="hljs-comment"> * <span class="hljs-doctag">@example</span> </span><br><span class="hljs-comment"> * type Element = ElementType&lt;Array&lt;string&gt; | Array&lt;number&gt;&gt;; // string | number</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ElementType</span>&lt;T&gt; = T <span class="hljs-title function_">extends</span> (infer U)[] ? U : <span class="hljs-built_in">never</span>;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>æ€§èƒ½ç›‘æ§ç­–ç•¥ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å¤æ‚ç±»å‹æ€§èƒ½æµ‹è¯•</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">StressTest</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span> <br>  ? <span class="hljs-string">`prefix_<span class="hljs-subst">$&#123;T &amp; <span class="hljs-built_in">string</span>&#125;</span>_suffix`</span> <br>  : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// æµ‹é‡å®ä¾‹åŒ–æ—¶é—´</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">time</span>(<span class="hljs-string">&quot;type instantiation&quot;</span>);<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Result</span> = <span class="hljs-title class_">StressTest</span>&lt;<span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-string">&quot;b&quot;</span> | ...&gt;; <span class="hljs-comment">// 100+ é¡¹</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">timeEnd</span>(<span class="hljs-string">&quot;type instantiation&quot;</span>);<br></code></pre></td></tr></table></figure>

<ol start="4">
<li>é”™è¯¯å¤„ç†æ¨¡å¼ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å®‰å…¨åˆ†å‘ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">SafeDistribute</span>&lt;T, <span class="hljs-title class_">Fallback</span> = <span class="hljs-built_in">never</span>&gt; = <br>  [T] <span class="hljs-keyword">extends</span> [<span class="hljs-built_in">never</span>] ? <span class="hljs-title class_">Fallback</span> :<br>  T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span> ? <span class="hljs-comment">/* åˆ†å‘é€»è¾‘ */</span> : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Result</span> = <span class="hljs-title class_">SafeDistribute</span>&lt;<span class="hljs-built_in">never</span>, <span class="hljs-string">&quot;empty&quot;</span>&gt;; <span class="hljs-comment">// &quot;empty&quot;</span><br></code></pre></td></tr></table></figure>

<p><strong>åˆ†å¸ƒå¼ç‰¹æ€§ä¸å†…ç½®å·¥å…·</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs text">åˆ†å¸ƒå¼æ¡ä»¶ç±»å‹åº”ç”¨ä½“ç³»<br>â”œâ”€ é›†åˆæ“ä½œ<br>â”‚  â”œâ”€ Excludeï¼ˆå·®é›†ï¼‰<br>â”‚  â”œâ”€ Extractï¼ˆäº¤é›†ï¼‰<br>â”‚  â””â”€ NonNullableï¼ˆè¿‡æ»¤ï¼‰<br>â”‚<br>â”œâ”€ å‡½æ•°æ“ä½œ<br>â”‚  â”œâ”€ Parameters<br>â”‚  â””â”€ ReturnType<br>â”‚<br>â””â”€ é«˜çº§å·¥å…·<br>   â”œâ”€ UnionToIntersection<br>   â””â”€ UnionToTuple<br></code></pre></td></tr></table></figure>

<h3 id="2-1-4-infer-å…³é”®å­—ä¸ç±»å‹æå–"><a href="#2-1-4-infer-å…³é”®å­—ä¸ç±»å‹æå–" class="headerlink" title="2.1.4 infer å…³é”®å­—ä¸ç±»å‹æå–"></a>2.1.4 infer å…³é”®å­—ä¸ç±»å‹æå–</h3><p><strong>infer åŸºç¡€æ¦‚å¿µ</strong></p>
<p>æ ¸å¿ƒåŠŸèƒ½ï¼šåœ¨æ¡ä»¶ç±»å‹ä¸­å£°æ˜æ³›å‹ç±»å‹å˜é‡ï¼Œç”¨äºæ¨å¯¼å’Œæ•è·ç±»å‹ä¿¡æ¯</p>
<p>åŸºæœ¬è¯­æ³•ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs typescript">T <span class="hljs-keyword">extends</span> infer U ? U : <span class="hljs-built_in">never</span><br></code></pre></td></tr></table></figure>

<ul>
<li>infer U å£°æ˜ä¸€ä¸ªç±»å‹å˜é‡ U</li>
<li>U çš„ç±»å‹ç”± TypeScript æ ¹æ®ä¸Šä¸‹æ–‡æ¨å¯¼</li>
</ul>
<p>ä½ç½®çº¦æŸï¼š</p>
<ul>
<li>åªèƒ½åœ¨æ¡ä»¶ç±»å‹çš„ extends å­å¥ä¸­ä½¿ç”¨</li>
<li>åªèƒ½å‡ºç°åœ¨åå˜ä½ç½®ï¼ˆè¿”å›å€¼ã€å±æ€§å€¼ç­‰ï¼‰</li>
</ul>
<p><strong>åŸºç¡€æå–æ¨¡å¼</strong></p>
<ol>
<li>æå–å‡½æ•°è¿”å›ç±»å‹ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ReturnType</span>&lt;T&gt; = <br>  T <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]) =&gt; infer R ? R : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">FnReturn</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">number</span>&gt;; <span class="hljs-comment">// number</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>æå–å‡½æ•°å‚æ•°ç±»å‹ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">FirstParam</span>&lt;T&gt; = <br>  T <span class="hljs-title function_">extends</span> (<span class="hljs-attr">first</span>: infer P, ...<span class="hljs-attr">rest</span>: <span class="hljs-built_in">any</span>[]) =&gt; <span class="hljs-built_in">any</span> ? P : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Param</span> = <span class="hljs-title class_">FirstParam</span>&lt;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>&gt;; <span class="hljs-comment">// string</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>æå–æ•°ç»„å…ƒç´ ç±»å‹ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ArrayElement</span>&lt;T&gt; = <br>  T <span class="hljs-title function_">extends</span> (infer U)[] ? U : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Element</span> = <span class="hljs-title class_">ArrayElement</span>&lt;<span class="hljs-built_in">string</span>[]&gt;; <span class="hljs-comment">// string</span><br></code></pre></td></tr></table></figure>

<p><strong>é«˜çº§æå–æŠ€æœ¯</strong></p>
<ol>
<li>é€’å½’ç±»å‹è§£åŒ…ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// è§£åŒ…åµŒå¥—Promise</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Awaited</span>&lt;T&gt; = <br>  T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Promise</span>&lt;infer U&gt; ? <span class="hljs-title class_">Awaited</span>&lt;U&gt; : T;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Result</span> = <span class="hljs-title class_">Awaited</span>&lt;<span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">string</span>&gt;&gt;&gt;; <span class="hljs-comment">// string</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>å¤šä¸ª infer å˜é‡ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æå–å‡½æ•°å‚æ•°å…ƒç»„</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Params</span>&lt;T&gt; = <br>  T <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: infer P) =&gt; <span class="hljs-built_in">any</span> ? P : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">FnParams</span> = <span class="hljs-title class_">Params</span>&lt;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>&gt;; <span class="hljs-comment">// [string, number]</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>é€†å˜ä½ç½®æå–ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æå–å‡½æ•°thisç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ThisType</span>&lt;T&gt; = <br>  T <span class="hljs-title function_">extends</span> (<span class="hljs-attr">this</span>: infer U, ...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]) =&gt; <span class="hljs-built_in">any</span> ? U : <span class="hljs-built_in">unknown</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">fn</span>(<span class="hljs-params"><span class="hljs-attr">this</span>: <span class="hljs-title class_">Window</span></span>) &#123;&#125;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Context</span> = <span class="hljs-title class_">ThisType</span>&lt;<span class="hljs-keyword">typeof</span> fn&gt;; <span class="hljs-comment">// Window</span><br></code></pre></td></tr></table></figure>

<p><strong>æ¨¡å¼åŒ¹é…æŠ€æœ¯</strong></p>
<ol>
<li>å­—ç¬¦ä¸²æ¨¡æ¿æå–ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æå–æ¨¡æ¿å­—ç¬¦ä¸²å˜é‡</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ExtractVariable</span>&lt;T&gt; = <br>  T <span class="hljs-keyword">extends</span> <span class="hljs-string">`user_<span class="hljs-subst">$&#123;infer Id&#125;</span>`</span> ? <span class="hljs-title class_">Id</span> : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">UserId</span> = <span class="hljs-title class_">ExtractVariable</span>&lt;<span class="hljs-string">&quot;user_123&quot;</span>&gt;; <span class="hljs-comment">// &quot;123&quot;</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>å¯¹è±¡é”®å€¼æå–ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æå–ç‰¹å®šé”®çš„å€¼ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ValueOfKey</span>&lt;T, K <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt; = <br>  T <span class="hljs-keyword">extends</span> &#123; [key <span class="hljs-keyword">in</span> K]: infer V &#125; ? V : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">NameType</span> = <span class="hljs-title class_">ValueOfKey</span>&lt;&#123; <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span> &#125;, <span class="hljs-string">&quot;name&quot;</span>&gt;; <span class="hljs-comment">// string</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>æ¡ä»¶åˆ†æ”¯æå–ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æå–æ»¡è¶³æ¡ä»¶çš„å­ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ExtractByType</span>&lt;T, U&gt; = <br>  T <span class="hljs-keyword">extends</span> U ? T : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Strings</span> = <span class="hljs-title class_">ExtractByType</span>&lt;<span class="hljs-string">&quot;a&quot;</span> | <span class="hljs-number">1</span> | <span class="hljs-literal">true</span>, <span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// &quot;a&quot;</span><br></code></pre></td></tr></table></figure>

<p><strong>å†…ç½®å·¥å…·ç±»å‹è§£æ</strong></p>
<ol>
<li><code>Parameters&lt;T&gt;</code> å®ç°ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Parameters</span>&lt;T <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span>&gt; = <br>  T <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: infer P) =&gt; <span class="hljs-built_in">any</span> ? P : <span class="hljs-built_in">never</span>;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li><code>ReturnType&lt;T&gt;</code> å®ç°ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ReturnType</span>&lt;T <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span>&gt; = <br>  T <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; infer R ? R : <span class="hljs-built_in">any</span>;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li><code>ConstructorParameters&lt;T&gt;</code> å®ç°ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ConstructorParameters</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title function_">new</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span>&gt; = <br>  T <span class="hljs-keyword">extends</span> <span class="hljs-title function_">new</span> (...<span class="hljs-attr">args</span>: infer P) =&gt; <span class="hljs-built_in">any</span> ? P : <span class="hljs-built_in">never</span>;<br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹åº”ç”¨æ¨¡å¼</strong></p>
<ol>
<li>ç»„ä»¶ Props æå–ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æå–Reactç»„ä»¶Propsç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ComponentProps</span>&lt;T&gt; = <br>  T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">React</span>.<span class="hljs-property">ComponentType</span>&lt;infer P&gt; ? P : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">MyComponent</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">FC</span>&lt;&#123; <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span> &#125;&gt; = <span class="hljs-function">() =&gt;</span> <span class="hljs-literal">null</span>;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Props</span> = <span class="hljs-title class_">ComponentProps</span>&lt;<span class="hljs-keyword">typeof</span> <span class="hljs-title class_">MyComponent</span>&gt;; <span class="hljs-comment">// &#123; id: string &#125;</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>API å“åº”å¤„ç†ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æå–APIå“åº”ä¸­çš„dataå­—æ®µ</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ApiResponse</span>&lt;T&gt; = &#123;<br>  <span class="hljs-attr">data</span>: T;<br>  <span class="hljs-attr">status</span>: <span class="hljs-built_in">number</span>;<br>&#125;;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ResponseData</span>&lt;T&gt; = <br>  T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">ApiResponse</span>&lt;infer D&gt; ? D : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">UserData</span> = <span class="hljs-title class_">ResponseData</span>&lt;<span class="hljs-title class_">ApiResponse</span>&lt;&#123; <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span> &#125;&gt;&gt;; <span class="hljs-comment">// &#123; name: string &#125;</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>è·¯ç”±å‚æ•°æå–ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æå–åŠ¨æ€è·¯ç”±å‚æ•°</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">RouteParams</span>&lt;T&gt; = <br>  T <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">string</span>&#125;</span>/:<span class="hljs-subst">$&#123;infer Param&#125;</span>/<span class="hljs-subst">$&#123;<span class="hljs-built_in">string</span>&#125;</span>`</span> <br>    ? <span class="hljs-title class_">Param</span> | <span class="hljs-title class_">RouteParams</span>&lt;T&gt; <br>    : T <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">string</span>&#125;</span>/:<span class="hljs-subst">$&#123;infer Param&#125;</span>`</span> <br>      ? <span class="hljs-title class_">Param</span> <br>      : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Params</span> = <span class="hljs-title class_">RouteParams</span>&lt;<span class="hljs-string">&quot;/user/:id/profile/:section&quot;</span>&gt;; <span class="hljs-comment">// &quot;id&quot; | &quot;section&quot;</span><br></code></pre></td></tr></table></figure>

<p><strong>ç¼–è¯‘åŸç†é€è§†</strong></p>
<ol>
<li>infer å®ç°æœºåˆ¶ï¼š<ul>
<li>ç±»å‹ç³»ç»Ÿå®ç°æ¨¡å¼åŒ¹é…</li>
<li>åœ¨ç±»å‹å…³ç³»æ±‚è§£æ—¶ç»‘å®šç±»å‹å˜é‡</li>
<li>åŸºäºçº¦æŸçš„ç±»å‹å˜é‡å®ä¾‹åŒ–</li>
</ul>
</li>
<li>ç±»å‹æ¨å¯¼è¿‡ç¨‹ï¼š</li>
</ol>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs text">1. åŒ¹é…æ¡ä»¶ç±»å‹ç»“æ„<br>2. æå–å€™é€‰ç±»å‹<br>3. ç»‘å®š infer å˜é‡<br>4. éªŒè¯ç±»å‹çº¦æŸ<br>5. å®ä¾‹åŒ–ç»“æœç±»å‹<br></code></pre></td></tr></table></figure>

<p><strong>æœ€ä½³å®è·µæŒ‡å—</strong></p>
<ol>
<li>ç±»å‹å˜é‡å‘½åè§„èŒƒï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ¨èï¼šæè¿°æ€§å‘½å</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ExtractReturn</span>&lt;T&gt; = <br>  T <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; infer <span class="hljs-title class_">ReturnType</span> ? <span class="hljs-title class_">ReturnType</span> : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// é¿å…ï¼šå•å­—æ¯å‘½å</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Bad</span>&lt;T&gt; = T <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">a</span>: <span class="hljs-built_in">any</span>) =&gt; infer R ? R : <span class="hljs-built_in">never</span>;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>é”™è¯¯å¤„ç†æ¨¡å¼ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å®‰å…¨æå–æ¨¡å¼</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">SafeExtract</span>&lt;T, <span class="hljs-title class_">Fallback</span> = <span class="hljs-built_in">never</span>&gt; = <br>  T <span class="hljs-keyword">extends</span> &#123; [<span class="hljs-attr">key</span>: <span class="hljs-built_in">string</span>]: infer V &#125; ? V : <span class="hljs-title class_">Fallback</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Value</span> = <span class="hljs-title class_">SafeExtract</span>&lt;<span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// never</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>å¤æ‚ç±»å‹åˆ†è§£ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åˆ†è§£å¤æ‚æå–é€»è¾‘</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Step1</span>&lt;T&gt; = <span class="hljs-comment">/* ... */</span>;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Step2</span>&lt;T&gt; = <span class="hljs-title class_">Step1</span>&lt;T&gt; <span class="hljs-keyword">extends</span> infer U ? <span class="hljs-comment">/* ... */</span> : <span class="hljs-built_in">never</span>;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Final</span>&lt;T&gt; = <span class="hljs-title class_">Step2</span>&lt;T&gt; <span class="hljs-keyword">extends</span> infer V ? <span class="hljs-comment">/* ... */</span> : <span class="hljs-built_in">never</span>;<br></code></pre></td></tr></table></figure>

<ol start="4">
<li>ç±»å‹æµ‹è¯•ç­–ç•¥ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä½¿ç”¨ç±»å‹æ–­è¨€éªŒè¯</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Assert</span>&lt;T, <span class="hljs-title class_">Expected</span>&gt; = <br>  T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Expected</span> ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span>;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Test1</span> = <span class="hljs-title class_">Assert</span>&lt;<span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">string</span>&gt;, <span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// true</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Test2</span> = <span class="hljs-title class_">Assert</span>&lt;<span class="hljs-title class_">FirstParam</span>&lt;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>&gt;, <span class="hljs-built_in">string</span>&gt;; <span class="hljs-comment">// false</span><br></code></pre></td></tr></table></figure>

<p><strong>infer ç±»å‹å…³ç³»å›¾</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs text">infer åº”ç”¨ä½“ç³»<br>â”œâ”€ åŸºç¡€æå–<br>â”‚  â”œâ”€ å‡½æ•°è¿”å›å€¼ â†’ ReturnType<br>â”‚  â”œâ”€ å‡½æ•°å‚æ•° â†’ Parameters<br>â”‚  â””â”€ æ•°ç»„å…ƒç´  â†’ ArrayElement<br>â”‚<br>â”œâ”€ æ¨¡å¼åŒ¹é…<br>â”‚  â”œâ”€ å­—ç¬¦ä¸²æ¨¡æ¿ â†’ ExtractVariable<br>â”‚  â”œâ”€ å¯¹è±¡ç»“æ„ â†’ ValueOfKey<br>â”‚  â””â”€ æ¡ä»¶åˆ†æ”¯ â†’ ExtractByType<br>â”‚<br>â””â”€ é«˜çº§ä½“æ“<br>   â”œâ”€ å…ƒç»„è½¬æ¢ â†’ MapTuple<br>   â”œâ”€ æŸ¯é‡ŒåŒ– â†’ Curry<br>   â””â”€ é€’å½’å±•å¼€ â†’ Expand<br></code></pre></td></tr></table></figure>

<h2 id="2-2-ç±»å‹ä½“æ“å®æˆ˜"><a href="#2-2-ç±»å‹ä½“æ“å®æˆ˜" class="headerlink" title="2.2 ç±»å‹ä½“æ“å®æˆ˜"></a>2.2 ç±»å‹ä½“æ“å®æˆ˜</h2><h3 id="2-2-1-å‡½æ•°æŸ¯é‡ŒåŒ–ç±»å‹å®šä¹‰"><a href="#2-2-1-å‡½æ•°æŸ¯é‡ŒåŒ–ç±»å‹å®šä¹‰" class="headerlink" title="2.2.1 å‡½æ•°æŸ¯é‡ŒåŒ–ç±»å‹å®šä¹‰"></a>2.2.1 å‡½æ•°æŸ¯é‡ŒåŒ–ç±»å‹å®šä¹‰</h3><p><strong>æŸ¯é‡ŒåŒ–æ ¸å¿ƒæ¦‚å¿µ</strong></p>
<ul>
<li>æŸ¯é‡ŒåŒ–ï¼ˆCurryingï¼‰ï¼šå°†å¤šå‚æ•°å‡½æ•°è½¬åŒ–ä¸ºä¸€ç³»åˆ—å•å‚æ•°å‡½æ•°çš„è¿‡ç¨‹</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åŸå§‹å‡½æ•°</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">add</span> = (<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">c</span>: <span class="hljs-built_in">number</span></span>) =&gt; a + b + c;<br><br><span class="hljs-comment">// æŸ¯é‡ŒåŒ–å</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">curriedAdd</span> = (<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span></span>) =&gt; <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">c</span>: <span class="hljs-built_in">number</span></span>) =&gt;</span> a + b + c;<br></code></pre></td></tr></table></figure>

<ul>
<li>ç±»å‹æŒ‘æˆ˜ï¼š<ul>
<li>åŠ¨æ€æ¨å¯¼å‰©ä½™å‚æ•°ç±»å‹</li>
<li>å¤„ç†å‚æ•°æ•°é‡ä¸ç¡®å®šçš„æƒ…å†µ</li>
<li>ä¿æŒè¿”å›å‡½æ•°çš„é“¾å¼è°ƒç”¨ç±»å‹å®‰å…¨</li>
</ul>
</li>
</ul>
<p><strong>åŸºç¡€æŸ¯é‡ŒåŒ–ç±»å‹å®ç°</strong></p>
<p>åœºæ™¯1ï¼šå›ºå®šå‚æ•°é•¿åº¦çš„æŸ¯é‡ŒåŒ–</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Curry1</span>&lt;T&gt; = T <span class="hljs-title function_">extends</span> (<span class="hljs-attr">a</span>: infer A) =&gt; infer R ? <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">a</span>: A</span>) =&gt;</span> R : <span class="hljs-built_in">never</span>;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Curry2</span>&lt;T&gt; = T <span class="hljs-title function_">extends</span> (<span class="hljs-attr">a</span>: infer A, <span class="hljs-attr">b</span>: infer B) =&gt; infer R <br>  ? <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">a</span>: A</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">b</span>: B</span>) =&gt;</span> R <br>  : <span class="hljs-built_in">never</span>;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Curry3</span>&lt;T&gt; = T <span class="hljs-title function_">extends</span> (<span class="hljs-attr">a</span>: infer A, <span class="hljs-attr">b</span>: infer B, <span class="hljs-attr">c</span>: infer C) =&gt; infer R <br>  ? <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">a</span>: A</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">b</span>: B</span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">c</span>: C</span>) =&gt;</span> R <br>  : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">function</span> curry&lt;T&gt;(<span class="hljs-attr">fn</span>: T): <br>  T <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span> ? <span class="hljs-title class_">Curry3</span>&lt;T&gt; : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-keyword">const</span> curriedAdd = <span class="hljs-title function_">curry</span>(add); <span class="hljs-comment">// ç±»å‹: (a: number) =&gt; (b: number) =&gt; (c: number) =&gt; number</span><br></code></pre></td></tr></table></figure>

<p>åœºæ™¯2ï¼šåŠ¨æ€å‚æ•°é•¿åº¦çš„æŸ¯é‡ŒåŒ–</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Curry</span>&lt;F&gt; = F <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: infer <span class="hljs-title class_">Args</span>) =&gt; infer <span class="hljs-title class_">Return</span><br>  ? <span class="hljs-title class_">Args</span> <span class="hljs-keyword">extends</span> [infer <span class="hljs-title class_">First</span>, ...infer <span class="hljs-title class_">Rest</span>]<br>    ? <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">arg</span>: <span class="hljs-title class_">First</span></span>) =&gt;</span> <span class="hljs-title class_">Curry</span>&lt;<span class="hljs-function">(<span class="hljs-params">...<span class="hljs-attr">args</span>: <span class="hljs-title class_">Rest</span></span>) =&gt;</span> <span class="hljs-title class_">Return</span>&gt;<br>    : <span class="hljs-title class_">Return</span> <span class="hljs-comment">// ç»ˆæ­¢æ¡ä»¶ï¼šæ— å‰©ä½™å‚æ•°</span><br>  : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span><br><span class="hljs-keyword">const</span> dynamicCurry = &lt;F <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-built_in">any</span>&gt;(<span class="hljs-attr">fn</span>: F): <span class="hljs-title class_">Curry</span>&lt;F&gt; =&gt; &#123;<br>  <span class="hljs-comment">// å®ç°ç•¥...</span><br>&#125;;<br><br><span class="hljs-keyword">const</span> curried = <span class="hljs-title function_">dynamicCurry</span>(<span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">c</span>: <span class="hljs-built_in">boolean</span></span>) =&gt;</span> &#123;&#125;);<br><span class="hljs-comment">// ç±»å‹: (arg: string) =&gt; (arg: number) =&gt; (arg: boolean) =&gt; void</span><br></code></pre></td></tr></table></figure>

<p><strong>é«˜çº§æŸ¯é‡ŒåŒ–ç±»å‹æŠ€å·§</strong></p>
<p>æŠ€å·§1ï¼šæ”¯æŒéƒ¨åˆ†åº”ç”¨ï¼ˆPartial Applicationï¼‰</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">PartialCurry</span>&lt;F&gt; = F <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: infer <span class="hljs-title class_">Args</span>) =&gt; infer R<br>  ? &lt;P <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Partial</span>&lt;<span class="hljs-title class_">Args</span>&gt;&gt;<span class="hljs-function">(<span class="hljs-params">...<span class="hljs-attr">args</span>: P</span>) =&gt;</span> <br>      <span class="hljs-title class_">Args</span> <span class="hljs-keyword">extends</span> [...<span class="hljs-title class_">SameLength</span>&lt;P&gt;, ...infer <span class="hljs-title class_">Rest</span>] <br>        ? <span class="hljs-title class_">Rest</span> <span class="hljs-keyword">extends</span> [] <br>          ? R <br>          : <span class="hljs-title class_">PartialCurry</span>&lt;<span class="hljs-function">(<span class="hljs-params">...<span class="hljs-attr">args</span>: <span class="hljs-title class_">Rest</span></span>) =&gt;</span> R&gt;<br>        : <span class="hljs-built_in">never</span><br>  : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span><br><span class="hljs-keyword">const</span> partialAdd = <span class="hljs-title function_">dynamicCurry</span>(add);<br><span class="hljs-keyword">const</span> add10 = <span class="hljs-title function_">partialAdd</span>(<span class="hljs-number">10</span>); <span class="hljs-comment">// ç±»å‹: (b: number) =&gt; (c: number) =&gt; number</span><br></code></pre></td></tr></table></figure>

<p>æŠ€å·§2ï¼šå ä½ç¬¦æ”¯æŒï¼ˆPlaceholderï¼‰</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> _ = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&#x27;placeholder&#x27;</span>);<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Placeholder</span> = <span class="hljs-keyword">typeof</span> _;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">CurryWithPlaceholder</span>&lt;F, <span class="hljs-title class_">Original</span> = F&gt; = <br>  F <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: infer <span class="hljs-title class_">Args</span>) =&gt; infer R<br>    ? &lt;P <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CurryArgs</span>&lt;<span class="hljs-title class_">Args</span>&gt;&gt;<span class="hljs-function">(<span class="hljs-params">...<span class="hljs-attr">args</span>: P</span>) =&gt;</span> <br>        <span class="hljs-title class_">IsComplete</span>&lt;P, <span class="hljs-title class_">Args</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-literal">true</span> <br>          ? R <br>          : <span class="hljs-title class_">CurryWithPlaceholder</span>&lt;<span class="hljs-function">(<span class="hljs-params">...<span class="hljs-attr">args</span>: <span class="hljs-title class_">Remaining</span>&lt;P, <span class="hljs-title class_">Args</span>&gt;</span>) =&gt;</span> R, <span class="hljs-title class_">Original</span>&gt;<br>    : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// å®Œæ•´å®ç°éœ€å®šä¹‰è¾…åŠ©ç±»å‹ï¼š</span><br><span class="hljs-comment">// - CurryArgsï¼šå¤„ç†å ä½ç¬¦çš„å‚æ•°ç±»å‹</span><br><span class="hljs-comment">// - Remainingï¼šè®¡ç®—å‰©ä½™å‚æ•°</span><br><span class="hljs-comment">// - IsCompleteï¼šæ£€æŸ¥å‚æ•°æ˜¯å¦å®Œæ•´</span><br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹å®è·µä¸è¾¹ç•Œå¤„ç†</strong></p>
<p>è¾¹ç•Œæƒ…å†µå¤„ç†æ–¹æ¡ˆï¼š</p>
<table>
<thead>
<tr>
<th align="left">åœºæ™¯</th>
<th align="left">è§£å†³æ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ç©ºå‚æ•°è°ƒç”¨</td>
<td align="left">è¿”å›åŸå§‹å‡½æ•°</td>
</tr>
<tr>
<td align="left">å‚æ•°æ•°é‡è¶…è¿‡åŸå‡½æ•°</td>
<td align="left">ç¼–è¯‘æ—¶æŠ¥é”™</td>
</tr>
<tr>
<td align="left">æ··åˆç±»å‹å‚æ•°</td>
<td align="left">ä½¿ç”¨æ³›å‹çº¦æŸä¿æŒç±»å‹å®‰å…¨</td>
</tr>
<tr>
<td align="left">å¯é€‰å‚æ•°å¤„ç†</td>
<td align="left">ä½¿ç”¨æ¡ä»¶ç±»å‹åˆ¤æ–­å‚æ•°æ˜¯å¦å¿…é¡»</td>
</tr>
</tbody></table>
<p>æ€§èƒ½ä¼˜åŒ–ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// é¿å…æ·±å±‚é€’å½’ï¼ˆé™åˆ¶å‚æ•°æœ€å¤§æ•°é‡ï¼‰</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">MaxParams</span> = <span class="hljs-number">8</span>; <span class="hljs-comment">// æ ¹æ®å®é™…éœ€æ±‚è®¾å®š</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">SafeCurry</span>&lt;F, <span class="hljs-title class_">Depth</span> <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span> = <span class="hljs-number">0</span>&gt; = <br>  <span class="hljs-title class_">Depth</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">MaxParams</span> <br>    ? F <span class="hljs-comment">// è¾¾åˆ°æ·±åº¦é™åˆ¶æ—¶ç»ˆæ­¢</span><br>    : F <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: infer <span class="hljs-title class_">Args</span>) =&gt; infer R<br>      ? <span class="hljs-title class_">Args</span> <span class="hljs-keyword">extends</span> [infer <span class="hljs-title class_">First</span>, ...infer <span class="hljs-title class_">Rest</span>]<br>        ? <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">arg</span>: <span class="hljs-title class_">First</span></span>) =&gt;</span> <span class="hljs-title class_">SafeCurry</span>&lt;<span class="hljs-function">(<span class="hljs-params">...<span class="hljs-attr">args</span>: <span class="hljs-title class_">Rest</span></span>) =&gt;</span> R, <span class="hljs-title class_">Add</span>&lt;<span class="hljs-title class_">Depth</span>, <span class="hljs-number">1</span>&gt;&gt;<br>        : R<br>      : <span class="hljs-built_in">never</span>;<br></code></pre></td></tr></table></figure>

<p><strong>é¢è¯•çº§è€ƒç‚¹</strong></p>
<ul>
<li>ç±»å‹é€’å½’æ·±åº¦é™åˆ¶ï¼šTypeScript é»˜è®¤é€’å½’æ·±åº¦é™åˆ¶ï¼ˆçº¦50å±‚ï¼‰</li>
<li>æ¡ä»¶ç±»å‹åˆ†å‘æœºåˆ¶ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// è”åˆç±»å‹åœ¨æ¡ä»¶ç±»å‹ä¸­çš„åˆ†å‘è¡Œä¸º</span><br><span class="hljs-keyword">type</span> T = [<span class="hljs-built_in">string</span>] | [<span class="hljs-built_in">number</span>] <span class="hljs-keyword">extends</span> [infer A] ? A : <span class="hljs-built_in">never</span>;<br><span class="hljs-comment">// ç»“æœ: string | number</span><br></code></pre></td></tr></table></figure>

<ul>
<li>å‚æ•°é€†å˜é—®é¢˜ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-keyword">function</span> curry&lt;P <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span>[], R&gt;(<span class="hljs-attr">fn</span>: <span class="hljs-function">(<span class="hljs-params">...<span class="hljs-attr">args</span>: P</span>) =&gt;</span> R): <br>  &lt;A <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Partial</span>&lt;P&gt;&gt;<span class="hljs-function">(<span class="hljs-params">...<span class="hljs-attr">args</span>: A</span>) =&gt;</span> <span class="hljs-built_in">unknown</span>; <span class="hljs-comment">// éœ€è¦å¤„ç†é€†å˜</span><br></code></pre></td></tr></table></figure>

<ul>
<li>å®é™…åº”ç”¨åœºæ™¯ï¼š<ul>
<li>Redux çš„ connect å‡½æ•°</li>
<li>React çš„é«˜é˜¶ç»„ä»¶</li>
<li>é…ç½®åŒ–è¡¨å•éªŒè¯é“¾</li>
</ul>
</li>
</ul>
<h3 id="2-2-2-Promise-é“¾å¼è°ƒç”¨ç±»å‹æ¨å¯¼"><a href="#2-2-2-Promise-é“¾å¼è°ƒç”¨ç±»å‹æ¨å¯¼" class="headerlink" title="2.2.2 Promise é“¾å¼è°ƒç”¨ç±»å‹æ¨å¯¼"></a>2.2.2 Promise é“¾å¼è°ƒç”¨ç±»å‹æ¨å¯¼</h3><p><strong>æ ¸å¿ƒç±»å‹æŒ‘æˆ˜</strong></p>
<table>
<thead>
<tr>
<th align="left">é—®é¢˜</th>
<th align="left">ç±»å‹è¡¨ç°</th>
<th align="left">è§£å†³æ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody><tr>
<td align="left">åˆå§‹å€¼ç±»å‹ä¸¢å¤±</td>
<td align="left"><code>Promise.resolve(42).then(v =&gt; v) â†’ v: unknown</code></td>
<td align="left">æ³›å‹æ•è·åˆå§‹ç±»å‹</td>
</tr>
<tr>
<td align="left">é“¾å¼è¿”å›å€¼ç±»å‹æ¨å¯¼</td>
<td align="left"><code>.then(x =&gt; x.toFixed())</code> â†’ æ¨å¯¼å¤±è´¥</td>
<td align="left">æ¡ä»¶ç±»å‹ + å‡½æ•°è¿”å›å€¼æ¨æ–­</td>
</tr>
<tr>
<td align="left">é”™è¯¯ç±»å‹ä¼ é€’ä¸­æ–­</td>
<td align="left"><code>.catch(e =&gt; e.message)</code> â†’ e: any</td>
<td align="left">æ³›å‹çº¦æŸé”™è¯¯ç±»å‹</td>
</tr>
<tr>
<td align="left">åŒæ­¥&#x2F;å¼‚æ­¥æ··åˆé“¾</td>
<td align="left"><code>Promise.resolve().then(() =&gt; 42)</code> â†’ ç±»å‹æ–­è£‚</td>
<td align="left">é€’å½’è§£åŒ… Promise åµŒå¥—</td>
</tr>
</tbody></table>
<p><strong>åŸºç¡€é“¾å¼è°ƒç”¨ç±»å‹å®ç°</strong></p>
<p>åœºæ™¯1ï¼šåŸºç¡€ Promise ç±»å‹å®šä¹‰</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyPromise</span>&lt;T&gt; &#123;<br>  then&lt;U&gt;(<br>    <span class="hljs-attr">onFulfilled</span>?: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">value</span>: T</span>) =&gt;</span> U | <span class="hljs-title class_">PromiseLike</span>&lt;U&gt;<br>  ): <span class="hljs-title class_">MyPromise</span>&lt;U&gt;;<br>  <br>  <span class="hljs-keyword">catch</span>&lt;U&gt;(<br>    <span class="hljs-attr">onRejected</span>?: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">reason</span>: <span class="hljs-built_in">any</span></span>) =&gt;</span> U | <span class="hljs-title class_">PromiseLike</span>&lt;U&gt;<br>  ): <span class="hljs-title class_">MyPromise</span>&lt;T | U&gt;;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">function</span> createPromise&lt;T&gt;(<span class="hljs-attr">executor</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">resolve</span>: (value: T) =&gt; <span class="hljs-built_in">void</span></span>) =&gt;</span> <span class="hljs-title class_">MyPromise</span>&lt;T&gt;;<br></code></pre></td></tr></table></figure>

<p>åœºæ™¯2ï¼šé“¾å¼è¿”å›å€¼ç±»å‹æ¨å¯¼</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">UnwrapPromise</span>&lt;T&gt; = <br>  T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Promise</span>&lt;infer U&gt; ? <span class="hljs-title class_">UnwrapPromise</span>&lt;U&gt; : T;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyPromise</span>&lt;T&gt; &#123;<br>  then&lt;U&gt;(<br>    <span class="hljs-attr">onFulfilled</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">value</span>: T</span>) =&gt;</span> U<br>  ): <span class="hljs-title class_">MyPromise</span>&lt;<span class="hljs-title class_">UnwrapPromise</span>&lt;U&gt;&gt;;<br>&#125;<br><br><span class="hljs-comment">// æµ‹è¯•</span><br><span class="hljs-keyword">const</span> chain = <span class="hljs-title function_">createPromise</span>(<span class="hljs-number">42</span>)<br>  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> v.<span class="hljs-title function_">toFixed</span>())    <span class="hljs-comment">// v: number â†’ string</span><br>  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">s</span> =&gt;</span> <span class="hljs-built_in">parseInt</span>(s));   <span class="hljs-comment">// s: string â†’ number</span><br></code></pre></td></tr></table></figure>

<p><strong>é«˜çº§é“¾å¼ç±»å‹æŠ€å·§</strong></p>
<p>æŠ€å·§1ï¼šè‡ªåŠ¨è§£åŒ…åµŒå¥— Promise</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">UnwrapPromise</span>&lt;T&gt; = <br>  T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Promise</span>&lt;infer U&gt; ? <span class="hljs-title class_">UnwrapPromise</span>&lt;U&gt; : <br>  T <span class="hljs-title function_">extends</span> (...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>) =&gt; <span class="hljs-title class_">Promise</span>&lt;infer V&gt; ? <span class="hljs-title class_">UnwrapPromise</span>&lt;V&gt; : <br>  T;<br><br><span class="hljs-comment">// å¤„ç†å¤šå±‚åµŒå¥—</span><br><span class="hljs-keyword">const</span> nested = <span class="hljs-title function_">createPromise</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">42</span>)));<br><span class="hljs-comment">// ç±»å‹: MyPromise&lt;number&gt; è€Œé MyPromise&lt;Promise&lt;Promise&lt;number&gt;&gt;&gt;</span><br></code></pre></td></tr></table></figure>

<p>æŠ€å·§2ï¼šé”™è¯¯ç±»å‹çº¦æŸ</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyPromise</span>&lt;T, E = <span class="hljs-title class_">Error</span>&gt; &#123;<br>  <span class="hljs-keyword">catch</span>&lt;U&gt;(<br>    <span class="hljs-attr">onRejected</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">reason</span>: E</span>) =&gt;</span> U<br>  ): <span class="hljs-title class_">MyPromise</span>&lt;T | <span class="hljs-title class_">UnwrapPromise</span>&lt;U&gt;, E&gt;;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br>createPromise&lt;<span class="hljs-built_in">number</span>, <span class="hljs-title class_">RangeError</span>&gt;(...)<br>  .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> e.<span class="hljs-property">message</span>)  <span class="hljs-comment">// e: RangeError â†’ string</span><br></code></pre></td></tr></table></figure>

<p>æŠ€å·§3ï¼šé™æ€æ–¹æ³•ç±»å‹åŒ–</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">MyPromise</span> &#123;<br>  <span class="hljs-keyword">static</span> resolve&lt;T&gt;(<span class="hljs-attr">value</span>: T): <span class="hljs-title class_">MyPromise</span>&lt;<span class="hljs-title class_">UnwrapPromise</span>&lt;T&gt;&gt;;<br>  <span class="hljs-keyword">static</span> all&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span>[]&gt;(<span class="hljs-attr">values</span>: [...T]): <span class="hljs-title class_">MyPromise</span>&lt;&#123;<br>    [K <span class="hljs-keyword">in</span> keyof T]: <span class="hljs-title class_">UnwrapPromise</span>&lt;T[K]&gt;<br>  &#125;&gt;;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>è¾¹ç•Œæƒ…å†µå¤„ç†</strong></p>
<p>åœºæ™¯1ï¼šç©º then å¤„ç†</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyPromise</span>&lt;T&gt; &#123;<br>  <span class="hljs-title function_">then</span>(): <span class="hljs-title class_">MyPromise</span>&lt;T&gt;;  <span class="hljs-comment">// é€ä¼ å½“å‰ç±»å‹</span><br>  then&lt;U&gt;(<span class="hljs-attr">onFulfilled</span>: <span class="hljs-literal">null</span>, <span class="hljs-attr">onRejected</span>?: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">reason</span>: <span class="hljs-built_in">any</span></span>) =&gt;</span> U): <span class="hljs-title class_">MyPromise</span>&lt;T | U&gt;;<br>&#125;<br><br><span class="hljs-comment">// ç¤ºä¾‹</span><br><span class="hljs-title function_">createPromise</span>(<span class="hljs-number">42</span>)<br>  .<span class="hljs-title function_">then</span>()                <span class="hljs-comment">// ç±»å‹ä»ä¸º MyPromise&lt;number&gt;</span><br>  .<span class="hljs-title function_">then</span>(<span class="hljs-literal">null</span>, <span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> &#123;&#125;);  <span class="hljs-comment">// è·³è¿‡æˆåŠŸå›è°ƒ</span><br></code></pre></td></tr></table></figure>

<p>åœºæ™¯2ï¼šæ··åˆåŒæ­¥&#x2F;å¼‚æ­¥è¿”å›å€¼</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">AsyncValue</span>&lt;T&gt; = T | <span class="hljs-title class_">PromiseLike</span>&lt;T&gt;;<br><span class="hljs-keyword">type</span> <span class="hljs-title class_">UnwrapAsync</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">PromiseLike</span>&lt;infer U&gt; ? U : T;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MyPromise</span>&lt;T&gt; &#123;<br>  then&lt;U&gt;(<br>    <span class="hljs-attr">onFulfilled</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">value</span>: T</span>) =&gt;</span> <span class="hljs-title class_">AsyncValue</span>&lt;U&gt;<br>  ): <span class="hljs-title class_">MyPromise</span>&lt;<span class="hljs-title class_">UnwrapAsync</span>&lt;U&gt;&gt;;<br>&#125;<br><br><span class="hljs-comment">// å¤„ç†åŒæ­¥è¿”å›å€¼</span><br><span class="hljs-title function_">createPromise</span>(<span class="hljs-number">42</span>)<br>  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> v * <span class="hljs-number">2</span>)      <span class="hljs-comment">// åŒæ­¥è¿”å› number â†’ MyPromise&lt;number&gt;</span><br>  .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">v</span> =&gt;</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-title class_">String</span>(v))); <span class="hljs-comment">// å¼‚æ­¥è¿”å› â†’ MyPromise&lt;string&gt;</span><br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹å®è·µä¸é¢è¯•è€ƒç‚¹</strong></p>
<p>Promise ç»„åˆæ¨¡å¼ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 1. race ç±»å‹å®ç°</span><br><span class="hljs-keyword">static</span> race&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span>[]&gt;(<span class="hljs-attr">values</span>: T): <span class="hljs-title class_">MyPromise</span>&lt;<span class="hljs-title class_">UnwrapPromise</span>&lt;T[<span class="hljs-built_in">number</span>]&gt;&gt;;<br><br><span class="hljs-comment">// 2. é¡ºåºæ‰§è¡Œé“¾</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">tasks</span>: (<span class="hljs-function">() =&gt;</span> <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-built_in">number</span>&gt;)[] = [...];<br>tasks.<span class="hljs-title function_">reduce</span>(<span class="hljs-function">(<span class="hljs-params">chain, task</span>) =&gt;</span> <br>  chain.<span class="hljs-title function_">then</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">task</span>()), <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>()<br>);<br></code></pre></td></tr></table></figure>

<p>æ€§èƒ½ä¼˜åŒ–ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// é¿å…æ·±å±‚é€’å½’ç±»å‹ (è®¾ç½®æœ€å¤§è§£åŒ…æ·±åº¦)</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">UnwrapPromiseDeep</span>&lt;T, <span class="hljs-title class_">Depth</span> <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span> = <span class="hljs-number">5</span>&gt; = <br>  <span class="hljs-title class_">Depth</span> <span class="hljs-keyword">extends</span> <span class="hljs-number">0</span> ? T :<br>  T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Promise</span>&lt;infer U&gt; <br>    ? <span class="hljs-title class_">UnwrapPromiseDeep</span>&lt;U, <span class="hljs-title class_">Subtract</span>&lt;<span class="hljs-title class_">Depth</span>, <span class="hljs-number">1</span>&gt;&gt; <br>    : T;<br></code></pre></td></tr></table></figure>

<p>ç»ˆææŒ‘æˆ˜ï¼šå®ç° async&#x2F;await ç±»å‹æ¨å¯¼</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ¨¡æ‹Ÿ async å‡½æ•°è¿”å›ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">AsyncFunction</span>&lt;T&gt; = <span class="hljs-function">(<span class="hljs-params">...<span class="hljs-attr">args</span>: <span class="hljs-built_in">any</span>[]</span>) =&gt;</span> <span class="hljs-title class_">MyPromise</span>&lt;T&gt;;<br><br><span class="hljs-comment">// æ¨¡æ‹Ÿ await ç±»å‹æ¨å¯¼</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Awaited</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">MyPromise</span>&lt;infer U&gt; ? <span class="hljs-title class_">Awaited</span>&lt;U&gt; : T;<br><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">function</span> runAsync&lt;F <span class="hljs-keyword">extends</span> <span class="hljs-title class_">AsyncFunction</span>&lt;<span class="hljs-built_in">any</span>&gt;&gt;(<span class="hljs-attr">fn</span>: F): <br>  <span class="hljs-title class_">ReturnType</span>&lt;F&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">MyPromise</span>&lt;infer R&gt; ? R : <span class="hljs-built_in">never</span>;<br></code></pre></td></tr></table></figure>

<p>é¢è¯•é—®é¢˜ç¤ºä¾‹ï¼š</p>
<p>Qï¼šä¸ºä»€ä¹ˆ <code>Promise&lt;Promise&lt;number&gt;&gt;</code> ä¼šè‡ªåŠ¨æ‰å¹³åŒ–ä¸º <code>Promise&lt;number&gt;</code>ï¼Ÿ</p>
<p>Aï¼šç”± then æ–¹æ³•çš„ç±»å‹å®šä¹‰å†³å®šï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Promise</span>&lt;T&gt; &#123;<br>  then&lt;<span class="hljs-title class_">TResult</span>&gt;(<br>    <span class="hljs-attr">onfulfilled</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">value</span>: T</span>) =&gt;</span> <span class="hljs-title class_">TResult</span> | <span class="hljs-title class_">PromiseLike</span>&lt;<span class="hljs-title class_">TResult</span>&gt;<br>  ): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">TResult</span>&gt;;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å½“ T æœ¬èº«æ˜¯ <code>Promise&lt;U&gt;</code> æ—¶ï¼Œvalue: T å®é™…æ¥æ”¶ <code>Promise&lt;U&gt;</code>ï¼Œä½†è¿”å› <code>TResult | PromiseLike&lt;TResult&gt;</code> ä¼šè¢«å†æ¬¡åŒ…è£…ä¸º <code>Promise&lt;TResult&gt;</code>ï¼Œå½¢æˆé€’å½’è§£åŒ…æ•ˆæœã€‚</p>
<h3 id="2-2-3-Redux-reducer-ç±»å‹å®‰å…¨å®ç°"><a href="#2-2-3-Redux-reducer-ç±»å‹å®‰å…¨å®ç°" class="headerlink" title="2.2.3 Redux reducer ç±»å‹å®‰å…¨å®ç°"></a>2.2.3 Redux reducer ç±»å‹å®‰å…¨å®ç°</h3><p><strong>æ ¸å¿ƒç±»å‹æ¶æ„</strong></p>
<p>Redux ç±»å‹å››è¦ç´ ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 1. çŠ¶æ€ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">State</span> = &#123;<br>  <span class="hljs-attr">counter</span>: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">todos</span>: &#123; <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">completed</span>: <span class="hljs-built_in">boolean</span> &#125;[];<br>&#125;;<br><br><span class="hljs-comment">// 2. Action ç±»å‹ï¼ˆè”åˆç±»å‹ï¼‰</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Action</span> = <br>  | &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;INCREMENT&#x27;</span>; <span class="hljs-attr">payload</span>: <span class="hljs-built_in">number</span> &#125;<br>  | &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;ADD_TODO&#x27;</span>; <span class="hljs-attr">payload</span>: <span class="hljs-built_in">string</span> &#125;<br>  | &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;TOGGLE_TODO&#x27;</span>; <span class="hljs-attr">payload</span>: <span class="hljs-built_in">string</span> &#125;;<br><br><span class="hljs-comment">// 3. Reducer å‡½æ•°ç­¾å</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Reducer</span>&lt;S&gt; = <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">state</span>: S, <span class="hljs-attr">action</span>: <span class="hljs-title class_">Action</span></span>) =&gt;</span> S;<br><br><span class="hljs-comment">// 4. Dispatch ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Dispatch</span> = <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">action</span>: <span class="hljs-title class_">Action</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;<br></code></pre></td></tr></table></figure>

<p><strong>ç±»å‹å®‰å…¨ reducer å®ç°</strong></p>
<p>åŸºç¡€å®ç°ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> <span class="hljs-attr">reducer</span>: <span class="hljs-title class_">Reducer</span>&lt;<span class="hljs-title class_">State</span>&gt; = <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> &#123;<br>  <span class="hljs-keyword">switch</span> (action.<span class="hljs-property">type</span>) &#123;<br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;INCREMENT&#x27;</span>:<br>      <span class="hljs-comment">// âœ… è‡ªåŠ¨æ¨æ–­ payload ä¸º number</span><br>      <span class="hljs-keyword">return</span> &#123; ...state, <span class="hljs-attr">counter</span>: state.<span class="hljs-property">counter</span> + action.<span class="hljs-property">payload</span> &#125;;<br>    <br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;ADD_TODO&#x27;</span>:<br>      <span class="hljs-comment">// âœ… è‡ªåŠ¨æ¨æ–­ payload ä¸º string</span><br>      <span class="hljs-keyword">const</span> newTodo = &#123; <br>        <span class="hljs-attr">id</span>: <span class="hljs-title function_">nanoid</span>(), <br>        <span class="hljs-attr">text</span>: action.<span class="hljs-property">payload</span>, <br>        <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span> <br>      &#125;;<br>      <span class="hljs-keyword">return</span> &#123; ...state, <span class="hljs-attr">todos</span>: [...state.<span class="hljs-property">todos</span>, newTodo] &#125;;<br>    <br>    <span class="hljs-keyword">case</span> <span class="hljs-string">&#x27;TOGGLE_TODO&#x27;</span>:<br>      <span class="hljs-comment">// âœ… è‡ªåŠ¨æ¨æ–­ payload ä¸º string</span><br>      <span class="hljs-keyword">return</span> &#123;<br>        ...state,<br>        <span class="hljs-attr">todos</span>: state.<span class="hljs-property">todos</span>.<span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">todo</span> =&gt;</span> <br>          todo.<span class="hljs-property">id</span> === action.<span class="hljs-property">payload</span> <br>            ? &#123; ...todo, <span class="hljs-attr">completed</span>: !todo.<span class="hljs-property">completed</span> &#125; <br>            : todo<br>        )<br>      &#125;;<br>    <br>    <span class="hljs-attr">default</span>:<br>      <span class="hljs-comment">// âŒ æ•è·æœªå¤„ç† action</span><br>      <span class="hljs-keyword">const</span> <span class="hljs-attr">_exhaustiveCheck</span>: <span class="hljs-built_in">never</span> = action;<br>      <span class="hljs-keyword">return</span> state;<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>

<p><strong>é«˜çº§æ¨¡å¼ï¼šç±»å‹ç”Ÿæˆå™¨</strong></p>
<p>è‡ªåŠ¨åˆ›å»ºç±»å‹å®‰å…¨ actionï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// Action åˆ›å»ºå‡½æ•°å·¥å‚</span><br><span class="hljs-keyword">function</span> createAction&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>, P&gt;(<span class="hljs-attr">type</span>: T) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">payload</span>: P</span>) =&gt;</span> (&#123; <span class="hljs-keyword">type</span>, payload &#125;);<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span><br><span class="hljs-keyword">const</span> increment = <span class="hljs-title function_">createAction</span>(<span class="hljs-string">&#x27;INCREMENT&#x27;</span>, <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">amount</span>: <span class="hljs-built_in">number</span></span>) =&gt;</span> amount);<br><span class="hljs-keyword">const</span> addTodo = <span class="hljs-title function_">createAction</span>(<span class="hljs-string">&#x27;ADD_TODO&#x27;</span>, <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span></span>) =&gt;</span> text);<br><br><span class="hljs-comment">// è‡ªåŠ¨ç”Ÿæˆ Action ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Actions</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-keyword">typeof</span> increment&gt; | <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-keyword">typeof</span> addTodo&gt;;<br></code></pre></td></tr></table></figure>

<p>ç±»å‹å®‰å…¨ reducer ç”Ÿæˆå™¨ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ActionMap</span> = &#123;<br>  <span class="hljs-attr">INCREMENT</span>: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">ADD_TODO</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">TOGGLE_TODO</span>: <span class="hljs-built_in">string</span>;<br>&#125;;<br><br><span class="hljs-keyword">function</span> createReducer&lt;S, A <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;&gt;(<br>  <span class="hljs-attr">initialState</span>: S,<br>  <span class="hljs-attr">handlers</span>: &#123;<br>    [K <span class="hljs-keyword">in</span> keyof A]: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">state</span>: S, <span class="hljs-attr">payload</span>: A[K]</span>) =&gt;</span> S<br>  &#125;<br>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">state</span>: S = initialState, <span class="hljs-attr">action</span>: &#123; </span></span><br><span class="hljs-params"><span class="hljs-function">    [K <span class="hljs-keyword">in</span> keyof A]: &#123; <span class="hljs-keyword">type</span>: K; payload: A[K] &#125; </span></span><br><span class="hljs-params"><span class="hljs-function">  &#125;[keyof A]</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">if</span> (handlers[action.<span class="hljs-property">type</span>]) &#123;<br>      <span class="hljs-keyword">return</span> handlers[action.<span class="hljs-property">type</span>](state, action.<span class="hljs-property">payload</span>);<br>    &#125;<br>    <span class="hljs-keyword">return</span> state;<br>  &#125;;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> reducer = createReducer&lt;<span class="hljs-title class_">State</span>, <span class="hljs-title class_">ActionMap</span>&gt;(initialState, &#123;<br>  <span class="hljs-attr">INCREMENT</span>: <span class="hljs-function">(<span class="hljs-params">state, payload</span>) =&gt;</span> (&#123; ...state, <span class="hljs-attr">counter</span>: state.<span class="hljs-property">counter</span> + payload &#125;),<br>  <span class="hljs-attr">ADD_TODO</span>: <span class="hljs-function">(<span class="hljs-params">state, text</span>) =&gt;</span> (&#123; ...state, <span class="hljs-attr">todos</span>: [...state.<span class="hljs-property">todos</span>, &#123; <span class="hljs-attr">id</span>: <span class="hljs-title function_">nanoid</span>(), text &#125;] &#125;)<br>&#125;);<br></code></pre></td></tr></table></figure>

<p><strong>Redux Toolkit é›†æˆ</strong></p>
<p>ç°ä»£ Redux ç±»å‹å®‰å…¨å®è·µï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; createSlice, <span class="hljs-title class_">PayloadAction</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;@reduxjs/toolkit&#x27;</span>;<br><br><span class="hljs-keyword">const</span> todosSlice = <span class="hljs-title function_">createSlice</span>(&#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;todos&#x27;</span>,<br>  <span class="hljs-attr">initialState</span>: [] <span class="hljs-keyword">as</span> <span class="hljs-title class_">Todo</span>[],<br>  <span class="hljs-attr">reducers</span>: &#123;<br>    <span class="hljs-attr">addTodo</span>: &#123;<br>      <span class="hljs-attr">reducer</span>: <span class="hljs-function">(<span class="hljs-params">state, <span class="hljs-attr">action</span>: <span class="hljs-title class_">PayloadAction</span>&lt;<span class="hljs-title class_">Todo</span>&gt;</span>) =&gt;</span> &#123;<br>        state.<span class="hljs-title function_">push</span>(action.<span class="hljs-property">payload</span>);<br>      &#125;,<br>      <span class="hljs-attr">prepare</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">text</span>: <span class="hljs-built_in">string</span></span>) =&gt;</span> (&#123;<br>        <span class="hljs-attr">payload</span>: &#123; <span class="hljs-attr">id</span>: <span class="hljs-title function_">nanoid</span>(), text, <span class="hljs-attr">completed</span>: <span class="hljs-literal">false</span> &#125;<br>      &#125;)<br>    &#125;,<br>    <span class="hljs-attr">toggleTodo</span>: <span class="hljs-function">(<span class="hljs-params">state, <span class="hljs-attr">action</span>: <span class="hljs-title class_">PayloadAction</span>&lt;<span class="hljs-built_in">string</span>&gt;</span>) =&gt;</span> &#123;<br>      <span class="hljs-keyword">const</span> todo = state.<span class="hljs-title function_">find</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">id</span> === action.<span class="hljs-property">payload</span>);<br>      <span class="hljs-keyword">if</span> (todo) todo.<span class="hljs-property">completed</span> = !todo.<span class="hljs-property">completed</span>;<br>    &#125;<br>  &#125;<br>&#125;);<br><br><span class="hljs-comment">// è‡ªåŠ¨ç”Ÿæˆ Action ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">TodosAction</span> = <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-keyword">typeof</span> todosSlice.<span class="hljs-property">actions</span>.<span class="hljs-property">addTodo</span>&gt; <br>  | <span class="hljs-title class_">ReturnType</span>&lt;<span class="hljs-keyword">typeof</span> todosSlice.<span class="hljs-property">actions</span>.<span class="hljs-property">toggleTodo</span>&gt;;<br></code></pre></td></tr></table></figure>

<p><strong>å¤æ‚åœºæ™¯å¤„ç†</strong></p>
<p>å¼‚æ­¥ Action ç±»å‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">ThunkAction</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;redux-thunk&#x27;</span>;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">AppThunk</span>&lt;<span class="hljs-title class_">ReturnType</span> = <span class="hljs-built_in">void</span>&gt; = <span class="hljs-title class_">ThunkAction</span>&lt;<br>  <span class="hljs-title class_">ReturnType</span>,<br>  <span class="hljs-title class_">State</span>,<br>  <span class="hljs-built_in">unknown</span>,<br>  <span class="hljs-title class_">Action</span><br>&gt;;<br><br><span class="hljs-keyword">const</span> fetchTodos = (): <span class="hljs-function"><span class="hljs-params">AppThunk</span> =&gt;</span> <span class="hljs-keyword">async</span> dispatch =&gt; &#123;<br>  <span class="hljs-title function_">dispatch</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;FETCH_TODOS_REQUEST&#x27;</span> &#125;);<br>  <span class="hljs-keyword">try</span> &#123;<br>    <span class="hljs-keyword">const</span> todos = <span class="hljs-keyword">await</span> api.<span class="hljs-title function_">getTodos</span>();<br>    <span class="hljs-title function_">dispatch</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;FETCH_TODOS_SUCCESS&#x27;</span>, <span class="hljs-attr">payload</span>: todos &#125;);<br>  &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>    <span class="hljs-title function_">dispatch</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;FETCH_TODOS_FAILURE&#x27;</span>, <span class="hljs-attr">payload</span>: error.<span class="hljs-property">message</span> &#125;);<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>Reducer ç»„åˆç±»å‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">CombinedState</span> = &#123;<br>  <span class="hljs-attr">todos</span>: <span class="hljs-title class_">TodoState</span>;<br>  <span class="hljs-attr">user</span>: <span class="hljs-title class_">UserState</span>;<br>&#125;;<br><br><span class="hljs-comment">// ç±»å‹å®‰å…¨çš„ combineReducers</span><br><span class="hljs-keyword">function</span> combineTypedReducers&lt;M&gt;(<span class="hljs-attr">reducers</span>: M): <span class="hljs-title class_">Reducer</span>&lt;&#123;<br>  [K <span class="hljs-keyword">in</span> keyof M]: M[K] <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Reducer</span>&lt;infer S&gt; ? S : <span class="hljs-built_in">never</span><br>&#125;&gt; &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-function">(<span class="hljs-params">state, action</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> newState = &#123;&#125; <span class="hljs-keyword">as</span> <span class="hljs-built_in">any</span>;<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> reducers) &#123;<br>      newState[key] = reducers[key](state?.[key], action);<br>    &#125;<br>    <span class="hljs-keyword">return</span> newState;<br>  &#125;;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>è¾¹ç•Œå¤„ç†ä¸ä¼˜åŒ–</strong></p>
<table>
<thead>
<tr>
<th align="left">è¾¹ç•Œæƒ…å†µ</th>
<th align="left">è§£å†³æ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ç©º action å¤„ç†</td>
<td align="left">ä½¿ç”¨ never ç±»å‹è¿›è¡Œç©·å°½æ£€æŸ¥</td>
</tr>
<tr>
<td align="left">åµŒå¥—çŠ¶æ€æ›´æ–°</td>
<td align="left">ä½¿ç”¨ Immer åº“è¿›è¡Œå¯å˜å†™æ³•</td>
</tr>
<tr>
<td align="left">å†å²çŠ¶æ€ç±»å‹</td>
<td align="left">æ·»åŠ  undoable reducer ç±»å‹æ‰©å±•</td>
</tr>
<tr>
<td align="left">åŠ¨æ€ reducer æ³¨å†Œ</td>
<td align="left">ç±»å‹å®‰å…¨çš„ injectReducer æ¨¡å¼</td>
</tr>
</tbody></table>
<p>æ€§èƒ½ä¼˜åŒ–ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// 1. é¿å…æ·±å±‚åµŒå¥—çŠ¶æ€</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">State</span> = &#123;<br>  <span class="hljs-comment">// âŒ é¿å…</span><br>  <span class="hljs-attr">deep</span>: &#123; <span class="hljs-attr">a</span>: &#123; <span class="hljs-attr">b</span>: &#123; <span class="hljs-attr">c</span>: <span class="hljs-built_in">number</span> &#125; &#125; &#125;;<br>  <span class="hljs-comment">// âœ… æ¨è</span><br>  <span class="hljs-attr">flat</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-title class_">FlatItem</span>&gt;;<br>&#125;;<br><br><span class="hljs-comment">// 2. ä½¿ç”¨ Reselect è®°å¿†åŒ–é€‰æ‹©å™¨</span><br><span class="hljs-keyword">import</span> &#123; createSelector &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;reselect&#x27;</span>;<br><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">selectTodos</span> = (<span class="hljs-params"><span class="hljs-attr">state</span>: <span class="hljs-title class_">State</span></span>) =&gt; state.<span class="hljs-property">todos</span>;<br><span class="hljs-keyword">const</span> selectCompletedTodos = <span class="hljs-title function_">createSelector</span>(<br>  [selectTodos],<br>  <span class="hljs-function"><span class="hljs-params">todos</span> =&gt;</span> todos.<span class="hljs-title function_">filter</span>(<span class="hljs-function"><span class="hljs-params">t</span> =&gt;</span> t.<span class="hljs-property">completed</span>)<br>);<br></code></pre></td></tr></table></figure>

<p><strong>é¢è¯•çº§è€ƒç‚¹</strong></p>
<ol>
<li>ç±»å‹æ”¶çª„åŸç†ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åˆ©ç”¨å¯è¾¨è¯†è”åˆï¼ˆdiscriminated unionï¼‰</span><br><span class="hljs-keyword">if</span> (action.<span class="hljs-property">type</span> === <span class="hljs-string">&#x27;INCREMENT&#x27;</span>) &#123;<br>  <span class="hljs-comment">// æ­¤å¤„ action è‡ªåŠ¨æ”¶çª„ä¸º &#123; type: &#x27;INCREMENT&#x27;; payload: number &#125;</span><br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>ç±»å‹å®‰å…¨ä¸æ€§èƒ½å¹³è¡¡ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// âŒ è¿‡åº¦æ³›åŒ–</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Action</span>&lt;T = <span class="hljs-built_in">any</span>&gt; = &#123; <span class="hljs-attr">type</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">payload</span>: T &#125;;<br><br><span class="hljs-comment">// âœ… ç²¾ç¡®æ§åˆ¶</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">StrictAction</span> = &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;A&#x27;</span>; <span class="hljs-attr">payload</span>: <span class="hljs-built_in">number</span> &#125; | &#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;B&#x27;</span>; <span class="hljs-attr">payload</span>: <span class="hljs-built_in">string</span> &#125;;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>Redux ä¸­é—´ä»¶ç±»å‹ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">MiddlewareAPI</span>&lt;D <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Dispatch</span>, S&gt; &#123;<br>  <span class="hljs-attr">dispatch</span>: D;<br>  <span class="hljs-title function_">getState</span>(): S;<br>&#125;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Middleware</span> = &lt;S&gt;<span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">api</span>: <span class="hljs-title class_">MiddlewareAPI</span>&lt;<span class="hljs-title class_">Dispatch</span>, S&gt;</span>) =&gt;</span> <br>  <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">next</span>: <span class="hljs-title class_">Dispatch</span></span>) =&gt;</span> <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">action</span>: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">any</span>;<br></code></pre></td></tr></table></figure>

<ol start="4">
<li>æ—¶é—´æ—…è¡Œè°ƒè¯•ç±»å‹ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">TimeTravelState</span> = &#123;<br>  <span class="hljs-attr">past</span>: <span class="hljs-title class_">State</span>[];<br>  <span class="hljs-attr">present</span>: <span class="hljs-title class_">State</span>;<br>  <span class="hljs-attr">future</span>: <span class="hljs-title class_">State</span>[];<br>&#125;;<br></code></pre></td></tr></table></figure>

<ol start="5">
<li>ç»ˆææŒ‘æˆ˜ï¼šå®ç°ç±»å‹å®‰å…¨çš„ Redux-Observable</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">Epic</span> = <span class="hljs-function">(<span class="hljs-params"></span></span><br><span class="hljs-params"><span class="hljs-function">  <span class="hljs-attr">action$</span>: <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-title class_">Action</span>&gt;,</span></span><br><span class="hljs-params"><span class="hljs-function">  <span class="hljs-attr">state$</span>: <span class="hljs-title class_">StateObservable</span>&lt;<span class="hljs-title class_">State</span>&gt;</span></span><br><span class="hljs-params"><span class="hljs-function"></span>) =&gt;</span> <span class="hljs-title class_">Observable</span>&lt;<span class="hljs-title class_">Action</span>&gt;;<br><br><span class="hljs-keyword">const</span> <span class="hljs-attr">fetchEpic</span>: <span class="hljs-title class_">Epic</span> = <span class="hljs-function">(<span class="hljs-params">action$, state$</span>) =&gt;</span> <br>  action$.<span class="hljs-title function_">pipe</span>(<br>    <span class="hljs-title function_">ofType</span>(<span class="hljs-string">&#x27;FETCH_REQUEST&#x27;</span>),<br>    <span class="hljs-title function_">switchMap</span>(<span class="hljs-function"><span class="hljs-params">action</span> =&gt;</span> <br>      <span class="hljs-title function_">from</span>(api.<span class="hljs-title function_">fetchData</span>(action.<span class="hljs-property">payload</span>)).<span class="hljs-title function_">pipe</span>(<br>        <span class="hljs-title function_">map</span>(<span class="hljs-function"><span class="hljs-params">response</span> =&gt;</span> (&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;FETCH_SUCCESS&#x27;</span>, <span class="hljs-attr">payload</span>: response &#125;)),<br>        <span class="hljs-title function_">catchError</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-title function_">of</span>(&#123; <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;FETCH_ERROR&#x27;</span>, <span class="hljs-attr">payload</span>: error &#125;))<br>    )<br>  );<br></code></pre></td></tr></table></figure>

<h3 id="2-2-4-è·¯ç”±å‚æ•°è‡ªåŠ¨ç±»å‹æ¨å¯¼"><a href="#2-2-4-è·¯ç”±å‚æ•°è‡ªåŠ¨ç±»å‹æ¨å¯¼" class="headerlink" title="2.2.4 è·¯ç”±å‚æ•°è‡ªåŠ¨ç±»å‹æ¨å¯¼"></a>2.2.4 è·¯ç”±å‚æ•°è‡ªåŠ¨ç±»å‹æ¨å¯¼</h3><p><strong>æ ¸å¿ƒæŒ‘æˆ˜</strong></p>
<ol>
<li>è·¯å¾„è§£æï¼šå°†å­—ç¬¦ä¸²è·¯å¾„ï¼ˆå¦‚ &#x2F;user&#x2F;:id&#x2F;posts&#x2F;:postIdï¼‰è½¬æ¢ä¸ºç±»å‹ç»“æ„</li>
<li>å‚æ•°æå–ï¼šè¯†åˆ«åŠ¨æ€æ®µï¼ˆ:paramï¼‰å’Œå¯é€‰æ®µï¼ˆ?ï¼‰</li>
<li>ç±»å‹è½¬æ¢ï¼šå°†å‚æ•°åæ˜ å°„ä¸ºå¯¹è±¡é”®ï¼ˆ{ id: string; postId: string }ï¼‰</li>
<li>åµŒå¥—è·¯ç”±ï¼šæ”¯æŒå¤šå±‚è·¯ç”±å‚æ•°åˆå¹¶</li>
</ol>
<p><strong>åŸºç¡€è·¯å¾„å‚æ•°æ¨å¯¼</strong></p>
<p>åœºæ™¯1ï¼šæå–å•ä¸€è·¯å¾„å‚æ•°</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ExtractParam</span>&lt;<span class="hljs-title class_">Path</span>&gt; = <br>  <span class="hljs-title class_">Path</span> <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">string</span>&#125;</span>:<span class="hljs-subst">$&#123;infer Param&#125;</span>/<span class="hljs-subst">$&#123;infer Rest&#125;</span>`</span><br>    ? <span class="hljs-title class_">Param</span> | <span class="hljs-title class_">ExtractParam</span>&lt;<span class="hljs-title class_">Rest</span>&gt;<br>    : <span class="hljs-title class_">Path</span> <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">string</span>&#125;</span>:<span class="hljs-subst">$&#123;infer Param&#125;</span>`</span><br>      ? <span class="hljs-title class_">Param</span><br>      : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Test1</span> = <span class="hljs-title class_">ExtractParam</span>&lt;<span class="hljs-string">&#x27;/user/:id&#x27;</span>&gt;;  <span class="hljs-comment">// &quot;id&quot;</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Test2</span> = <span class="hljs-title class_">ExtractParam</span>&lt;<span class="hljs-string">&#x27;/post/:postId/comment/:commentId&#x27;</span>&gt;;  <span class="hljs-comment">// &quot;postId&quot; | &quot;commentId&quot;</span><br></code></pre></td></tr></table></figure>

<p>åœºæ™¯2ï¼šè½¬æ¢ä¸ºå‚æ•°å¯¹è±¡ç±»å‹</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">PathParams</span>&lt;<span class="hljs-title class_">Path</span>&gt; = &#123;<br>  [K <span class="hljs-keyword">in</span> <span class="hljs-title class_">ExtractParam</span>&lt;<span class="hljs-title class_">Path</span>&gt;]: <span class="hljs-built_in">string</span>;<br>&#125;;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Params1</span> = <span class="hljs-title class_">PathParams</span>&lt;<span class="hljs-string">&#x27;/user/:id&#x27;</span>&gt;;  <span class="hljs-comment">// &#123; id: string &#125;</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Params2</span> = <span class="hljs-title class_">PathParams</span>&lt;<span class="hljs-string">&#x27;/category/:categoryId/product/:productId&#x27;</span>&gt;; <br><span class="hljs-comment">// &#123; categoryId: string; productId: string &#125;</span><br></code></pre></td></tr></table></figure>

<p><strong>é«˜çº§è·¯ç”±ç‰¹æ€§å®ç°</strong></p>
<p>ç‰¹æ€§1ï¼šå¯é€‰å‚æ•°ï¼ˆ?ï¼‰</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ExtractOptionalParam</span>&lt;<span class="hljs-title class_">Path</span>&gt; =<br>  <span class="hljs-title class_">Path</span> <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">string</span>&#125;</span>:<span class="hljs-subst">$&#123;infer Param&#125;</span>?/<span class="hljs-subst">$&#123;infer Rest&#125;</span>`</span><br>    ? <span class="hljs-title class_">Param</span> | <span class="hljs-title class_">ExtractOptionalParam</span>&lt;<span class="hljs-title class_">Rest</span>&gt;<br>    : <span class="hljs-title class_">Path</span> <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">string</span>&#125;</span>:<span class="hljs-subst">$&#123;infer Param&#125;</span>?`</span><br>      ? <span class="hljs-title class_">Param</span><br>      : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">PathParams</span>&lt;<span class="hljs-title class_">Path</span>&gt; = &#123;<br>  [K <span class="hljs-keyword">in</span> <span class="hljs-title class_">ExtractParam</span>&lt;<span class="hljs-title class_">Path</span>&gt;]: <span class="hljs-built_in">string</span>;<br>&#125; &amp; &#123;<br>  [K <span class="hljs-keyword">in</span> <span class="hljs-title class_">ExtractOptionalParam</span>&lt;<span class="hljs-title class_">Path</span>&gt;]?: <span class="hljs-built_in">string</span>;<br>&#125;;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Params3</span> = <span class="hljs-title class_">PathParams</span>&lt;<span class="hljs-string">&#x27;/search/:query?&#x27;</span>&gt;;  <span class="hljs-comment">// &#123; query?: string &#125;</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Params4</span> = <span class="hljs-title class_">PathParams</span>&lt;<span class="hljs-string">&#x27;/user/:id/profile/:tab?&#x27;</span>&gt;; <br><span class="hljs-comment">// &#123; id: string; tab?: string &#125;</span><br></code></pre></td></tr></table></figure>

<p>ç‰¹æ€§2ï¼šé€šé…ç¬¦åŒ¹é…ï¼ˆ*ï¼‰</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ExtractWildcard</span>&lt;<span class="hljs-title class_">Path</span>&gt; =<br>  <span class="hljs-title class_">Path</span> <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">string</span>&#125;</span>*<span class="hljs-subst">$&#123;infer Rest&#125;</span>`</span><br>    ? <span class="hljs-string">&#x27;wildcard&#x27;</span> | <span class="hljs-title class_">ExtractWildcard</span>&lt;<span class="hljs-title class_">Rest</span>&gt;<br>    : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">PathParams</span>&lt;<span class="hljs-title class_">Path</span>&gt; = &#123;<br>  [K <span class="hljs-keyword">in</span> <span class="hljs-title class_">ExtractParam</span>&lt;<span class="hljs-title class_">Path</span>&gt;]: <span class="hljs-built_in">string</span>;<br>&#125; &amp; &#123;<br>  [K <span class="hljs-keyword">in</span> <span class="hljs-title class_">ExtractOptionalParam</span>&lt;<span class="hljs-title class_">Path</span>&gt;]?: <span class="hljs-built_in">string</span>;<br>&#125; &amp; &#123;<br>  [K <span class="hljs-keyword">in</span> <span class="hljs-title class_">ExtractWildcard</span>&lt;<span class="hljs-title class_">Path</span>&gt;]: <span class="hljs-built_in">string</span>[];<br>&#125;;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Params5</span> = <span class="hljs-title class_">PathParams</span>&lt;<span class="hljs-string">&#x27;/files/*&#x27;</span>&gt;;  <span class="hljs-comment">// &#123; wildcard: string[] &#125;</span><br></code></pre></td></tr></table></figure>

<p>ç‰¹æ€§3ï¼šæ­£åˆ™çº¦æŸå‚æ•°</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ExtractConstrainedParam</span>&lt;<span class="hljs-title class_">Path</span>&gt; =<br>  <span class="hljs-title class_">Path</span> <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">string</span>&#125;</span>:<span class="hljs-subst">$&#123;infer Param&#125;</span>(<span class="hljs-subst">$&#123;infer Regex&#125;</span>)/<span class="hljs-subst">$&#123;infer Rest&#125;</span>`</span><br>    ? &#123; <span class="hljs-attr">param</span>: <span class="hljs-title class_">Param</span>; <span class="hljs-attr">regex</span>: <span class="hljs-title class_">Regex</span> &#125; | <span class="hljs-title class_">ExtractConstrainedParam</span>&lt;<span class="hljs-title class_">Rest</span>&gt;<br>    : <span class="hljs-title class_">Path</span> <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">string</span>&#125;</span>:<span class="hljs-subst">$&#123;infer Param&#125;</span>(<span class="hljs-subst">$&#123;infer Regex&#125;</span>)`</span><br>      ? &#123; <span class="hljs-attr">param</span>: <span class="hljs-title class_">Param</span>; <span class="hljs-attr">regex</span>: <span class="hljs-title class_">Regex</span> &#125;<br>      : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">MapRegexToType</span>&lt;R&gt; = <br>  R <span class="hljs-keyword">extends</span> <span class="hljs-string">&#x27;\\d+&#x27;</span> ? <span class="hljs-built_in">number</span> :<br>  R <span class="hljs-keyword">extends</span> <span class="hljs-string">&#x27;\\w+&#x27;</span> ? <span class="hljs-built_in">string</span> :<br>  <span class="hljs-built_in">string</span>;  <span class="hljs-comment">// é»˜è®¤å›é€€</span><br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">PathParams</span>&lt;<span class="hljs-title class_">Path</span>&gt; = &#123;<br>  [K <span class="hljs-keyword">in</span> <span class="hljs-title class_">ExtractParam</span>&lt;<span class="hljs-title class_">Path</span>&gt;]: <span class="hljs-built_in">string</span>;<br>&#125; &amp; &#123;<br>  [K <span class="hljs-keyword">in</span> <span class="hljs-title class_">ExtractOptionalParam</span>&lt;<span class="hljs-title class_">Path</span>&gt;]?: <span class="hljs-built_in">string</span>;<br>&#125; &amp; &#123;<br>  [K <span class="hljs-keyword">in</span> <span class="hljs-title class_">ExtractWildcard</span>&lt;<span class="hljs-title class_">Path</span>&gt;]: <span class="hljs-built_in">string</span>[];<br>&#125; &amp; &#123;<br>  [P <span class="hljs-keyword">in</span> <span class="hljs-title class_">ExtractConstrainedParam</span>&lt;<span class="hljs-title class_">Path</span>&gt; <span class="hljs-keyword">as</span> P[<span class="hljs-string">&#x27;param&#x27;</span>]]: <br>    <span class="hljs-title class_">MapRegexToType</span>&lt;P[<span class="hljs-string">&#x27;regex&#x27;</span>]&gt;;<br>&#125;;<br><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Params6</span> = <span class="hljs-title class_">PathParams</span>&lt;<span class="hljs-string">&#x27;/user/:id(\\d+)&#x27;</span>&gt;;  <span class="hljs-comment">// &#123; id: number &#125;</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Params7</span> = <span class="hljs-title class_">PathParams</span>&lt;<span class="hljs-string">&#x27;/post/:slug(\\w+)&#x27;</span>&gt;; <span class="hljs-comment">// &#123; slug: string &#125;</span><br></code></pre></td></tr></table></figure>

<p><strong>React Router é›†æˆå®è·µ</strong></p>
<p>ç±»å‹å®‰å…¨è·¯ç”±ç»„ä»¶ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; useParams &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;react-router-dom&#x27;</span>;<br><br><span class="hljs-comment">// åˆ›å»ºç±»å‹å®‰å…¨ç‰ˆæœ¬</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> useTypedParams&lt;<span class="hljs-title class_">Path</span> <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt;() &#123;<br>  <span class="hljs-keyword">type</span> <span class="hljs-title class_">Params</span> = <span class="hljs-title class_">PathParams</span>&lt;<span class="hljs-title class_">Path</span>&gt;;<br>  <span class="hljs-keyword">return</span> <span class="hljs-title function_">useParams</span>() <span class="hljs-keyword">as</span> <span class="hljs-title class_">Partial</span>&lt;<span class="hljs-title class_">Params</span>&gt;; <span class="hljs-comment">// å¯èƒ½æœªåŒ¹é…æ‰€æœ‰å‚æ•°</span><br>&#125;<br><br><span class="hljs-comment">// åœ¨ç»„ä»¶ä¸­ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">UserProfile</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-keyword">const</span> params = useTypedParams&lt;<span class="hljs-string">&#x27;/user/:id/:tab?&#x27;</span>&gt;(); <br>  <span class="hljs-comment">// params: &#123; id?: string; tab?: string &#125;</span><br>  <br>  <span class="hljs-keyword">return</span> <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">div</span>&gt;</span>User ID: &#123;params.id || &#x27;Unknown&#x27;&#125;<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span></span>;<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>ç±»å‹å®‰å…¨è·¯ç”±é…ç½®ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">RouteConfig</span>&lt;<span class="hljs-title class_">Path</span> <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt; = &#123;<br>  <span class="hljs-attr">path</span>: <span class="hljs-title class_">Path</span>;<br>  <span class="hljs-attr">element</span>: <span class="hljs-title class_">React</span>.<span class="hljs-property">ReactNode</span>;<br>  <span class="hljs-attr">children</span>?: <span class="hljs-title class_">RouteConfig</span>&lt;<span class="hljs-built_in">any</span>&gt;[];<br>&#125;;<br><br><span class="hljs-keyword">function</span> createRoute&lt;<span class="hljs-title class_">Path</span> <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt;(<span class="hljs-attr">config</span>: <span class="hljs-title class_">RouteConfig</span>&lt;<span class="hljs-title class_">Path</span>&gt;) &#123;<br>  <span class="hljs-keyword">return</span> config;<br>&#125;<br><br><span class="hljs-keyword">const</span> routes = <span class="hljs-title function_">createRoute</span>(&#123;<br>  <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;/user/:id&#x27;</span>,<br>  <span class="hljs-attr">element</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">UserPage</span> /&gt;</span></span>,<br>  <span class="hljs-attr">children</span>: [<br>    &#123; <br>      <span class="hljs-attr">path</span>: <span class="hljs-string">&#x27;posts/:postId&#x27;</span>,  <span class="hljs-comment">// å®Œæ•´è·¯å¾„: /user/:id/posts/:postId</span><br>      <span class="hljs-attr">element</span>: <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">PostPage</span> /&gt;</span></span><br>    &#125;<br>  ]<br>&#125;);<br><br><span class="hljs-comment">// è‡ªåŠ¨æ¨å¯¼å‚æ•°ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">UserPageParams</span> = <span class="hljs-title class_">PathParams</span>&lt;<span class="hljs-keyword">typeof</span> routes.<span class="hljs-property">path</span>&gt;;          <span class="hljs-comment">// &#123; id: string &#125;</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">PostPageParams</span> = <span class="hljs-title class_">PathParams</span>&lt;<span class="hljs-keyword">typeof</span> routes.<span class="hljs-property">children</span>[<span class="hljs-number">0</span>].<span class="hljs-property">path</span>&gt;; <br><span class="hljs-comment">// &#123; id: string; postId: string &#125; (åŒ…å«çˆ¶çº§å‚æ•°)</span><br></code></pre></td></tr></table></figure>

<p><strong>è¾¹ç•Œå¤„ç†ä¸ä¼˜åŒ–</strong></p>
<p>é€’å½’æ·±åº¦æ§åˆ¶ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">ExtractParam</span>&lt;<span class="hljs-title class_">Path</span>, <span class="hljs-title class_">Depth</span> <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span> = <span class="hljs-number">5</span>&gt; = <br>  <span class="hljs-title class_">Depth</span> <span class="hljs-keyword">extends</span> <span class="hljs-number">0</span> ? <span class="hljs-built_in">never</span> :<br>  <span class="hljs-title class_">Path</span> <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">string</span>&#125;</span>:<span class="hljs-subst">$&#123;infer Param&#125;</span>/<span class="hljs-subst">$&#123;infer Rest&#125;</span>`</span><br>    ? <span class="hljs-title class_">Param</span> | <span class="hljs-title class_">ExtractParam</span>&lt;<span class="hljs-title class_">Rest</span>, <span class="hljs-title class_">Subtract</span>&lt;<span class="hljs-title class_">Depth</span>, <span class="hljs-number">1</span>&gt;&gt;<br>    : <span class="hljs-title class_">Path</span> <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">string</span>&#125;</span>:<span class="hljs-subst">$&#123;infer Param&#125;</span>`</span><br>      ? <span class="hljs-title class_">Param</span><br>      : <span class="hljs-built_in">never</span>;<br></code></pre></td></tr></table></figure>

<p>è·¯å¾„å†²çªæ£€æµ‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">DetectConflict</span>&lt;<span class="hljs-title class_">Path</span>&gt; = <br>  <span class="hljs-title class_">ExtractParam</span>&lt;<span class="hljs-title class_">Path</span>&gt; <span class="hljs-keyword">extends</span> infer P<br>    ? P <span class="hljs-keyword">extends</span> <span class="hljs-built_in">any</span><br>      ? &#123; [K <span class="hljs-keyword">in</span> P]: K &#125; <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Record</span>&lt;P, P&gt;<br>        ? <span class="hljs-title class_">Path</span>  <span class="hljs-comment">// æ— å†²çª</span><br>        : <span class="hljs-built_in">never</span> <span class="hljs-comment">// å­˜åœ¨é‡å¤å‚æ•°</span><br>      : <span class="hljs-built_in">never</span><br>    : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// ä½¿ç”¨ç¤ºä¾‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">SafePath</span> = <span class="hljs-title class_">DetectConflict</span>&lt;<span class="hljs-string">&#x27;/user/:id/posts/:id&#x27;</span>&gt;;  <span class="hljs-comment">// never (æ£€æµ‹åˆ°é‡å¤id)</span><br></code></pre></td></tr></table></figure>

<p><strong>é¢è¯•çº§è€ƒç‚¹</strong></p>
<ol>
<li>æ¨¡æ¿å­—é¢é‡ç±»å‹æ“ä½œï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">SplitPath</span>&lt;P&gt; = P <span class="hljs-keyword">extends</span> <span class="hljs-string">`/<span class="hljs-subst">$&#123;infer Part&#125;</span>/<span class="hljs-subst">$&#123;infer Rest&#125;</span>`</span> <br>  ? [<span class="hljs-title class_">Part</span>, ...<span class="hljs-title class_">SplitPath</span>&lt;<span class="hljs-string">`/<span class="hljs-subst">$&#123;Rest&#125;</span>`</span>&gt;] <br>  : P <span class="hljs-keyword">extends</span> <span class="hljs-string">`/<span class="hljs-subst">$&#123;infer Part&#125;</span>`</span> <br>    ? [<span class="hljs-title class_">Part</span>] <br>    : [];<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>ç±»å‹é€’å½’é™åˆ¶ï¼šTS 4.5+ æ”¯æŒå°¾é€’å½’ä¼˜åŒ–</li>
<li>React Router v6 ç±»å‹å®ç°ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å®˜æ–¹ParamKeyç±»å‹å®šä¹‰</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ParamKey</span>&lt;<span class="hljs-title class_">TPath</span>&gt; = <span class="hljs-title class_">TPath</span> <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;infer _&#125;</span>:<span class="hljs-subst">$&#123;infer Param&#125;</span>/<span class="hljs-subst">$&#123;infer Rest&#125;</span>`</span><br>  ? <span class="hljs-title class_">Param</span> | <span class="hljs-title class_">ParamKey</span>&lt;<span class="hljs-title class_">Rest</span>&gt;<br>  : <span class="hljs-title class_">TPath</span> <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;infer _&#125;</span>:<span class="hljs-subst">$&#123;infer Param&#125;</span>`</span><br>    ? <span class="hljs-title class_">Param</span><br>    : <span class="hljs-built_in">never</span>;<br></code></pre></td></tr></table></figure>

<ol start="4">
<li>Vue Router å¯¹æ¯”ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// Vue Routerçš„RouteRecordRawç±»å‹</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">RouteRecordRaw</span> &#123;<br>  <span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span>;<br>  <span class="hljs-attr">component</span>: <span class="hljs-title class_">Component</span>;<br>  <span class="hljs-attr">children</span>?: <span class="hljs-title class_">RouteRecordRaw</span>[];<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="5">
<li>ç»ˆææŒ‘æˆ˜ï¼šå®ç°Next.jsæ–‡ä»¶è·¯ç”±ç±»å‹</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">NextPageParams</span>&lt;<span class="hljs-title class_">Path</span>&gt; = <br>  <span class="hljs-title class_">Path</span> <span class="hljs-keyword">extends</span> <span class="hljs-string">`pages/<span class="hljs-subst">$&#123;infer Route&#125;</span>.tsx`</span> <br>    ? <span class="hljs-title class_">PathParams</span>&lt;<span class="hljs-title class_">Route</span>&gt;<br>    : <span class="hljs-built_in">never</span>;<br><br><span class="hljs-comment">// æ–‡ä»¶è·¯å¾„: pages/user/[id]/[tab].tsx</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Params</span> = <span class="hljs-title class_">NextPageParams</span>&lt;<span class="hljs-string">&#x27;pages/user/[id]/[tab].tsx&#x27;</span>&gt;; <br><span class="hljs-comment">// &#123; id: string; tab: string &#125;</span><br></code></pre></td></tr></table></figure>

<h2 id="2-3-æ¨¡æ¿å­—é¢é‡ç±»å‹"><a href="#2-3-æ¨¡æ¿å­—é¢é‡ç±»å‹" class="headerlink" title="2.3 æ¨¡æ¿å­—é¢é‡ç±»å‹"></a>2.3 æ¨¡æ¿å­—é¢é‡ç±»å‹</h2><h3 id="2-3-1-å­—ç¬¦ä¸²æ¨¡æ¿ç±»å‹æ“ä½œ"><a href="#2-3-1-å­—ç¬¦ä¸²æ¨¡æ¿ç±»å‹æ“ä½œ" class="headerlink" title="2.3.1 å­—ç¬¦ä¸²æ¨¡æ¿ç±»å‹æ“ä½œ"></a>2.3.1 å­—ç¬¦ä¸²æ¨¡æ¿ç±»å‹æ“ä½œ</h3><h3 id="2-3-2-Uppercase-Lowercase-ç±»å‹è½¬æ¢"><a href="#2-3-2-Uppercase-Lowercase-ç±»å‹è½¬æ¢" class="headerlink" title="2.3.2 Uppercase&#x2F;Lowercase ç±»å‹è½¬æ¢"></a>2.3.2 Uppercase&#x2F;Lowercase ç±»å‹è½¬æ¢</h3><h3 id="2-3-3-è·¯ç”±è·¯å¾„æ¨¡å¼åŒ¹é…"><a href="#2-3-3-è·¯ç”±è·¯å¾„æ¨¡å¼åŒ¹é…" class="headerlink" title="2.3.3 è·¯ç”±è·¯å¾„æ¨¡å¼åŒ¹é…"></a>2.3.3 è·¯ç”±è·¯å¾„æ¨¡å¼åŒ¹é…</h3><h3 id="2-3-4-å›½é™…åŒ–é”®åè‡ªåŠ¨è¡¥å…¨"><a href="#2-3-4-å›½é™…åŒ–é”®åè‡ªåŠ¨è¡¥å…¨" class="headerlink" title="2.3.4 å›½é™…åŒ–é”®åè‡ªåŠ¨è¡¥å…¨"></a>2.3.4 å›½é™…åŒ–é”®åè‡ªåŠ¨è¡¥å…¨</h3><h2 id="2-4-ç±»å‹ç¼–ç¨‹ä¼˜åŒ–"><a href="#2-4-ç±»å‹ç¼–ç¨‹ä¼˜åŒ–" class="headerlink" title="2.4 ç±»å‹ç¼–ç¨‹ä¼˜åŒ–"></a>2.4 ç±»å‹ç¼–ç¨‹ä¼˜åŒ–</h2><h3 id="2-4-1-ç±»å‹é€’å½’ä¸å°¾é€’å½’ä¼˜åŒ–"><a href="#2-4-1-ç±»å‹é€’å½’ä¸å°¾é€’å½’ä¼˜åŒ–" class="headerlink" title="2.4.1 ç±»å‹é€’å½’ä¸å°¾é€’å½’ä¼˜åŒ–"></a>2.4.1 ç±»å‹é€’å½’ä¸å°¾é€’å½’ä¼˜åŒ–</h3><h3 id="2-4-2-ç±»å‹å®ä¾‹åŒ–æ·±åº¦æ§åˆ¶"><a href="#2-4-2-ç±»å‹å®ä¾‹åŒ–æ·±åº¦æ§åˆ¶" class="headerlink" title="2.4.2 ç±»å‹å®ä¾‹åŒ–æ·±åº¦æ§åˆ¶"></a>2.4.2 ç±»å‹å®ä¾‹åŒ–æ·±åº¦æ§åˆ¶</h3><h3 id="2-4-3-æ¡ä»¶ç±»å‹çŸ­è·¯æŠ€å·§"><a href="#2-4-3-æ¡ä»¶ç±»å‹çŸ­è·¯æŠ€å·§" class="headerlink" title="2.4.3 æ¡ä»¶ç±»å‹çŸ­è·¯æŠ€å·§"></a>2.4.3 æ¡ä»¶ç±»å‹çŸ­è·¯æŠ€å·§</h3><h3 id="2-4-4-ç±»å‹æ€§èƒ½åˆ†æå·¥å…·"><a href="#2-4-4-ç±»å‹æ€§èƒ½åˆ†æå·¥å…·" class="headerlink" title="2.4.4 ç±»å‹æ€§èƒ½åˆ†æå·¥å…·"></a>2.4.4 ç±»å‹æ€§èƒ½åˆ†æå·¥å…·</h3><h1 id="ä¸‰ã€å·¥ç¨‹åŒ–å®è·µ"><a href="#ä¸‰ã€å·¥ç¨‹åŒ–å®è·µ" class="headerlink" title="ä¸‰ã€å·¥ç¨‹åŒ–å®è·µ"></a>ä¸‰ã€å·¥ç¨‹åŒ–å®è·µ</h1><h2 id="3-1-TSConfig-æ·±åº¦é…ç½®"><a href="#3-1-TSConfig-æ·±åº¦é…ç½®" class="headerlink" title="3.1 TSConfig æ·±åº¦é…ç½®"></a>3.1 TSConfig æ·±åº¦é…ç½®</h2><h3 id="3-1-1-ä¸¥æ ¼æ¨¡å¼å…¨å®¶æ¡¶é…ç½®"><a href="#3-1-1-ä¸¥æ ¼æ¨¡å¼å…¨å®¶æ¡¶é…ç½®" class="headerlink" title="3.1.1 ä¸¥æ ¼æ¨¡å¼å…¨å®¶æ¡¶é…ç½®"></a>3.1.1 ä¸¥æ ¼æ¨¡å¼å…¨å®¶æ¡¶é…ç½®</h3><p><strong>ä¸¥æ ¼æ¨¡å¼æ ¸å¿ƒé…ç½®</strong></p>
<p>å¯ç”¨æ‰€æœ‰ä¸¥æ ¼æ£€æŸ¥ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;strict&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<p>æ­¤é…ç½®ç­‰ä»·äºåŒæ—¶å¯ç”¨ä»¥ä¸‹æ‰€æœ‰å­é€‰é¡¹ï¼ˆTypeScript 2.3+ï¼‰ã€‚</p>
<p><strong>ä¸¥æ ¼æ¨¡å¼å­é€‰é¡¹è¯¦è§£</strong></p>
<table>
<thead>
<tr>
<th align="left">é€‰é¡¹</th>
<th align="left">é»˜è®¤å€¼</th>
<th align="left">ä½œç”¨</th>
<th align="left">æ¨èå€¼</th>
</tr>
</thead>
<tbody><tr>
<td align="left">strict</td>
<td align="left">false</td>
<td align="left">æ‰€æœ‰ä¸¥æ ¼æ£€æŸ¥çš„æ€»å¼€å…³</td>
<td align="left">true</td>
</tr>
<tr>
<td align="left">noImplicitAny</td>
<td align="left">false</td>
<td align="left">ç¦æ­¢éšå¼ any ç±»å‹</td>
<td align="left">true</td>
</tr>
<tr>
<td align="left">noImplicitThis</td>
<td align="left">false</td>
<td align="left">ç¦æ­¢éšå¼ any ç±»å‹çš„ this</td>
<td align="left">true</td>
</tr>
<tr>
<td align="left">strictNullChecks</td>
<td align="left">false</td>
<td align="left">ä¸¥æ ¼çš„ null&#x2F;undefined æ£€æŸ¥</td>
<td align="left">true</td>
</tr>
<tr>
<td align="left">strictFunctionTypes</td>
<td align="left">false</td>
<td align="left">ä¸¥æ ¼çš„å‡½æ•°ç±»å‹æ£€æŸ¥ï¼ˆé€†å˜å‚æ•°ï¼‰</td>
<td align="left">true</td>
</tr>
<tr>
<td align="left">strictBindCallApply</td>
<td align="left">false</td>
<td align="left">ä¸¥æ ¼çš„ bind&#x2F;call&#x2F;apply æ–¹æ³•æ£€æŸ¥</td>
<td align="left">true</td>
</tr>
<tr>
<td align="left">strictPropertyInitialization</td>
<td align="left">false</td>
<td align="left">ä¸¥æ ¼çš„ç±»å±æ€§åˆå§‹åŒ–æ£€æŸ¥ï¼ˆéœ€é…åˆ strictNullChecksï¼‰</td>
<td align="left">true</td>
</tr>
<tr>
<td align="left">alwaysStrict</td>
<td align="left">false</td>
<td align="left">ä»¥ä¸¥æ ¼æ¨¡å¼è§£æä»£ç ï¼Œå¹¶åœ¨æ¯ä¸ªæ–‡ä»¶é¡¶éƒ¨æ·»åŠ  â€œuse strictâ€</td>
<td align="left">true</td>
</tr>
<tr>
<td align="left">useUnknownInCatchVariables</td>
<td align="left">false</td>
<td align="left">catch å­å¥å˜é‡é»˜è®¤ä¸º unknown ç±»å‹ï¼ˆTS 4.4+ï¼‰</td>
<td align="left">true</td>
</tr>
</tbody></table>
<p><strong>é…ç½®è¯¦è§£ä¸å·¥ç¨‹å®è·µ</strong></p>
<ol>
<li>noImplicitAny</li>
</ol>
<p>é—®é¢˜ä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params">message</span>) &#123; <span class="hljs-comment">// ğŸš« å‚æ•°éšå¼ any</span><br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message);<br>&#125;<br></code></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params"><span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span></span>) &#123; <span class="hljs-comment">// âœ… æ˜¾å¼å£°æ˜ç±»å‹</span><br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(message);<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>strictNullChecks</li>
</ol>
<p>é—®é¢˜ä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;app&quot;</span>);<br>element.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;Hello&quot;</span>; <span class="hljs-comment">// ğŸš« å¯èƒ½ä¸º null</span><br></code></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">const</span> element = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">getElementById</span>(<span class="hljs-string">&quot;app&quot;</span>);<br><span class="hljs-keyword">if</span> (element) &#123; <span class="hljs-comment">// âœ… å®‰å…¨æ£€æŸ¥</span><br>  element.<span class="hljs-property">innerHTML</span> = <span class="hljs-string">&quot;Hello&quot;</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>strictPropertyInitialization</li>
</ol>
<p>é—®é¢˜ä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// ğŸš« æœªåˆå§‹åŒ–</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> &#123;<br>  name!: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// âœ… æ˜ç¡®èµ‹å€¼æ–­è¨€</span><br>  <span class="hljs-comment">// æˆ–</span><br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">public</span> <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span></span>) &#123;&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="4">
<li>useUnknownInCatchVariables</li>
</ol>
<p>é—®é¢˜ä»£ç ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">try</span> &#123; <span class="hljs-comment">/* ... */</span> &#125; <br><span class="hljs-keyword">catch</span> (err) &#123; <span class="hljs-comment">// any ç±»å‹</span><br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err.<span class="hljs-property">message</span>); <span class="hljs-comment">// ğŸš« å¯èƒ½ä¸å­˜åœ¨</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">try</span> &#123; <span class="hljs-comment">/* ... */</span> &#125; <br><span class="hljs-keyword">catch</span> (<span class="hljs-attr">err</span>: <span class="hljs-built_in">unknown</span>) &#123; <span class="hljs-comment">// âœ… TS 4.4+</span><br>  <span class="hljs-keyword">if</span> (err <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Error</span>) &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err.<span class="hljs-property">message</span>);<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å››ã€ä¸¥æ ¼æ¨¡å¼é…ç½®ç­–ç•¥</p>
<ol>
<li>æ¸è¿›å¯ç”¨ç­–ç•¥ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;strict&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;noImplicitAny&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span> <span class="hljs-comment">// ä¸´æ—¶å…³é—­æœ€ä¸¥æ ¼çš„è§„åˆ™</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>æ–‡ä»¶çº§è¦†ç›–ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// @ts-nocheck  // ç¦ç”¨æ•´ä¸ªæ–‡ä»¶æ£€æŸ¥</span><br><span class="hljs-comment">// @ts-ignore   // ç¦ç”¨ä¸‹ä¸€è¡Œæ£€æŸ¥</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">legacyCode</span>(<span class="hljs-params"></span>) &#123; <br>  <span class="hljs-comment">// @ts-expect-error // é¢„æœŸé”™è¯¯ï¼ˆTS 3.9+ï¼‰</span><br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span> = <span class="hljs-string">&quot;string&quot;</span>; <br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>ç›®å½•å·®å¼‚åŒ–é…ç½®ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// æ ¹ç›®å½• tsconfig.json</span><br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;extends&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./tsconfig.base.json&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;references&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>    <span class="hljs-punctuation">&#123;</span> <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./src&quot;</span> <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span>        <span class="hljs-comment">// åº”ç”¨ä¸¥æ ¼æ¨¡å¼</span><br>    <span class="hljs-punctuation">&#123;</span> <span class="hljs-attr">&quot;path&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./legacy&quot;</span> <span class="hljs-punctuation">&#125;</span>      <span class="hljs-comment">// éä¸¥æ ¼æ¨¡å¼</span><br>  <span class="hljs-punctuation">]</span><br><span class="hljs-punctuation">&#125;</span><br><br><span class="hljs-comment">// legacy/tsconfig.json</span><br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;extends&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;../tsconfig.base.json&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;strict&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">false</span></span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<p><strong>æ€§èƒ½ä¸ä¸¥æ ¼æ¨¡å¼</strong></p>
<ol>
<li>ç¼–è¯‘é€Ÿåº¦å½±å“ï¼š</li>
</ol>
<table>
<thead>
<tr>
<th align="left">ä¸¥æ ¼é€‰é¡¹</th>
<th align="left">æ€§èƒ½å½±å“</th>
<th align="left">ç¼“è§£æªæ–½</th>
</tr>
</thead>
<tbody><tr>
<td align="left">strictNullChecks</td>
<td align="left">ä¸­</td>
<td align="left">é¡¹ç›®å¼•ç”¨éš”ç¦»ä¿®æ”¹èŒƒå›´</td>
</tr>
<tr>
<td align="left">noImplicitAny</td>
<td align="left">é«˜</td>
<td align="left">æ¸è¿›å¯ç”¨ + @ts-ignore ä¸´æ—¶æ–¹æ¡ˆ</td>
</tr>
<tr>
<td align="left">strictFunctionTypes</td>
<td align="left">ä½</td>
<td align="left">æ— éœ€ç‰¹åˆ«å¤„ç†</td>
</tr>
</tbody></table>
<ol start="2">
<li>å†…å­˜å ç”¨ä¼˜åŒ–ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;strict&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;incremental&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// å¢é‡ç¼–è¯‘</span><br>    <span class="hljs-attr">&quot;tsBuildInfoFile&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./buildcache/.tsbuildinfo&quot;</span> <span class="hljs-comment">// ç¼“å­˜ä½ç½®</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<p><strong>ä¸¥æ ¼æ¨¡å¼é”™è¯¯å¤„ç†</strong></p>
<ol>
<li>å¸¸è§é”™è¯¯ç±»å‹ï¼š</li>
</ol>
<p>| é”™è¯¯ä»£ç  | å«ä¹‰ | è§£å†³æ–¹æ¡ˆ |<br>| TS7006 | å‚æ•°éšå¼ any | æ·»åŠ ç±»å‹æ³¨è§£ |<br>| TS2532 | å¯¹è±¡å¯èƒ½ä¸º undefined | æ·»åŠ ç©ºå€¼æ£€æŸ¥ |<br>| TS2564 | å±æ€§æœªåˆå§‹åŒ– | æ„é€ å‡½æ•°åˆå§‹åŒ–æˆ–æ˜ç¡®èµ‹å€¼æ–­è¨€ |<br>| TS2345 | å‚æ•°ç±»å‹ä¸åŒ¹é… | ä¿®æ­£å‚æ•°ç±»å‹æˆ–ä½¿ç”¨ç±»å‹æ–­è¨€ |</p>
<ol start="2">
<li>é”™è¯¯è‡ªåŠ¨ä¿®å¤ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// .vscode/settings.json</span><br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;typescript.tsserver.experimental.enableProjectDiagnostics&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;editor.codeActionsOnSave&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;source.fixAll.ts&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<p><strong>ä¼ä¸šçº§é…ç½®æ¨¡æ¿</strong></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// tsconfig.strict.json</span><br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;strict&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;noFallthroughCasesInSwitch&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;noUnusedLocals&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;noUnusedParameters&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;noImplicitReturns&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;forceConsistentCasingInFileNames&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;esModuleInterop&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;skipLibCheck&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;incremental&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;composite&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-literal"><span class="hljs-keyword">true</span></span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<h3 id="3-1-2-æ¨¡å—è§£æç­–ç•¥å®æˆ˜"><a href="#3-1-2-æ¨¡å—è§£æç­–ç•¥å®æˆ˜" class="headerlink" title="3.1.2 æ¨¡å—è§£æç­–ç•¥å®æˆ˜"></a>3.1.2 æ¨¡å—è§£æç­–ç•¥å®æˆ˜</h3><p><strong>æ¨¡å—è§£æç­–ç•¥æ¦‚è¿°</strong></p>
<p>TypeScript æ”¯æŒä¸¤ç§æ¨¡å—è§£æç­–ç•¥ï¼š</p>
<table>
<thead>
<tr>
<th align="left">ç­–ç•¥</th>
<th align="left">è§¦å‘æ¡ä»¶</th>
<th align="left">é€‚ç”¨åœºæ™¯</th>
</tr>
</thead>
<tbody><tr>
<td align="left">Classic</td>
<td align="left">â€œmoduleResolutionâ€: â€œClassicâ€</td>
<td align="left">TypeScript 1.6 å‰æ—§é¡¹ç›®</td>
</tr>
<tr>
<td align="left">Node</td>
<td align="left">â€œmoduleResolutionâ€: â€œNodeâ€</td>
<td align="left">ç°ä»£é¡¹ç›®ï¼ˆé»˜è®¤å€¼ï¼‰</td>
</tr>
<tr>
<td align="left">Node16&#x2F;NodeNext</td>
<td align="left">â€œmoduleResolutionâ€: â€œNode16â€</td>
<td align="left">Node.js 16+ å’Œ ESM é¡¹ç›®</td>
</tr>
</tbody></table>
<p><strong>Node è§£æç­–ç•¥è¯¦è§£</strong></p>
<p>è§£ææµç¨‹ï¼ˆimport { x } from â€˜moduleâ€™ï¼‰ï¼š</p>
<ol>
<li>æ£€æŸ¥å½“å‰ç›®å½•çš„ node_modules&#x2F;module.ts&#x2F;module.tsx&#x2F;module.d.ts</li>
<li>æ£€æŸ¥ node_modules&#x2F;module&#x2F;package.json çš„ types æˆ– main å­—æ®µ</li>
<li>æ£€æŸ¥ node_modules&#x2F;module&#x2F;index.ts&#x2F;index.d.ts</li>
<li>é€’å½’æ£€æŸ¥çˆ¶ç›®å½•çš„ node_modulesï¼ˆ..&#x2F;node_modules&#x2F;moduleï¼‰</li>
</ol>
<p>æ–‡ä»¶æ‰©å±•åè§£æé¡ºåºï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript">[<br>  <span class="hljs-string">&quot;.ts&quot;</span>, <span class="hljs-string">&quot;.tsx&quot;</span>, <span class="hljs-string">&quot;.d.ts&quot;</span>,         <span class="hljs-comment">// TypeScript æ–‡ä»¶</span><br>  <span class="hljs-string">&quot;.js&quot;</span>, <span class="hljs-string">&quot;.jsx&quot;</span>, <span class="hljs-string">&quot;.cjs&quot;</span>, <span class="hljs-string">&quot;.mjs&quot;</span>,  <span class="hljs-comment">// JavaScript æ–‡ä»¶</span><br>  <span class="hljs-string">&quot;.json&quot;</span>                         <span class="hljs-comment">// JSON æ–‡ä»¶</span><br>]<br></code></pre></td></tr></table></figure>

<p><strong>Node16&#x2F;NodeNext ç­–ç•¥</strong></p>
<p>ESM ä¸“å±ç‰¹æ€§ï¼š</p>
<ol>
<li>æ”¯æŒ package.json çš„ exports å’Œ imports å­—æ®µ</li>
<li>ä¸¥æ ¼åŒºåˆ† .js (CommonJS) å’Œ .mjs (ESM) æ–‡ä»¶</li>
<li>æ”¯æŒ type: â€œmoduleâ€ å£°æ˜</li>
</ol>
<p>exports å­—æ®µä¼˜å…ˆçº§ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;exports&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;.&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;import&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./dist/esm/index.js&quot;</span><span class="hljs-punctuation">,</span>   <span class="hljs-comment">// ESM å…¥å£</span><br>      <span class="hljs-attr">&quot;require&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./dist/cjs/index.js&quot;</span><span class="hljs-punctuation">,</span>  <span class="hljs-comment">// CommonJS å…¥å£</span><br>      <span class="hljs-attr">&quot;types&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./types/index.d.ts&quot;</span>      <span class="hljs-comment">// ç±»å‹å£°æ˜</span><br>    <span class="hljs-punctuation">&#125;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;./feature&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./dist/feature.js&quot;</span>     <span class="hljs-comment">// å­è·¯å¾„å¯¼å‡º</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<p><strong>å®æˆ˜é…ç½®ç¤ºä¾‹</strong></p>
<p>åŸºç¡€é…ç½®ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// tsconfig.json</span><br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;module&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;ESNext&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;moduleResolution&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Node16&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;baseUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;./src&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;paths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;@components/*&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;components/*&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-attr">&quot;@utils&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;utils/index&quot;</span><span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<p>å¤šç¯å¢ƒé…ç½®ï¼š</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;compilerOptions&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;moduleResolution&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;Node16&quot;</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;paths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>      <span class="hljs-attr">&quot;config&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>        <span class="hljs-string">&quot;config/prod&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ç”Ÿäº§ç¯å¢ƒ</span><br>        <span class="hljs-string">&quot;config/dev&quot;</span>   <span class="hljs-comment">// å¼€å‘ç¯å¢ƒ</span><br>      <span class="hljs-punctuation">]</span><br>    <span class="hljs-punctuation">&#125;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<p><strong>è·¯å¾„æ˜ å°„å®æˆ˜</strong></p>
<ol>
<li>åˆ«åé…ç½®ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;baseUrl&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;.&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;paths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;@app/*&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;src/*&quot;</span><span class="hljs-punctuation">]</span><span class="hljs-punctuation">,</span><br>    <span class="hljs-attr">&quot;shared/*&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><span class="hljs-string">&quot;../shared/*&quot;</span><span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>å¤šè·¯å¾„å›é€€ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;paths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;legacy-utils&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-string">&quot;src/utils/v2&quot;</span><span class="hljs-punctuation">,</span> <span class="hljs-comment">// ä¼˜å…ˆä½¿ç”¨ v2</span><br>      <span class="hljs-string">&quot;src/utils/v1&quot;</span>  <span class="hljs-comment">// å›é€€åˆ° v1</span><br>    <span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>é€šé…ç¬¦æ‰©å±•ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;paths&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;@assets/*&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">[</span><br>      <span class="hljs-string">&quot;assets/*&quot;</span><span class="hljs-punctuation">,</span><br>      <span class="hljs-string">&quot;public/images/*&quot;</span><br>    <span class="hljs-punctuation">]</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<p><strong>å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</strong></p>
<p>é—®é¢˜1ï¼šè·¯å¾„æ˜ å°„è¿è¡Œæ—¶å¤±æ•ˆ</p>
<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs bash"><span class="hljs-comment"># å®‰è£…è¿è¡Œæ—¶è§£æå™¨</span><br>npm install tsconfig-paths --save-dev<br><br><span class="hljs-comment"># Node.js å¯åŠ¨å‘½ä»¤</span><br>node -r tsconfig-paths/register app.ts<br></code></pre></td></tr></table></figure>

<p>é—®é¢˜2ï¼šå¾ªç¯ä¾èµ–è§£æå¤±è´¥</p>
<p>é‡æ„æ–¹æ¡ˆï¼š</p>
<pre class="mermaid">graph LR
    A[ModuleA] -->|import| B[ModuleB]
    B -->|import| C[ModuleC]
    C -->|import| A[ModuleA]
    
    subgraph é‡æ„å
    D[Common] --> E[ModuleA]
    D[Common] --> F[ModuleB]
    D[Common] --> G[ModuleC]
    end</pre>

<p>é—®é¢˜3ï¼šåŠ¨æ€å¯¼å…¥ç±»å‹ä¸¢å¤±</p>
<p>ç±»å‹å®‰å…¨æ–¹æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åŠ¨æ€å¯¼å…¥ç±»å‹å°è£…</span><br><span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> safeImport&lt;T&gt;(<span class="hljs-attr">path</span>: <span class="hljs-built_in">string</span>): <span class="hljs-title class_">Promise</span>&lt;T&gt; &#123;<br>  <span class="hljs-keyword">const</span> <span class="hljs-variable language_">module</span> = <span class="hljs-keyword">await</span> <span class="hljs-keyword">import</span>(path);<br>  <span class="hljs-keyword">return</span> <span class="hljs-variable language_">module</span> <span class="hljs-keyword">as</span> T;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ChartModule</span> &#123;<br>  <span class="hljs-attr">render</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">data</span>: <span class="hljs-built_in">any</span></span>) =&gt;</span> <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-keyword">const</span> chart = <span class="hljs-keyword">await</span> safeImport&lt;<span class="hljs-title class_">ChartModule</span>&gt;(<span class="hljs-string">&quot;./chart&quot;</span>);<br>chart.<span class="hljs-title function_">render</span>(data);<br></code></pre></td></tr></table></figure>

<p><strong>æ„å»ºå·¥å…·é›†æˆ</strong></p>
<ol>
<li>Webpack é…ç½®ï¼š</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// webpack.config.js</span><br><span class="hljs-keyword">const</span> <span class="hljs-title class_">TsconfigPathsPlugin</span> = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;tsconfig-paths-webpack-plugin&#x27;</span>);<br><br><span class="hljs-variable language_">module</span>.<span class="hljs-property">exports</span> = &#123;<br>  <span class="hljs-attr">resolve</span>: &#123;<br>    <span class="hljs-attr">plugins</span>: [<span class="hljs-keyword">new</span> <span class="hljs-title class_">TsconfigPathsPlugin</span>()],<br>    <span class="hljs-attr">extensions</span>: [<span class="hljs-string">&#x27;.ts&#x27;</span>, <span class="hljs-string">&#x27;.tsx&#x27;</span>, <span class="hljs-string">&#x27;.js&#x27;</span>]<br>  &#125;<br>&#125;;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>Vite é…ç½®ï¼š</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs javascript"><span class="hljs-comment">// vite.config.ts</span><br><span class="hljs-keyword">import</span> &#123; defineConfig &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite&#x27;</span>;<br><span class="hljs-keyword">import</span> tsconfigPaths <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;vite-tsconfig-paths&#x27;</span>;<br><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> <span class="hljs-title function_">defineConfig</span>(&#123;<br>  <span class="hljs-attr">plugins</span>: [<span class="hljs-title function_">tsconfigPaths</span>()]<br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="3-1-3-å£°æ˜æ–‡ä»¶ç”Ÿæˆé…ç½®"><a href="#3-1-3-å£°æ˜æ–‡ä»¶ç”Ÿæˆé…ç½®" class="headerlink" title="3.1.3 å£°æ˜æ–‡ä»¶ç”Ÿæˆé…ç½®"></a>3.1.3 å£°æ˜æ–‡ä»¶ç”Ÿæˆé…ç½®</h3><h3 id="3-1-4-ç¼–è¯‘å™¨ç¼“å­˜ç­–ç•¥"><a href="#3-1-4-ç¼–è¯‘å™¨ç¼“å­˜ç­–ç•¥" class="headerlink" title="3.1.4 ç¼–è¯‘å™¨ç¼“å­˜ç­–ç•¥"></a>3.1.4 ç¼–è¯‘å™¨ç¼“å­˜ç­–ç•¥</h3><h2 id="3-2-å£°æ˜æ–‡ä»¶-d-ts"><a href="#3-2-å£°æ˜æ–‡ä»¶-d-ts" class="headerlink" title="3.2 å£°æ˜æ–‡ä»¶(.d.ts)"></a>3.2 å£°æ˜æ–‡ä»¶(.d.ts)</h2><h3 id="3-2-1-ç¬¬ä¸‰æ–¹åº“ç±»å‹æ‰©å±•æŠ€å·§"><a href="#3-2-1-ç¬¬ä¸‰æ–¹åº“ç±»å‹æ‰©å±•æŠ€å·§" class="headerlink" title="3.2.1 ç¬¬ä¸‰æ–¹åº“ç±»å‹æ‰©å±•æŠ€å·§"></a>3.2.1 ç¬¬ä¸‰æ–¹åº“ç±»å‹æ‰©å±•æŠ€å·§</h3><p><strong>å£°æ˜æ–‡ä»¶æ‰©å±•åŸºç¡€</strong></p>
<p>æ ¸å¿ƒæ–¹æ³•ï¼šä½¿ç”¨ declare module è¯­æ³•æ‰©å±•ç¬¬ä¸‰æ–¹åº“ç±»å‹</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// global.d.ts</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;ç¬¬ä¸‰æ–¹åº“å&#x27;</span> &#123;<br>  <span class="hljs-comment">// æ‰©å±•å†…å®¹</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å¸¸è§æ‰©å±•åœºæ™¯</strong></p>
<ol>
<li>æ·»åŠ ç¼ºå¤±ç±»å‹ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;untyped-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">calculate</span>(<span class="hljs-params"><span class="hljs-attr">a</span>: <span class="hljs-built_in">number</span>, <span class="hljs-attr">b</span>: <span class="hljs-built_in">number</span></span>): <span class="hljs-built_in">number</span>;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">version</span>: <span class="hljs-built_in">string</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>æ‰©å±•ç°æœ‰æ¥å£ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> <span class="hljs-string">&#x27;react&#x27;</span>;<br><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;react&#x27;</span> &#123;<br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">HTMLAttributes</span>&lt;T&gt; &#123;<br>    <span class="hljs-comment">// æ·»åŠ è‡ªå®šä¹‰å±æ€§</span><br>    <span class="hljs-attr">customAttr</span>?: <span class="hljs-built_in">string</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br>&lt;div customAttr=<span class="hljs-string">&quot;value&quot;</span> /&gt;; <span class="hljs-comment">// âœ… ç±»å‹å®‰å…¨</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>è¦†ç›–é”™è¯¯ç±»å‹ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;flawed-lib&#x27;</span> &#123;<br>  <span class="hljs-comment">// ä¿®æ­£é”™è¯¯è¿”å›ç±»å‹</span><br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchData</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">Data</span>&gt;; <span class="hljs-comment">// åŸå£°æ˜ä¸º any</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>æ¨¡å—åˆå¹¶ç­–ç•¥</strong></p>
<ol>
<li>æ¥å£åˆå¹¶ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åŸå§‹å£°æ˜</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span> &#123;<br>  <span class="hljs-attr">timeout</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-comment">// æ‰©å±•å£°æ˜</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;configurable-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span> &#123;<br>    <span class="hljs-attr">retries</span>?: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// æ·»åŠ å¯é€‰å±æ€§</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>å‡½æ•°é‡è½½æ‰©å±•ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åŸå§‹å‡½æ•°</span><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params"><span class="hljs-attr">message</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">void</span>;<br><br><span class="hljs-comment">// æ‰©å±•é‡è½½</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;logger-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">log</span>(<span class="hljs-params"><span class="hljs-attr">data</span>: <span class="hljs-built_in">object</span></span>): <span class="hljs-built_in">void</span>; <span class="hljs-comment">// æ·»åŠ å¯¹è±¡æ”¯æŒ</span><br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>å‘½åç©ºé—´åˆå¹¶ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åŸå§‹å‘½åç©ºé—´</span><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Analytics</span> &#123;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">track</span>(<span class="hljs-params"><span class="hljs-attr">event</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-comment">// æ‰©å±•å‘½åç©ºé—´</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;analytics-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Analytics</span> &#123;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">identify</span>(<span class="hljs-params"><span class="hljs-attr">userId</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">void</span>; <span class="hljs-comment">// æ·»åŠ æ–°æ–¹æ³•</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>ç±»å‹æ‰©å±•æœ€ä½³å®è·µ</strong></p>
<ol>
<li>æ¨¡å—åŒ–æ‰©å±•æ–‡ä»¶ï¼š</li>
</ol>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs text">src/<br>  types/<br>    extensions/<br>      react.d.ts      # Reactæ‰©å±•<br>      lodash.d.ts     # Lodashæ‰©å±•<br>      global.d.ts     # å…¨å±€æ‰©å±•<br>  tsconfig.json<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>æ¡ä»¶æ‰©å±•æ¨¡å¼ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ ¹æ®ç¯å¢ƒå˜é‡æ‰©å±•</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Env</span> = <span class="hljs-string">&#x27;development&#x27;</span> | <span class="hljs-string">&#x27;production&#x27;</span>;<br><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;configurable-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span> &#123;<br>    <span class="hljs-attr">debug</span>?: <span class="hljs-title class_">Env</span> <span class="hljs-keyword">extends</span> <span class="hljs-string">&#x27;development&#x27;</span> ? <span class="hljs-built_in">boolean</span> : <span class="hljs-built_in">never</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>ç±»å‹å®‰å…¨å¢å¼ºï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ·»åŠ ä¸¥æ ¼ç±»å‹çº¦æŸ</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;flexible-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">unknown</span>;<br>  <span class="hljs-keyword">function</span> parse&lt;T&gt;(<span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span>): T; <span class="hljs-comment">// æ³›å‹ç‰ˆæœ¬</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>é«˜çº§æ‰©å±•æŠ€å·§</strong></p>
<ol>
<li>æ¨¡æ¿å­—é¢é‡ç±»å‹æ‰©å±•ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;router-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">type</span> <span class="hljs-title class_">DynamicRoute</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span>&gt; = <br>    T <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">string</span>&#125;</span>:<span class="hljs-subst">$&#123;infer Param&#125;</span><span class="hljs-subst">$&#123;<span class="hljs-built_in">string</span>&#125;</span>`</span> ? <span class="hljs-title class_">Param</span> : <span class="hljs-built_in">never</span>;<br>  <br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Router</span> &#123;<br>    <span class="hljs-title function_">get</span>(<span class="hljs-attr">route</span>: <span class="hljs-built_in">string</span>): <span class="hljs-built_in">void</span>;<br>    <span class="hljs-attr">params</span>: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-title class_">DynamicRoute</span>&lt;keyof <span class="hljs-variable language_">this</span>.<span class="hljs-property">routes</span>&gt;, <span class="hljs-built_in">string</span>&gt;;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>æ³›å‹çº¦æŸå¢å¼ºï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;storage-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Storage</span>&lt;T <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">any</span>&gt;&gt; &#123;<br>    get&lt;K <span class="hljs-keyword">extends</span> keyof T&gt;(<span class="hljs-attr">key</span>: K): T[K];<br>    set&lt;K <span class="hljs-keyword">extends</span> keyof T&gt;(<span class="hljs-attr">key</span>: K, <span class="hljs-attr">value</span>: T[K]): <span class="hljs-built_in">void</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>ç±»å‹è°“è¯æ‰©å±•ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;validator-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Validators</span> &#123;<br>    <span class="hljs-attr">isEmail</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">unknown</span></span>) =&gt;</span> input is <span class="hljs-built_in">string</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ</strong></p>
<p>é—®é¢˜1ï¼šæ¨¡å—æ‰©å±•å†²çª</p>
<p>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨å”¯ä¸€æ ‡è¯†ç¬¦</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åŸå§‹åº“</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;ui-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ButtonProps</span> &#123;<br>    <span class="hljs-attr">variant</span>: <span class="hljs-string">&#x27;primary&#x27;</span> | <span class="hljs-string">&#x27;secondary&#x27;</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// æ‰©å±•ï¼ˆé¿å…ç›´æ¥ä¿®æ”¹ï¼‰</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;ui-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ButtonProps</span> &#123;<br>    <span class="hljs-attr">__extendedVariant</span>?: <span class="hljs-string">&#x27;tertiary&#x27;</span>; <span class="hljs-comment">// ä½¿ç”¨ç‰¹æ®Šå‰ç¼€</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>é—®é¢˜2ï¼šå…¨å±€æ±¡æŸ“</p>
<p>è§£å†³æ–¹æ¡ˆï¼šå°è£…æ‰©å±•</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å®‰å…¨æ‰©å±•æ–¹æ¡ˆ</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ExtendedLib</span> = <span class="hljs-keyword">typeof</span> <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;base-lib&#x27;</span>) &amp; &#123;<br>  <span class="hljs-attr">newMethod</span>: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;<br>&#125;;<br><br><span class="hljs-keyword">const</span> lib = <span class="hljs-built_in">require</span>(<span class="hljs-string">&#x27;base-lib&#x27;</span>) <span class="hljs-keyword">as</span> <span class="hljs-title class_">ExtendedLib</span>;<br>lib.<span class="hljs-title function_">newMethod</span>(); <span class="hljs-comment">// å®‰å…¨è®¿é—®</span><br></code></pre></td></tr></table></figure>

<p>é—®é¢˜3ï¼šç±»å‹è¦†ç›–ä¸¢å¤±</p>
<p>è§£å†³æ–¹æ¡ˆï¼šç‰ˆæœ¬åŒ–æ‰©å±•</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ ¹æ®åº“ç‰ˆæœ¬åŠ¨æ€æ‰©å±•</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">LibVersion</span> = <span class="hljs-string">&#x27;1.x&#x27;</span> | <span class="hljs-string">&#x27;2.x&#x27;</span>;<br><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">global</span> &#123;<br>  <span class="hljs-keyword">var</span> <span class="hljs-attr">__libVersion</span>: <span class="hljs-title class_">LibVersion</span>;<br>&#125;<br><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;versioned-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span> &#123;<br>    [__libVersion <span class="hljs-keyword">extends</span> <span class="hljs-string">&#x27;2.x&#x27;</span> ? <span class="hljs-string">&#x27;newFeature&#x27;</span> : <span class="hljs-built_in">never</span>]: <span class="hljs-built_in">boolean</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>React ç”Ÿæ€æ‰©å±•</strong></p>
<ol>
<li>ç»„ä»¶å±æ€§æ‰©å±•ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;react-table&#x27;</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ColumnInstance</span>&lt;D <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span> = &#123;&#125;&gt; &#123;<br>    <span class="hljs-attr">align</span>?: <span class="hljs-string">&#x27;left&#x27;</span> | <span class="hljs-string">&#x27;center&#x27;</span> | <span class="hljs-string">&#x27;right&#x27;</span>; <span class="hljs-comment">// æ·»åŠ å¯¹é½å±æ€§</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>Hooks è¿”å›å€¼æ‰©å±•ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;react-query&#x27;</span> &#123;<br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">QueryResult</span>&lt;T&gt; &#123;<br>    <span class="hljs-attr">customMeta</span>?: &#123; <span class="hljs-attr">timestamp</span>: <span class="hljs-built_in">number</span> &#125;; <span class="hljs-comment">// æ·»åŠ å…ƒæ•°æ®</span><br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>Context ç±»å‹å¢å¼ºï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">import</span> &#123; <span class="hljs-title class_">ThemeContext</span> &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;theme-provider&#x27;</span>;<br><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;theme-provider&#x27;</span> &#123;<br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Theme</span> &#123;<br>    <span class="hljs-attr">customColor</span>: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// æ‰©å±•ä¸»é¢˜å¯¹è±¡</span><br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> theme = <span class="hljs-title function_">useContext</span>(<span class="hljs-title class_">ThemeContext</span>);<br>theme.<span class="hljs-property">customColor</span>; <span class="hljs-comment">// âœ… ç±»å‹å®‰å…¨</span><br></code></pre></td></tr></table></figure>

<p><strong>æ‰©å±•æµ‹è¯•ç­–ç•¥</strong></p>
<ol>
<li>ç±»å‹æµ‹è¯•ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// éªŒè¯æ‰©å±•æ˜¯å¦ç”Ÿæ•ˆ</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Test</span> = <span class="hljs-title class_">Expect</span>&lt;<br>  <span class="hljs-comment">// æ£€æŸ¥æ‰©å±•å±æ€§æ˜¯å¦å­˜åœ¨</span><br>  <span class="hljs-string">&#x27;customAttr&#x27;</span> <span class="hljs-keyword">extends</span> keyof <span class="hljs-title class_">React</span>.<span class="hljs-property">HTMLAttributes</span>&lt;<span class="hljs-built_in">any</span>&gt; ? <span class="hljs-literal">true</span> : <span class="hljs-literal">false</span><br>&gt;;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>è¿è¡Œæ—¶éªŒè¯ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ç¡®ä¿æ‰©å±•ä¸è¿è¡Œæ—¶å…¼å®¹</span><br><span class="hljs-keyword">if</span> (<span class="hljs-string">&#x27;newMethod&#x27;</span> <span class="hljs-keyword">in</span> lib) &#123;<br>  lib.<span class="hljs-title function_">newMethod</span>();<br>&#125; <span class="hljs-keyword">else</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">warn</span>(<span class="hljs-string">&#x27;Library extension not available&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹åŒ–å»ºè®®</strong></p>
<ol>
<li>æ‰©å±•æ–‡æ¡£åŒ–ï¼š</li>
</ol>
<figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs markdown"><span class="hljs-section">## UI åº“æ‰©å±•è¯´æ˜</span><br><br><span class="hljs-section">### æ–°å¢å±æ€§</span><br>| å±æ€§å        | ç±»å‹   | è¯´æ˜               |<br>|---------------|--------|--------------------|<br>| customAttr    | string | è‡ªå®šä¹‰HTMLå±æ€§     |<br>| <span class="hljs-strong">__extendedVariant | &#x27;tertiary&#x27; | ç‰¹æ®ŠæŒ‰é’®ç±»å‹    |</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>ç‰ˆæœ¬ç®¡ç†ç­–ç•¥ï¼š</li>
</ol>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs json"><span class="hljs-comment">// package.json</span><br><span class="hljs-punctuation">&#123;</span><br>  <span class="hljs-attr">&quot;name&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;@types/custom-lib-extension&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;version&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;1.0.0&quot;</span><span class="hljs-punctuation">,</span><br>  <span class="hljs-attr">&quot;peerDependencies&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-punctuation">&#123;</span><br>    <span class="hljs-attr">&quot;target-lib&quot;</span><span class="hljs-punctuation">:</span> <span class="hljs-string">&quot;^2.0.0&quot;</span><br>  <span class="hljs-punctuation">&#125;</span><br><span class="hljs-punctuation">&#125;</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>æ‰©å±•å‘å¸ƒæµç¨‹ï¼š</li>
</ol>
<pre class="mermaid">graph LR
    A[åˆ›å»ºæ‰©å±•å£°æ˜] --> B[æœ¬åœ°æµ‹è¯•éªŒè¯]
    B --> C[å‘å¸ƒåˆ°å†…éƒ¨npm]
    C --> D[é¡¹ç›®å®‰è£…ä½¿ç”¨]</pre>

<p><strong>æ‰©å±•å®‰å…¨æŒ‡å—</strong></p>
<ol>
<li>é¿å…å…¨å±€æ±¡æŸ“ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// é”™è¯¯ï¼šå…¨å±€æ‰©å±•åŸºç¡€ç±»å‹</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Array</span>&lt;T&gt; &#123;<br>  <span class="hljs-title function_">customMethod</span>(): <span class="hljs-built_in">void</span>;<br>&#125;<br><br><span class="hljs-comment">// æ­£ç¡®ï¼šæ¨¡å—åŒ–æ‰©å±•</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;array-extension&#x27;</span> &#123;<br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Array</span>&lt;T&gt; &#123;<br>    <span class="hljs-title function_">safeCustomMethod</span>(): <span class="hljs-built_in">void</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>é˜²å¾¡æ€§ç±»å‹æ£€æŸ¥ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å®‰å…¨æ‰©å±•å‡½æ•°</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;utils-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">unknown</span></span>): <span class="hljs-built_in">unknown</span>;<br>  <span class="hljs-keyword">function</span> parse&lt;T&gt;(<span class="hljs-attr">input</span>: T): T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">string</span> ? <span class="hljs-title class_">Data</span> : <span class="hljs-built_in">never</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>å…¼å®¹æ€§å¤„ç†ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å¤„ç†ä¸åŒç‰ˆæœ¬çš„åº“</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;multi-version-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">CoreAPI</span> &#123;<br>    <span class="hljs-title function_">commonMethod</span>(): <span class="hljs-built_in">void</span>;<br>  &#125;<br>  <br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> V1API <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CoreAPI</span> &#123;<br>    <span class="hljs-title function_">v1Method</span>(): <span class="hljs-built_in">void</span>;<br>  &#125;<br>  <br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> V2API <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CoreAPI</span> &#123;<br>    <span class="hljs-title function_">v2Method</span>(): <span class="hljs-built_in">void</span>;<br>  &#125;<br>  <br>  <span class="hljs-keyword">const</span> <span class="hljs-attr">api</span>: <span class="hljs-variable constant_">V1API</span> | <span class="hljs-variable constant_">V2API</span>;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">default</span> api;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>æ‰©å±•å‚è€ƒè¡¨</strong></p>
<table>
<thead>
<tr>
<th align="left">æ‰©å±•ç±»å‹</th>
<th align="left">é€‚ç”¨åœºæ™¯</th>
<th align="left">ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">æ¥å£å±æ€§æ‰©å±•</td>
<td align="left">æ·»åŠ æ–°å±æ€§&#x2F;æ–¹æ³•</td>
<td align="left"><code>interface &#123; newProp: type &#125;</code></td>
</tr>
<tr>
<td align="left">å‡½æ•°é‡è½½æ‰©å±•</td>
<td align="left">æ”¯æŒæ–°å‚æ•°ç±»å‹</td>
<td align="left"><code>function log(data: object)</code></td>
</tr>
<tr>
<td align="left">æ³›å‹çº¦æŸå¢å¼º</td>
<td align="left">å¢åŠ ç±»å‹å‚æ•°çº¦æŸ</td>
<td align="left"><code>Storage&lt;T extends object&gt;</code></td>
</tr>
<tr>
<td align="left">æ¡ä»¶ç±»å‹æ‰©å±•</td>
<td align="left">æ ¹æ®ç¯å¢ƒåŠ¨æ€æ‰©å±•</td>
<td align="left"><code>debug?: Env extends &#39;dev&#39;</code></td>
</tr>
<tr>
<td align="left">æ¨¡æ¿å­—é¢é‡æ‰©å±•</td>
<td align="left">è·¯ç”±å‚æ•°&#x2F;å›½é™…åŒ–é”®å</td>
<td align="left"><code>DynamicRoute&lt;path&gt;</code></td>
</tr>
<tr>
<td align="left">ç±»å‹è°“è¯æ‰©å±•</td>
<td align="left">è‡ªå®šä¹‰ç±»å‹å®ˆå«</td>
<td align="left"><code>isEmail(input): input is string</code></td>
</tr>
</tbody></table>
<h3 id="3-2-2-æ¨¡å—å£°æ˜åˆå¹¶ç­–ç•¥"><a href="#3-2-2-æ¨¡å—å£°æ˜åˆå¹¶ç­–ç•¥" class="headerlink" title="3.2.2 æ¨¡å—å£°æ˜åˆå¹¶ç­–ç•¥"></a>3.2.2 æ¨¡å—å£°æ˜åˆå¹¶ç­–ç•¥</h3><p><strong>å£°æ˜åˆå¹¶åŸºç¡€æ¦‚å¿µ</strong></p>
<p>æ ¸å¿ƒæœºåˆ¶ï¼šTypeScript å…è®¸å°†å¤šä¸ªåŒåçš„å£°æ˜åˆå¹¶ä¸ºå•ä¸€ç±»å‹å®šä¹‰</p>
<p>åˆå¹¶ç±»å‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>;<br>&#125;<br><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">User</span> &#123;<br>  <span class="hljs-attr">age</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br><br><span class="hljs-comment">// åˆå¹¶ç»“æœ</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">user</span>: <span class="hljs-title class_">User</span> = &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Alice&quot;</span>,<br>  <span class="hljs-attr">age</span>: <span class="hljs-number">30</span>  <span class="hljs-comment">// âœ… åˆå¹¶å±æ€§</span><br>&#125;;<br></code></pre></td></tr></table></figure>

<p><strong>æ¨¡å—å£°æ˜åˆå¹¶ç­–ç•¥</strong></p>
<ol>
<li>æ¥å£åˆå¹¶ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// module.d.ts</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;my-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span> &#123;<br>    <span class="hljs-attr">timeout</span>: <span class="hljs-built_in">number</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// user-extension.d.ts</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;my-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span> &#123;<br>    <span class="hljs-attr">retries</span>?: <span class="hljs-built_in">number</span>; <span class="hljs-comment">// æ·»åŠ æ–°å±æ€§</span><br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// åˆå¹¶ç»“æœ</span><br><span class="hljs-keyword">const</span> <span class="hljs-attr">config</span>: <span class="hljs-keyword">import</span>(<span class="hljs-string">&#x27;my-lib&#x27;</span>).<span class="hljs-property">Config</span> = &#123;<br>  <span class="hljs-attr">timeout</span>: <span class="hljs-number">1000</span>,<br>  <span class="hljs-attr">retries</span>: <span class="hljs-number">3</span>  <span class="hljs-comment">// âœ…</span><br>&#125;;<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>å‡½æ•°åˆå¹¶ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åŸå§‹å£°æ˜</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;utils&#x27;</span> &#123;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">any</span>;<br>&#125;<br><br><span class="hljs-comment">// æ‰©å±•å£°æ˜</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;utils&#x27;</span> &#123;<br>  <span class="hljs-keyword">function</span> parse&lt;T&gt;(<span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span>): T; <span class="hljs-comment">// æ³›å‹ç‰ˆæœ¬</span><br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-keyword">const</span> data = parse&lt;&#123; <span class="hljs-attr">id</span>: <span class="hljs-built_in">string</span> &#125;&gt;(<span class="hljs-string">&#x27;&#123;&quot;id&quot;:&quot;123&quot;&#125;&#x27;</span>); <span class="hljs-comment">// âœ… ç±»å‹å®‰å…¨</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li>å‘½åç©ºé—´åˆå¹¶ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åŸå§‹å‘½åç©ºé—´</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;analytics&#x27;</span> &#123;<br>  <span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Tracking</span> &#123;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">pageview</span>(<span class="hljs-params"><span class="hljs-attr">url</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">void</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// æ‰©å±•å‘½åç©ºé—´</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;analytics&#x27;</span> &#123;<br>  <span class="hljs-keyword">namespace</span> <span class="hljs-title class_">Tracking</span> &#123;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">event</span>(<span class="hljs-params"><span class="hljs-attr">name</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">data</span>: <span class="hljs-built_in">object</span></span>): <span class="hljs-built_in">void</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br><span class="hljs-title class_">Tracking</span>.<span class="hljs-title function_">event</span>(<span class="hljs-string">&quot;click&quot;</span>, &#123; <span class="hljs-attr">button</span>: <span class="hljs-string">&quot;submit&quot;</span> &#125;); <span class="hljs-comment">// âœ…</span><br></code></pre></td></tr></table></figure>

<p><strong>åˆå¹¶ä¼˜å…ˆçº§è§„åˆ™</strong></p>
<table>
<thead>
<tr>
<th align="left">å£°æ˜ç±»å‹</th>
<th align="left">åˆå¹¶ä¼˜å…ˆçº§</th>
<th align="left">ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">æ¥å£å±æ€§</td>
<td align="left">é¡ºåºæ— å…³ï¼ŒåŒåå±æ€§å¿…é¡»å…¼å®¹</td>
<td align="left"><code>interface A &#123; x: number &#125;</code><br><code>interface A &#123; x: string &#125;</code> â†’ é”™è¯¯</td>
</tr>
<tr>
<td align="left">å‡½æ•°é‡è½½</td>
<td align="left">åå£°æ˜ä¼˜å…ˆ</td>
<td align="left">æœ€åå£°æ˜çš„ç­¾åæœ€å…ˆåŒ¹é…</td>
</tr>
<tr>
<td align="left">å‘½åç©ºé—´</td>
<td align="left">æŒ‰å£°æ˜é¡ºåºåˆå¹¶</td>
<td align="left">åå£°æ˜çš„æˆå‘˜è¦†ç›–å…ˆå‰çš„</td>
</tr>
<tr>
<td align="left">ç±»ä¸æ¥å£</td>
<td align="left">æ¥å£å£°æ˜ä¼˜å…ˆ</td>
<td align="left">ç±»å®ç°å¿…é¡»æ»¡è¶³æ‰€æœ‰æ¥å£å£°æ˜</td>
</tr>
</tbody></table>
<p><strong>æ¨¡å—åˆå¹¶æœ€ä½³å®è·µ</strong></p>
<ol>
<li>åˆ†å±‚å£°æ˜ç»“æ„ï¼š</li>
</ol>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs text">types/<br>  â”œâ”€â”€ lib/<br>  â”‚   â”œâ”€â”€ base.d.ts      // åŸºç¡€å£°æ˜<br>  â”‚   â””â”€â”€ extensions/    // æ‰©å±•å£°æ˜<br>  â”‚       â”œâ”€â”€ v1.d.ts<br>  â”‚       â””â”€â”€ v2.d.ts<br>  â””â”€â”€ global.d.ts        // å…¨å±€åˆå¹¶<br></code></pre></td></tr></table></figure>

<ol start="2">
<li>ç‰ˆæœ¬åŒ–åˆå¹¶ç­–ç•¥ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ¡ä»¶åˆå¹¶</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">LibVersion</span> = <span class="hljs-string">&#x27;v1&#x27;</span> | <span class="hljs-string">&#x27;v2&#x27;</span>;<br><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;versioned-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Api</span> &#123;<br>    <span class="hljs-title function_">commonMethod</span>(): <span class="hljs-built_in">void</span>;<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;versioned-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Api</span> &#123;<br>    [<span class="hljs-title class_">LibVersion</span> <span class="hljs-keyword">extends</span> <span class="hljs-string">&#x27;v2&#x27;</span> ? <span class="hljs-string">&#x27;newMethod&#x27;</span> : <span class="hljs-built_in">never</span>]?: <span class="hljs-function">() =&gt;</span> <span class="hljs-built_in">void</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<ol start="3">
<li>å®‰å…¨è¦†ç›–æ¨¡å¼ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;sensitive-lib&#x27;</span> &#123;<br>  <span class="hljs-keyword">interface</span> __OriginalConfig &#123;<br>    <span class="hljs-comment">// ä¿ç•™åŸå§‹å®šä¹‰</span><br>    <span class="hljs-attr">originalProp</span>: <span class="hljs-built_in">string</span>;<br>  &#125;<br>  <br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span> <span class="hljs-keyword">extends</span> __OriginalConfig &#123;<br>    <span class="hljs-comment">// å®‰å…¨æ‰©å±•</span><br>    <span class="hljs-attr">customProp</span>?: <span class="hljs-built_in">number</span>;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>React ç»„ä»¶åˆå¹¶æ¡ˆä¾‹</strong></p>
<ol>
<li>ç»„ä»¶å±æ€§åˆå¹¶ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åŸå§‹ç»„ä»¶å£°æ˜</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;react-ui&#x27;</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ButtonProps</span> &#123;<br>    <span class="hljs-attr">variant</span>: <span class="hljs-string">&#x27;primary&#x27;</span> | <span class="hljs-string">&#x27;secondary&#x27;</span>;<br>  &#125;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">Button</span>(<span class="hljs-params"><span class="hljs-attr">props</span>: <span class="hljs-title class_">ButtonProps</span></span>): <span class="hljs-variable constant_">JSX</span>.<span class="hljs-property">Element</span>;<br>&#125;<br><br><span class="hljs-comment">// æ‰©å±•å±æ€§</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;react-ui&#x27;</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ButtonProps</span> &#123;<br>    <span class="hljs-attr">size</span>?: <span class="hljs-string">&#x27;sm&#x27;</span> | <span class="hljs-string">&#x27;md&#x27;</span> | <span class="hljs-string">&#x27;lg&#x27;</span>; <span class="hljs-comment">// æ·»åŠ æ–°å±æ€§</span><br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// ä½¿ç”¨</span><br>&lt;<span class="hljs-title class_">Button</span> variant=<span class="hljs-string">&quot;primary&quot;</span> size=<span class="hljs-string">&quot;md&quot;</span> /&gt;; <span class="hljs-comment">// âœ…</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li>Hooks è¿”å›å€¼åˆå¹¶ï¼š</li>
</ol>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// åŸå§‹Hook</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;react-hooks&#x27;</span> &#123;<br>  <span class="hljs-keyword">function</span> <span class="hljs-title function_">useData</span>(<span class="hljs-params"></span>): &#123; <span class="hljs-attr">loading</span>: <span class="hljs-built_in">boolean</span>; <span class="hljs-attr">data</span>: <span class="hljs-built_in">any</span> &#125;;<br>&#125;<br><br><span class="hljs-comment">// æ‰©å±•è¿”å›å€¼</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&#x27;react-hooks&#x27;</span> &#123;<br>  <span class="hljs-keyword">function</span> useData&lt;T&gt;(): &#123; <span class="hljs-attr">loading</span>: <span class="hljs-built_in">boolean</span>; <span class="hljs-attr">data</span>: T | <span class="hljs-literal">null</span>; <span class="hljs-attr">error</span>?: <span class="hljs-title class_">Error</span> &#125;;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>åˆå¹¶å†²çªè§£å†³æ–¹æ¡ˆ</strong></p>
<p>å†²çªç±»å‹ 1ï¼šå±æ€§ç±»å‹ä¸å…¼å®¹</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// å£°æ˜1</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span> &#123;<br>  <span class="hljs-attr">logLevel</span>: <span class="hljs-built_in">string</span>;<br>&#125;<br><br><span class="hljs-comment">// å£°æ˜2</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span> &#123;<br>  <span class="hljs-attr">logLevel</span>: <span class="hljs-string">&#x27;debug&#x27;</span> | <span class="hljs-string">&#x27;info&#x27;</span>; <span class="hljs-comment">// ğŸš« ç±»å‹å†²çª</span><br>&#125;<br></code></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ–¹æ³•1ï¼šä½¿ç”¨è”åˆç±»å‹</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span> &#123;<br>  <span class="hljs-attr">logLevel</span>: <span class="hljs-built_in">string</span> | <span class="hljs-string">&#x27;debug&#x27;</span> | <span class="hljs-string">&#x27;info&#x27;</span>;<br>&#125;<br><br><span class="hljs-comment">// æ–¹æ³•2ï¼šç‰ˆæœ¬åŒ–å£°æ˜</span><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">__configVersion</span>: <span class="hljs-string">&#x27;v1&#x27;</span> | <span class="hljs-string">&#x27;v2&#x27;</span>;<br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span> &#123;<br>  <span class="hljs-attr">logLevel</span>: __configVersion <span class="hljs-keyword">extends</span> <span class="hljs-string">&#x27;v2&#x27;</span> ? <span class="hljs-string">&#x27;debug&#x27;</span> | <span class="hljs-string">&#x27;info&#x27;</span> : <span class="hljs-built_in">string</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>å†²çªç±»å‹ 2ï¼šå‡½æ•°é‡è½½æ­§ä¹‰</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">declare</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">any</span>;<br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">object</span>; <span class="hljs-comment">// ğŸš« ç›¸åŒå‚æ•°ç±»å‹</span><br></code></pre></td></tr></table></figure>

<p>è§£å†³æ–¹æ¡ˆï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ˜ç¡®é‡è½½é¡ºåº</span><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">string</span></span>): <span class="hljs-built_in">any</span>;<br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">parse</span>(<span class="hljs-params"><span class="hljs-attr">input</span>: <span class="hljs-built_in">object</span></span>): <span class="hljs-built_in">object</span>; <span class="hljs-comment">// âœ… ä¸åŒå‚æ•°ç±»å‹</span><br></code></pre></td></tr></table></figure>

<p><strong>å£°æ˜åˆå¹¶å‚è€ƒè¡¨</strong></p>
<table>
<thead>
<tr>
<th align="left">åˆå¹¶åœºæ™¯</th>
<th align="left">æ¨èç­–ç•¥</th>
<th align="left">ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">æ¥å£å±æ€§æ‰©å±•</td>
<td align="left">ç›´æ¥æ·»åŠ æ–°å±æ€§</td>
<td align="left"><code>interface &#123; newProp: type &#125;</code></td>
</tr>
<tr>
<td align="left">å‡½æ•°é‡è½½æ‰©å±•</td>
<td align="left">æ·»åŠ ä¸åŒå‚æ•°ç±»å‹çš„é‡è½½</td>
<td align="left"><code>function parse(data: object)</code></td>
</tr>
<tr>
<td align="left">æ³›å‹çº¦æŸå¢å¼º</td>
<td align="left">ä½¿ç”¨æ¡ä»¶ç±»å‹ç»§æ‰¿</td>
<td align="left"><code>Store&lt;T extends object&gt;</code></td>
</tr>
<tr>
<td align="left">è·¨æ¨¡å—ç±»å‹åˆå¹¶</td>
<td align="left">ä½¿ç”¨ç±»å‹æŸ¥è¯¢å’Œç»„åˆ</td>
<td align="left"><code>type Full = LibA.Type &amp; LibB.Type</code></td>
</tr>
<tr>
<td align="left">ç‰ˆæœ¬å·®å¼‚åŒ–åˆå¹¶</td>
<td align="left">æ¡ä»¶ç±»å‹ + ç¯å¢ƒå˜é‡</td>
<td align="left"><code>__version extends &#39;v2&#39; ? ...</code></td>
</tr>
<tr>
<td align="left">ç¬¬ä¸‰æ–¹åº“è¡¥ä¸</td>
<td align="left">æ¨¡å—å£°æ˜åˆå¹¶ + é˜²å¾¡æ€§æ£€æŸ¥</td>
<td align="left"><code>declare module &#39;lib&#39; &#123; ... &#125;</code></td>
</tr>
</tbody></table>
<h3 id="3-2-3-å…¨å±€å˜é‡ç±»å‹å®šä¹‰"><a href="#3-2-3-å…¨å±€å˜é‡ç±»å‹å®šä¹‰" class="headerlink" title="3.2.3 å…¨å±€å˜é‡ç±»å‹å®šä¹‰"></a>3.2.3 å…¨å±€å˜é‡ç±»å‹å®šä¹‰</h3><p><strong>æ ¸å¿ƒæ¦‚å¿µ</strong></p>
<p>å…¨å±€å˜é‡ï¼šåœ¨æ¨¡å—ç³»ç»Ÿå¤–å¯ç›´æ¥è®¿é—®çš„å˜é‡ï¼ˆå¦‚ window å¯¹è±¡å±æ€§ã€CDN å¼•å…¥çš„åº“ï¼‰</p>
<p>å®šä¹‰ç›®æ ‡ï¼š</p>
<ul>
<li>ä¸ºéæ¨¡å—åŒ–è„šæœ¬æä¾›ç±»å‹æ”¯æŒ</li>
<li>æ‰©å±•å…¨å±€å‘½åç©ºé—´ï¼ˆå¦‚ windowã€globalï¼‰</li>
<li>é¿å… Cannot find name â€˜xxxâ€™ ç±»å‹é”™è¯¯</li>
</ul>
<p><strong>ä»£ç ç¤ºä¾‹</strong></p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// â­ åœºæ™¯1ï¼šå£°æ˜å…¨å±€å˜é‡ (å£°æ˜æ–‡ä»¶.d.ts)</span><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">VERSION</span>: <span class="hljs-built_in">string</span>;  <span class="hljs-comment">// ç¼–è¯‘æ—¶æ³¨å…¥çš„ç‰ˆæœ¬å·</span><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">trackEvent</span>(<span class="hljs-params"><span class="hljs-attr">eventName</span>: <span class="hljs-built_in">string</span>, <span class="hljs-attr">payload</span>: <span class="hljs-built_in">object</span></span>): <span class="hljs-built_in">void</span>;  <span class="hljs-comment">// å…¨å±€åŸ‹ç‚¹å‡½æ•°</span><br><br><span class="hljs-comment">// â­ åœºæ™¯2ï¼šæ‰©å±•å…¨å±€å¯¹è±¡ (å¦‚ Window æ¥å£)</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Window</span> &#123;<br>  <span class="hljs-attr">_env</span>: &#123;<br>    <span class="hljs-attr">API_HOST</span>: <span class="hljs-built_in">string</span>;<br>    <span class="hljs-attr">DEBUG_MODE</span>: <span class="hljs-built_in">boolean</span>;<br>  &#125;;<br>  <span class="hljs-attr">ga</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">command</span>: <span class="hljs-built_in">string</span>, ...<span class="hljs-attr">args</span>: <span class="hljs-built_in">unknown</span>[]</span>) =&gt;</span> <span class="hljs-built_in">void</span>;  <span class="hljs-comment">// Google Analytics</span><br>&#125;<br><br><span class="hljs-comment">// â­ åœºæ™¯3ï¼šæ¨¡å—åŒ–ç¯å¢ƒä¸­çš„å…¨å±€å£°æ˜ (ä½¿ç”¨ declare global)</span><br><span class="hljs-keyword">export</span> &#123;&#125;;  <span class="hljs-comment">// ç¡®ä¿æ–‡ä»¶æ˜¯æ¨¡å—ç¯å¢ƒ</span><br><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">global</span> &#123;<br>  <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Array</span>&lt;T&gt; &#123;<br>    <span class="hljs-title function_">findLast</span>(<span class="hljs-attr">predicate</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">value</span>: T</span>) =&gt;</span> <span class="hljs-built_in">boolean</span>): T | <span class="hljs-literal">undefined</span>;  <span class="hljs-comment">// æ‰©å±•åŸç”ŸArray</span><br>  &#125;<br>  <br>  <span class="hljs-keyword">namespace</span> <span class="hljs-title class_">NodeJS</span> &#123;<br>    <span class="hljs-keyword">interface</span> <span class="hljs-title class_">ProcessEnv</span> &#123;<br>      <span class="hljs-attr">NODE_ENV</span>: <span class="hljs-string">&#x27;development&#x27;</span> | <span class="hljs-string">&#x27;production&#x27;</span>;<br>      <span class="hljs-attr">SSR_ENABLED</span>: <span class="hljs-built_in">boolean</span>;<br>    &#125;<br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹å®è·µä¸é™·é˜±</strong></p>
<table>
<thead>
<tr>
<th align="left">åœºæ™¯</th>
<th align="left">è§£å†³æ–¹æ¡ˆ</th>
<th align="left">æ³¨æ„äº‹é¡¹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">CDN å¼•å…¥çš„åº“</td>
<td align="left"><code>declare const jQuery: any;</code></td>
<td align="left">ä¼˜å…ˆå®‰è£… @types åŒ…</td>
</tr>
<tr>
<td align="left">æ³¨å…¥çš„è¿è¡Œæ—¶å˜é‡</td>
<td align="left"><code>declare const __INITIAL_STATE__: AppState;</code></td>
<td align="left">éœ€ä¸æ„å»ºè„šæœ¬é…åˆæ³¨å…¥</td>
</tr>
<tr>
<td align="left">æ‰©å±•æµè§ˆå™¨åŸç”Ÿå¯¹è±¡</td>
<td align="left">é€šè¿‡ interface åˆå¹¶å£°æ˜</td>
<td align="left">é¿å…è¦†ç›–æ ‡å‡†ç±»å‹å®šä¹‰</td>
</tr>
<tr>
<td align="left">å¤šç¯å¢ƒå…¨å±€å˜é‡</td>
<td align="left">ä½¿ç”¨ .d.ts + æ¡ä»¶ç±»å‹</td>
<td align="left">åŒºåˆ† process.env å’Œ import.meta.env</td>
</tr>
</tbody></table>
<p>å…¸å‹é”™è¯¯æ¡ˆä¾‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// âŒ é”™è¯¯ï¼šç›´æ¥è¦†ç›–Windowç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Window</span> = <span class="hljs-title class_">CustomWindow</span>;  <br><br><span class="hljs-comment">// âœ… æ­£ç¡®ï¼šé€šè¿‡æ¥å£åˆå¹¶</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Window</span> &#123;<br>  <span class="hljs-attr">customProp</span>: <span class="hljs-built_in">number</span>;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>é¢è¯•çº§è€ƒç‚¹</strong></p>
<ul>
<li>ç±»å‹åˆå¹¶æœºåˆ¶ï¼šæ¥å£å£°æ˜åˆå¹¶ vs å‘½åç©ºé—´åˆå¹¶</li>
<li>æ¨¡å—åŒ–å½±å“ï¼š<ul>
<li>å…¨å±€å£°æ˜å¿…é¡»æ”¾åœ¨ .d.ts æ–‡ä»¶æˆ–ä½¿ç”¨ declare global</li>
<li>åŒ…å« import&#x2F;export çš„æ–‡ä»¶ä¼šè¢«è§†ä¸ºæ¨¡å—</li>
</ul>
</li>
<li>ç±»å‹å¯è§æ€§è§„åˆ™ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// types.d.ts</span><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">GlobalType</span> &#123; <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span> &#125;  <span class="hljs-comment">// å…¨å±€å¯è§</span><br><br><span class="hljs-comment">// utils.ts</span><br><span class="hljs-keyword">export</span> <span class="hljs-keyword">declare</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">LocalType</span> &#123;&#125;  <span class="hljs-comment">// ä»…æ¨¡å—å†…å¯è§</span><br></code></pre></td></tr></table></figure>

<ul>
<li>ä¸ window as any çš„å–èˆï¼šä¼˜å…ˆå£°æ˜å…·ä½“ç±»å‹ä¿è¯å®‰å…¨</li>
</ul>
<h3 id="3-2-4-å¤æ‚ç±»å‹å£°æ˜æœ€ä½³å®è·µ"><a href="#3-2-4-å¤æ‚ç±»å‹å£°æ˜æœ€ä½³å®è·µ" class="headerlink" title="3.2.4 å¤æ‚ç±»å‹å£°æ˜æœ€ä½³å®è·µ"></a>3.2.4 å¤æ‚ç±»å‹å£°æ˜æœ€ä½³å®è·µ</h3><p><strong>æ ¸å¿ƒè®¾è®¡åŸåˆ™</strong></p>
<table>
<thead>
<tr>
<th align="left">åŸåˆ™</th>
<th align="left">è¯´æ˜</th>
<th align="left">åæ¨¡å¼æ¡ˆä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td align="left">ç²¾ç¡®æ€§</td>
<td align="left">ç±»å‹åº”ä¸¥æ ¼åŒ¹é…è¿è¡Œæ—¶è¡Œä¸º</td>
<td align="left">ç”¨ any ä»£æ›¿å…·ä½“ç»“æ„</td>
</tr>
<tr>
<td align="left">å¯è¯»æ€§</td>
<td align="left">é€šè¿‡ç±»å‹åˆ«ååˆ†å±‚æŠ½è±¡</td>
<td align="left">åµŒå¥—è¶…è¿‡ä¸‰å±‚çš„åŒ¿åç±»å‹</td>
</tr>
<tr>
<td align="left">å…¼å®¹æ€§</td>
<td align="left">è€ƒè™‘æ—§ç‰ˆ TypeScript çš„è§£æèƒ½åŠ›</td>
<td align="left">ä½¿ç”¨ TS 4.1+ ç‰¹æ€§ä½†æœªé™çº§</td>
</tr>
<tr>
<td align="left">å¯æ‰©å±•æ€§</td>
<td align="left">é¢„ç•™æ‰©å±•ç‚¹ï¼ˆå¦‚ç´¢å¼•ç­¾åï¼‰</td>
<td align="left">å®Œå…¨å°é—­çš„ç±»å‹å®šä¹‰</td>
</tr>
</tbody></table>
<p><strong>å¤æ‚ç±»å‹å£°æ˜æ¨¡å¼</strong></p>
<p>åœºæ™¯1ï¼šæ·±åº¦åµŒå¥—ç»“æ„ï¼ˆå¦‚ API å“åº”ï¼‰</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä½¿ç”¨æ¥å£åˆ†å±‚ + ç±»å‹åˆ«åç»„åˆ</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">UserProfile</span> &#123;<br>  <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">contacts</span>: &#123;<br>    <span class="hljs-attr">email</span>: <span class="hljs-built_in">string</span>;<br>    <span class="hljs-attr">social</span>?: &#123; <span class="hljs-comment">// å¯é€‰åµŒå¥—</span><br>      <span class="hljs-attr">wechat</span>: <span class="hljs-built_in">string</span>;<br>      <span class="hljs-attr">alipay</span>: <span class="hljs-built_in">string</span>;<br>    &#125;;<br>  &#125;;<br>&#125;<br><br><span class="hljs-comment">// æå–å…¬å…±ç»“æ„</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Pagination</span>&lt;T&gt; = &#123;<br>  <span class="hljs-attr">current_page</span>: <span class="hljs-built_in">number</span>;<br>  <span class="hljs-attr">data</span>: T[];<br>&#125;;<br><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">fetchUserList</span>(<span class="hljs-params"></span>): <span class="hljs-title class_">Pagination</span>&lt;<span class="hljs-title class_">UserProfile</span>&gt;;<br></code></pre></td></tr></table></figure>

<p>åœºæ™¯2ï¼šåŠ¨æ€é”®åå¯¹è±¡ï¼ˆå¦‚å›½é™…åŒ–å­—å…¸ï¼‰</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ¨¡æ¿å­—é¢é‡ç±»å‹ + ç´¢å¼•ç­¾å</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">Locale</span> = <span class="hljs-string">&#x27;zh-CN&#x27;</span> | <span class="hljs-string">&#x27;en-US&#x27;</span>;<br><span class="hljs-keyword">type</span> I18nKeys = <span class="hljs-string">`button.<span class="hljs-subst">$&#123;<span class="hljs-string">&#x27;submit&#x27;</span> | <span class="hljs-string">&#x27;cancel&#x27;</span>&#125;</span>`</span> | <span class="hljs-string">`title.<span class="hljs-subst">$&#123;<span class="hljs-string">&#x27;home&#x27;</span> | <span class="hljs-string">&#x27;about&#x27;</span>&#125;</span>`</span>;<br><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">const</span> <span class="hljs-attr">i18n</span>: &#123;<br>  [key <span class="hljs-keyword">in</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;Locale&#125;</span>/<span class="hljs-subst">$&#123;I18nKeys&#125;</span>`</span>]: <span class="hljs-built_in">string</span>; <span class="hljs-comment">// å¦‚ &quot;zh-CN/button.submit&quot;</span><br>&#125; &amp; &#123;<br>  <span class="hljs-title function_">get</span>(<span class="hljs-attr">key</span>: <span class="hljs-string">`<span class="hljs-subst">$&#123;Locale&#125;</span>/<span class="hljs-subst">$&#123;I18nKeys&#125;</span>`</span>, <span class="hljs-attr">vars</span>?: <span class="hljs-title class_">Record</span>&lt;<span class="hljs-built_in">string</span>, <span class="hljs-built_in">string</span>&gt;): <span class="hljs-built_in">string</span>;<br>&#125;;<br></code></pre></td></tr></table></figure>

<p>åœºæ™¯3ï¼šå‡½æ•°é‡è½½ç±»å‹ï¼ˆå¦‚ SDK æ–¹æ³•ï¼‰</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// ä½¿ç”¨è”åˆç±»å‹ + æ¡ä»¶ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">SDKOptions</span> = <br>  | &#123; <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;sync&#x27;</span>; <span class="hljs-attr">timeout</span>: <span class="hljs-built_in">number</span> &#125;<br>  | &#123; <span class="hljs-attr">mode</span>: <span class="hljs-string">&#x27;async&#x27;</span>; <span class="hljs-attr">callback</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">res</span>: <span class="hljs-title class_">Response</span></span>) =&gt;</span> <span class="hljs-built_in">void</span> &#125;;<br><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">invokeAPI</span>(<span class="hljs-params"></span><br><span class="hljs-params">  <span class="hljs-attr">endpoint</span>: <span class="hljs-string">&#x27;/user&#x27;</span>,</span><br><span class="hljs-params">  <span class="hljs-attr">options</span>?: <span class="hljs-title class_">SDKOptions</span></span><br><span class="hljs-params"></span>): <span class="hljs-title class_">Promise</span>&lt;<span class="hljs-title class_">User</span>&gt; | <span class="hljs-title class_">User</span>;<br></code></pre></td></tr></table></figure>

<p><strong>è¿›é˜¶æŠ€å·§ä¸é™·é˜±è§„é¿</strong></p>
<p>æŠ€å·§1ï¼šç±»å‹é€’å½’æ·±åº¦æ§åˆ¶</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// âœ… å®‰å…¨é€’å½’ï¼šé™åˆ¶æ·±åº¦</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">MaxDepth</span>&lt;T, D <span class="hljs-keyword">extends</span> <span class="hljs-built_in">number</span> = <span class="hljs-number">3</span>&gt; = <br>  D <span class="hljs-keyword">extends</span> <span class="hljs-number">0</span> ? <span class="hljs-built_in">never</span> : <br>  T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span> ? &#123;<br>    [K <span class="hljs-keyword">in</span> keyof T]: <span class="hljs-title class_">MaxDepth</span>&lt;T[K], <span class="hljs-title class_">Subtract</span>&lt;D, <span class="hljs-number">1</span>&gt;&gt;<br>  &#125; : T;<br><br><span class="hljs-comment">// âŒ å±é™©ï¼šæ— é™é€’å½’</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">InfiniteRecursion</span>&lt;T&gt; = &#123;<br>  <span class="hljs-attr">value</span>: T;<br>  <span class="hljs-attr">children</span>: <span class="hljs-title class_">InfiniteRecursion</span>&lt;T&gt;[]; <span class="hljs-comment">// å¯èƒ½å¼•å‘ç±»å‹å®ä¾‹åŒ–è¿‡æ·±é”™è¯¯</span><br>&#125;;<br></code></pre></td></tr></table></figure>

<p>æŠ€å·§2ï¼šé˜²å¾¡æ€§ç±»å‹è®¾è®¡</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// é˜²èŒƒä¸å®Œæ•´æ•°æ®</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">SafeAccess</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span> ? &#123;<br>  [K <span class="hljs-keyword">in</span> keyof T]-?: <span class="hljs-title class_">SafeAccess</span>&lt;T[K]&gt;; <span class="hljs-comment">// ç§»é™¤å¯é€‰ä¿®é¥°ç¬¦</span><br>&#125; : T;<br><br><span class="hljs-comment">// ä½¿ç”¨ never é˜»æ–­éæ³•è·¯å¾„</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ValidateRoute</span>&lt;<span class="hljs-title class_">Path</span>&gt; = <br>  <span class="hljs-title class_">Path</span> <span class="hljs-keyword">extends</span> <span class="hljs-string">`/user/<span class="hljs-subst">$&#123;infer Id&#125;</span>`</span> <br>    ? <span class="hljs-title class_">Id</span> <span class="hljs-keyword">extends</span> <span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-built_in">number</span>&#125;</span>`</span> <br>      ? <span class="hljs-title class_">Path</span> <br>      : <span class="hljs-built_in">never</span> <br>    : <span class="hljs-built_in">never</span>;<br></code></pre></td></tr></table></figure>

<p><strong>å·¥ç¨‹åŒ–å®è·µ</strong></p>
<p>ç­–ç•¥1ï¼šç±»å‹æµ‹è¯•ï¼ˆä½¿ç”¨ tsd ç­‰å·¥å…·ï¼‰</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æµ‹è¯•ç±»å‹æ˜¯å¦ç¬¦åˆé¢„æœŸ</span><br><span class="hljs-keyword">import</span> &#123; expectType &#125; <span class="hljs-keyword">from</span> <span class="hljs-string">&#x27;tsd&#x27;</span>;<br><br>expectType&lt;&#123; <span class="hljs-attr">id</span>: <span class="hljs-built_in">number</span> &#125;&gt;(<span class="hljs-title function_">fetchUserList</span>().<span class="hljs-property">data</span>[<span class="hljs-number">0</span>]);<br></code></pre></td></tr></table></figure>

<p>ç­–ç•¥2ï¼šå£°æ˜æ–‡ä»¶ç»„ç»‡è§„èŒƒ</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs text">types/<br>â”œâ”€â”€ global.d.ts         # å…¨å±€å£°æ˜<br>â”œâ”€â”€ libs/               # ç¬¬ä¸‰æ–¹åº“æ‰©å±•<br>â”‚   â””â”€â”€ vue-extend.d.ts<br>â”œâ”€â”€ modules/            # ä¸šåŠ¡æ¨¡å—<br>â”‚   â””â”€â”€ user-api.d.ts<br>â””â”€â”€ utils/              # å·¥å…·ç±»å‹<br>    â””â”€â”€ pagination.d.ts<br></code></pre></td></tr></table></figure>

<p>ç­–ç•¥3ï¼šç‰ˆæœ¬å…¼å®¹å¤„ç†</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// æ¡ä»¶ç¼–è¯‘æ”¯æŒå¤šç‰ˆæœ¬</span><br><span class="hljs-keyword">declare</span> <span class="hljs-variable language_">module</span> <span class="hljs-string">&quot;some-lib&quot;</span> &#123;<br>  <span class="hljs-keyword">export</span> <span class="hljs-keyword">interface</span> <span class="hljs-title class_">Config</span> &#123;<br>    <span class="hljs-comment">// @ts-ignore-next-line å…¼å®¹æ—§ç‰ˆæœ¬ç±»å‹ç¼ºå¤±</span><br>    <span class="hljs-attr">newFeature</span>?: <span class="hljs-built_in">boolean</span>; <br>  &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>é¢è¯•çº§è€ƒç‚¹</strong></p>
<ul>
<li>ç±»å‹å®ä¾‹åŒ–æ·±åº¦é™åˆ¶ï¼šé»˜è®¤ 50 å±‚ï¼ˆé€šè¿‡ tsc â€“typeDepth è°ƒæ•´ï¼‰</li>
<li>å£°æ˜åˆå¹¶ä¼˜å…ˆçº§ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">interface</span> A &#123; <span class="hljs-attr">x</span>: <span class="hljs-built_in">number</span> &#125;<br><span class="hljs-keyword">interface</span> A &#123; <span class="hljs-attr">x</span>: <span class="hljs-built_in">string</span> &#125;  <span class="hljs-comment">// âŒ åç»­å£°æ˜å¿…é¡»å…¼å®¹å‰åºå£°æ˜</span><br></code></pre></td></tr></table></figure>

<ul>
<li>ç±»å‹æ€§èƒ½ä¼˜åŒ–ï¼š</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-comment">// âœ… é«˜æ•ˆï¼šä½¿ç”¨æ˜ å°„ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">ReadonlyDeep</span>&lt;T&gt; = &#123; <span class="hljs-keyword">readonly</span> [K <span class="hljs-keyword">in</span> keyof T]: <span class="hljs-title class_">ReadonlyDeep</span>&lt;T[K]&gt; &#125;<br><br><span class="hljs-comment">// âŒ ä½æ•ˆï¼šé€’å½’æ¡ä»¶ç±»å‹</span><br><span class="hljs-keyword">type</span> <span class="hljs-title class_">SlowType</span>&lt;T&gt; = T <span class="hljs-keyword">extends</span> <span class="hljs-built_in">object</span> ? <span class="hljs-title class_">SlowType</span>&lt;T[keyof T]&gt; : T<br></code></pre></td></tr></table></figure>

<ul>
<li>d.ts ä¸ ts æ–‡ä»¶å·®å¼‚ï¼š.d.ts ä¸åŒ…å«å®ç°ï¼Œä»…ç±»å‹å£°æ˜</li>
<li>å®æˆ˜æ¡ˆä¾‹ï¼šä¸º WebSocket æ¶ˆæ¯åè®®å£°æ˜ç±»å‹å®‰å…¨è§£æå™¨</li>
</ul>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><code class="hljs typescript"><span class="hljs-keyword">type</span> <span class="hljs-title class_">MessageProtocol</span> = &#123;<br>  <span class="hljs-attr">login</span>: &#123; <span class="hljs-attr">username</span>: <span class="hljs-built_in">string</span>; <span class="hljs-attr">password</span>: <span class="hljs-built_in">string</span> &#125;;<br>  <span class="hljs-attr">joinRoom</span>: &#123; <span class="hljs-attr">roomId</span>: <span class="hljs-built_in">number</span>; <span class="hljs-attr">timestamp</span>: <span class="hljs-title class_">Date</span> &#125;;<br>  <span class="hljs-comment">// ä½¿ç”¨æ¨¡æ¿ç±»å‹è‡ªåŠ¨ç”Ÿæˆäº‹ä»¶åçº¦æŸ</span><br>  [E <span class="hljs-keyword">in</span> <span class="hljs-string">`sys/<span class="hljs-subst">$&#123;<span class="hljs-string">&#x27;alert&#x27;</span> | <span class="hljs-string">&#x27;error&#x27;</span>&#125;</span>`</span>]: &#123; <span class="hljs-attr">code</span>: <span class="hljs-built_in">number</span> &#125;;<br>&#125;;<br><br><span class="hljs-keyword">declare</span> <span class="hljs-keyword">function</span> handleMessage&lt;K <span class="hljs-keyword">extends</span> keyof <span class="hljs-title class_">MessageProtocol</span>&gt;(<br>  <span class="hljs-attr">type</span>: K,<br>  <span class="hljs-attr">handler</span>: <span class="hljs-function">(<span class="hljs-params"><span class="hljs-attr">payload</span>: <span class="hljs-title class_">MessageProtocol</span>[K]</span>) =&gt;</span> <span class="hljs-built_in">void</span><br>): <span class="hljs-built_in">void</span>;<br></code></pre></td></tr></table></figure>

<h2 id="3-3-ä»£ç è´¨é‡ä¿éšœ"><a href="#3-3-ä»£ç è´¨é‡ä¿éšœ" class="headerlink" title="3.3 ä»£ç è´¨é‡ä¿éšœ"></a>3.3 ä»£ç è´¨é‡ä¿éšœ</h2><h3 id="3-3-1-ESLint-ç±»å‹è§„åˆ™é…ç½®"><a href="#3-3-1-ESLint-ç±»å‹è§„åˆ™é…ç½®" class="headerlink" title="3.3.1 ESLint ç±»å‹è§„åˆ™é…ç½®"></a>3.3.1 ESLint ç±»å‹è§„åˆ™é…ç½®</h3><h3 id="3-3-2-å•å…ƒæµ‹è¯•ç±»å‹æ£€æŸ¥æ–¹æ¡ˆ"><a href="#3-3-2-å•å…ƒæµ‹è¯•ç±»å‹æ£€æŸ¥æ–¹æ¡ˆ" class="headerlink" title="3.3.2 å•å…ƒæµ‹è¯•ç±»å‹æ£€æŸ¥æ–¹æ¡ˆ"></a>3.3.2 å•å…ƒæµ‹è¯•ç±»å‹æ£€æŸ¥æ–¹æ¡ˆ</h3><h3 id="3-3-3-è‡ªå®šä¹‰ç±»å‹è§„åˆ™å¼€å‘"><a href="#3-3-3-è‡ªå®šä¹‰ç±»å‹è§„åˆ™å¼€å‘" class="headerlink" title="3.3.3 è‡ªå®šä¹‰ç±»å‹è§„åˆ™å¼€å‘"></a>3.3.3 è‡ªå®šä¹‰ç±»å‹è§„åˆ™å¼€å‘</h3><h3 id="3-3-4-CI-CD-ä¸­çš„ç±»å‹æ£€æŸ¥"><a href="#3-3-4-CI-CD-ä¸­çš„ç±»å‹æ£€æŸ¥" class="headerlink" title="3.3.4 CI&#x2F;CD ä¸­çš„ç±»å‹æ£€æŸ¥"></a>3.3.4 CI&#x2F;CD ä¸­çš„ç±»å‹æ£€æŸ¥</h3><h2 id="3-4-æ„å»ºä¼˜åŒ–"><a href="#3-4-æ„å»ºä¼˜åŒ–" class="headerlink" title="3.4 æ„å»ºä¼˜åŒ–"></a>3.4 æ„å»ºä¼˜åŒ–</h2><h3 id="3-4-1-Webpack-æ„å»ºç¼“å­˜é…ç½®"><a href="#3-4-1-Webpack-æ„å»ºç¼“å­˜é…ç½®" class="headerlink" title="3.4.1 Webpack æ„å»ºç¼“å­˜é…ç½®"></a>3.4.1 Webpack æ„å»ºç¼“å­˜é…ç½®</h3><h3 id="3-4-2-Babel-ä¸-tsc-ç¼–è¯‘å¯¹æ¯”"><a href="#3-4-2-Babel-ä¸-tsc-ç¼–è¯‘å¯¹æ¯”" class="headerlink" title="3.4.2 Babel ä¸ tsc ç¼–è¯‘å¯¹æ¯”"></a>3.4.2 Babel ä¸ tsc ç¼–è¯‘å¯¹æ¯”</h3><h3 id="3-4-3-å¢é‡ç¼–è¯‘åŸç†ä¸å®è·µ"><a href="#3-4-3-å¢é‡ç¼–è¯‘åŸç†ä¸å®è·µ" class="headerlink" title="3.4.3 å¢é‡ç¼–è¯‘åŸç†ä¸å®è·µ"></a>3.4.3 å¢é‡ç¼–è¯‘åŸç†ä¸å®è·µ</h3><h3 id="3-4-4-Monorepo-ç±»å‹ç®¡ç†ç­–ç•¥"><a href="#3-4-4-Monorepo-ç±»å‹ç®¡ç†ç­–ç•¥" class="headerlink" title="3.4.4 Monorepo ç±»å‹ç®¡ç†ç­–ç•¥"></a>3.4.4 Monorepo ç±»å‹ç®¡ç†ç­–ç•¥</h3><h1 id="å››ã€æ¡†æ¶é›†æˆå®è·µ"><a href="#å››ã€æ¡†æ¶é›†æˆå®è·µ" class="headerlink" title="å››ã€æ¡†æ¶é›†æˆå®è·µ"></a>å››ã€æ¡†æ¶é›†æˆå®è·µ</h1><h2 id="4-1-React-ç”Ÿæ€é›†æˆ"><a href="#4-1-React-ç”Ÿæ€é›†æˆ" class="headerlink" title="4.1 React ç”Ÿæ€é›†æˆ"></a>4.1 React ç”Ÿæ€é›†æˆ</h2><h3 id="4-1-1-ç»„ä»¶-Props-é«˜çº§ç±»å‹è®¾è®¡"><a href="#4-1-1-ç»„ä»¶-Props-é«˜çº§ç±»å‹è®¾è®¡" class="headerlink" title="4.1.1 ç»„ä»¶ Props é«˜çº§ç±»å‹è®¾è®¡"></a>4.1.1 ç»„ä»¶ Props é«˜çº§ç±»å‹è®¾è®¡</h3><h3 id="4-1-2-Hooks-æ³›å‹ç±»å‹å®šä¹‰"><a href="#4-1-2-Hooks-æ³›å‹ç±»å‹å®šä¹‰" class="headerlink" title="4.1.2 Hooks æ³›å‹ç±»å‹å®šä¹‰"></a>4.1.2 Hooks æ³›å‹ç±»å‹å®šä¹‰</h3><h3 id="4-1-3-Redux-Toolkit-ç±»å‹å®‰å…¨"><a href="#4-1-3-Redux-Toolkit-ç±»å‹å®‰å…¨" class="headerlink" title="4.1.3 Redux Toolkit ç±»å‹å®‰å…¨"></a>4.1.3 Redux Toolkit ç±»å‹å®‰å…¨</h3><h3 id="4-1-4-React-Router-ç±»å‹å®ˆå«"><a href="#4-1-4-React-Router-ç±»å‹å®ˆå«" class="headerlink" title="4.1.4 React Router ç±»å‹å®ˆå«"></a>4.1.4 React Router ç±»å‹å®ˆå«</h3><h2 id="4-2-Vue-3-ç±»å‹ç³»ç»Ÿ"><a href="#4-2-Vue-3-ç±»å‹ç³»ç»Ÿ" class="headerlink" title="4.2 Vue 3 ç±»å‹ç³»ç»Ÿ"></a>4.2 Vue 3 ç±»å‹ç³»ç»Ÿ</h2><h3 id="4-2-1-Composition-API-ç±»å‹æ¨å¯¼"><a href="#4-2-1-Composition-API-ç±»å‹æ¨å¯¼" class="headerlink" title="4.2.1 Composition API ç±»å‹æ¨å¯¼"></a>4.2.1 Composition API ç±»å‹æ¨å¯¼</h3><h3 id="4-2-2-ç»„ä»¶æ³›å‹-Props-å®ç°"><a href="#4-2-2-ç»„ä»¶æ³›å‹-Props-å®ç°" class="headerlink" title="4.2.2 ç»„ä»¶æ³›å‹ Props å®ç°"></a>4.2.2 ç»„ä»¶æ³›å‹ Props å®ç°</h3><h3 id="4-2-3-Pinia-çŠ¶æ€ç®¡ç†ç±»å‹å®‰å…¨"><a href="#4-2-3-Pinia-çŠ¶æ€ç®¡ç†ç±»å‹å®‰å…¨" class="headerlink" title="4.2.3 Pinia çŠ¶æ€ç®¡ç†ç±»å‹å®‰å…¨"></a>4.2.3 Pinia çŠ¶æ€ç®¡ç†ç±»å‹å®‰å…¨</h3><h3 id="4-2-4-Volar-ç±»å‹å¢å¼ºå®è·µ"><a href="#4-2-4-Volar-ç±»å‹å¢å¼ºå®è·µ" class="headerlink" title="4.2.4 Volar ç±»å‹å¢å¼ºå®è·µ"></a>4.2.4 Volar ç±»å‹å¢å¼ºå®è·µ</h3><h2 id="4-3-Node-js-åç«¯å¼€å‘"><a href="#4-3-Node-js-åç«¯å¼€å‘" class="headerlink" title="4.3 Node.js åç«¯å¼€å‘"></a>4.3 Node.js åç«¯å¼€å‘</h2><h3 id="4-3-1-Express-Koa-ä¸­é—´ä»¶ç±»å‹"><a href="#4-3-1-Express-Koa-ä¸­é—´ä»¶ç±»å‹" class="headerlink" title="4.3.1 Express&#x2F;Koa ä¸­é—´ä»¶ç±»å‹"></a>4.3.1 Express&#x2F;Koa ä¸­é—´ä»¶ç±»å‹</h3><h3 id="4-3-2-ORM-æ¡†æ¶ç±»å‹å®‰å…¨æŸ¥è¯¢"><a href="#4-3-2-ORM-æ¡†æ¶ç±»å‹å®‰å…¨æŸ¥è¯¢" class="headerlink" title="4.3.2 ORM æ¡†æ¶ç±»å‹å®‰å…¨æŸ¥è¯¢"></a>4.3.2 ORM æ¡†æ¶ç±»å‹å®‰å…¨æŸ¥è¯¢</h3><h3 id="4-3-3-RPC-é€šä¿¡ç±»å‹å¥‘çº¦"><a href="#4-3-3-RPC-é€šä¿¡ç±»å‹å¥‘çº¦" class="headerlink" title="4.3.3 RPC é€šä¿¡ç±»å‹å¥‘çº¦"></a>4.3.3 RPC é€šä¿¡ç±»å‹å¥‘çº¦</h3><h3 id="4-3-4-åˆ†å¸ƒå¼äº‹åŠ¡ç±»å‹ä¿éšœ"><a href="#4-3-4-åˆ†å¸ƒå¼äº‹åŠ¡ç±»å‹ä¿éšœ" class="headerlink" title="4.3.4 åˆ†å¸ƒå¼äº‹åŠ¡ç±»å‹ä¿éšœ"></a>4.3.4 åˆ†å¸ƒå¼äº‹åŠ¡ç±»å‹ä¿éšœ</h3><h1 id="äº”ã€æ€§èƒ½ä¼˜åŒ–"><a href="#äº”ã€æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="äº”ã€æ€§èƒ½ä¼˜åŒ–"></a>äº”ã€æ€§èƒ½ä¼˜åŒ–</h1><h2 id="5-1-ç¼–è¯‘æ€§èƒ½ä¼˜åŒ–"><a href="#5-1-ç¼–è¯‘æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="5.1 ç¼–è¯‘æ€§èƒ½ä¼˜åŒ–"></a>5.1 ç¼–è¯‘æ€§èƒ½ä¼˜åŒ–</h2><h3 id="5-1-1-é¡¹ç›®å¼•ç”¨-Project-References"><a href="#5-1-1-é¡¹ç›®å¼•ç”¨-Project-References" class="headerlink" title="5.1.1 é¡¹ç›®å¼•ç”¨(Project References)"></a>5.1.1 é¡¹ç›®å¼•ç”¨(Project References)</h3><h3 id="5-1-2-å¢é‡ç¼–è¯‘åŸç†å‰–æ"><a href="#5-1-2-å¢é‡ç¼–è¯‘åŸç†å‰–æ" class="headerlink" title="5.1.2 å¢é‡ç¼–è¯‘åŸç†å‰–æ"></a>5.1.2 å¢é‡ç¼–è¯‘åŸç†å‰–æ</h3><h3 id="5-1-3-åˆ†å¸ƒå¼ç¼–è¯‘æ–¹æ¡ˆ"><a href="#5-1-3-åˆ†å¸ƒå¼ç¼–è¯‘æ–¹æ¡ˆ" class="headerlink" title="5.1.3 åˆ†å¸ƒå¼ç¼–è¯‘æ–¹æ¡ˆ"></a>5.1.3 åˆ†å¸ƒå¼ç¼–è¯‘æ–¹æ¡ˆ</h3><h3 id="5-1-4-ç¼–è¯‘å™¨ç¼“å­˜ç­–ç•¥"><a href="#5-1-4-ç¼–è¯‘å™¨ç¼“å­˜ç­–ç•¥" class="headerlink" title="5.1.4 ç¼–è¯‘å™¨ç¼“å­˜ç­–ç•¥"></a>5.1.4 ç¼–è¯‘å™¨ç¼“å­˜ç­–ç•¥</h3><h2 id="5-2-ç±»å‹æ€§èƒ½ä¼˜åŒ–"><a href="#5-2-ç±»å‹æ€§èƒ½ä¼˜åŒ–" class="headerlink" title="5.2 ç±»å‹æ€§èƒ½ä¼˜åŒ–"></a>5.2 ç±»å‹æ€§èƒ½ä¼˜åŒ–</h2><h3 id="5-2-1-é¿å…è¿‡åº¦ç±»å‹å®ä¾‹åŒ–"><a href="#5-2-1-é¿å…è¿‡åº¦ç±»å‹å®ä¾‹åŒ–" class="headerlink" title="5.2.1 é¿å…è¿‡åº¦ç±»å‹å®ä¾‹åŒ–"></a>5.2.1 é¿å…è¿‡åº¦ç±»å‹å®ä¾‹åŒ–</h3><h3 id="5-2-2-æ¡ä»¶ç±»å‹çŸ­è·¯æŠ€å·§"><a href="#5-2-2-æ¡ä»¶ç±»å‹çŸ­è·¯æŠ€å·§" class="headerlink" title="5.2.2 æ¡ä»¶ç±»å‹çŸ­è·¯æŠ€å·§"></a>5.2.2 æ¡ä»¶ç±»å‹çŸ­è·¯æŠ€å·§</h3><h3 id="5-2-3-ç±»å‹ç¼“å­˜ç­–ç•¥å®ç°"><a href="#5-2-3-ç±»å‹ç¼“å­˜ç­–ç•¥å®ç°" class="headerlink" title="5.2.3 ç±»å‹ç¼“å­˜ç­–ç•¥å®ç°"></a>5.2.3 ç±»å‹ç¼“å­˜ç­–ç•¥å®ç°</h3><h3 id="5-2-4-ç±»å‹å¤æ‚åº¦åˆ†æ"><a href="#5-2-4-ç±»å‹å¤æ‚åº¦åˆ†æ" class="headerlink" title="5.2.4 ç±»å‹å¤æ‚åº¦åˆ†æ"></a>5.2.4 ç±»å‹å¤æ‚åº¦åˆ†æ</h3><h2 id="5-3-äº§ç‰©ä¼˜åŒ–"><a href="#5-3-äº§ç‰©ä¼˜åŒ–" class="headerlink" title="5.3 äº§ç‰©ä¼˜åŒ–"></a>5.3 äº§ç‰©ä¼˜åŒ–</h2><h3 id="5-3-1-Tree-Shaking-åŸç†ä¸å®ç°"><a href="#5-3-1-Tree-Shaking-åŸç†ä¸å®ç°" class="headerlink" title="5.3.1 Tree Shaking åŸç†ä¸å®ç°"></a>5.3.1 Tree Shaking åŸç†ä¸å®ç°</h3><h3 id="5-3-2-ä»£ç åˆ†å‰²ç±»å‹ä¿éšœ"><a href="#5-3-2-ä»£ç åˆ†å‰²ç±»å‹ä¿éšœ" class="headerlink" title="5.3.2 ä»£ç åˆ†å‰²ç±»å‹ä¿éšœ"></a>5.3.2 ä»£ç åˆ†å‰²ç±»å‹ä¿éšœ</h3><h3 id="5-3-3-è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥æ–¹æ¡ˆ"><a href="#5-3-3-è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥æ–¹æ¡ˆ" class="headerlink" title="5.3.3 è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥æ–¹æ¡ˆ"></a>5.3.3 è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥æ–¹æ¡ˆ</h3><h3 id="5-3-4-ç±»å‹æ“¦é™¤ä¸ä½“ç§¯æ§åˆ¶"><a href="#5-3-4-ç±»å‹æ“¦é™¤ä¸ä½“ç§¯æ§åˆ¶" class="headerlink" title="5.3.4 ç±»å‹æ“¦é™¤ä¸ä½“ç§¯æ§åˆ¶"></a>5.3.4 ç±»å‹æ“¦é™¤ä¸ä½“ç§¯æ§åˆ¶</h3><h1 id="å…­ã€ç»¼åˆèƒ½åŠ›"><a href="#å…­ã€ç»¼åˆèƒ½åŠ›" class="headerlink" title="å…­ã€ç»¼åˆèƒ½åŠ›"></a>å…­ã€ç»¼åˆèƒ½åŠ›</h1><h2 id="6-1-è®¾è®¡æ¨¡å¼ç±»å‹å®ç°"><a href="#6-1-è®¾è®¡æ¨¡å¼ç±»å‹å®ç°" class="headerlink" title="6.1 è®¾è®¡æ¨¡å¼ç±»å‹å®ç°"></a>6.1 è®¾è®¡æ¨¡å¼ç±»å‹å®ç°</h2><h3 id="6-1-1-è£…é¥°å™¨å…ƒç¼–ç¨‹ç±»å‹å®‰å…¨"><a href="#6-1-1-è£…é¥°å™¨å…ƒç¼–ç¨‹ç±»å‹å®‰å…¨" class="headerlink" title="6.1.1 è£…é¥°å™¨å…ƒç¼–ç¨‹ç±»å‹å®‰å…¨"></a>6.1.1 è£…é¥°å™¨å…ƒç¼–ç¨‹ç±»å‹å®‰å…¨</h3><h3 id="6-1-2-ä¾èµ–æ³¨å…¥ç±»å‹æ¨å¯¼"><a href="#6-1-2-ä¾èµ–æ³¨å…¥ç±»å‹æ¨å¯¼" class="headerlink" title="6.1.2 ä¾èµ–æ³¨å…¥ç±»å‹æ¨å¯¼"></a>6.1.2 ä¾èµ–æ³¨å…¥ç±»å‹æ¨å¯¼</h3><h3 id="6-1-3-ç­–ç•¥æ¨¡å¼ç±»å‹æ˜ å°„"><a href="#6-1-3-ç­–ç•¥æ¨¡å¼ç±»å‹æ˜ å°„" class="headerlink" title="6.1.3 ç­–ç•¥æ¨¡å¼ç±»å‹æ˜ å°„"></a>6.1.3 ç­–ç•¥æ¨¡å¼ç±»å‹æ˜ å°„</h3><h3 id="6-1-4-çŠ¶æ€æœºç±»å‹å®ç°"><a href="#6-1-4-çŠ¶æ€æœºç±»å‹å®ç°" class="headerlink" title="6.1.4 çŠ¶æ€æœºç±»å‹å®ç°"></a>6.1.4 çŠ¶æ€æœºç±»å‹å®ç°</h3><h2 id="6-2-è°ƒè¯•ä¸é‡æ„"><a href="#6-2-è°ƒè¯•ä¸é‡æ„" class="headerlink" title="6.2 è°ƒè¯•ä¸é‡æ„"></a>6.2 è°ƒè¯•ä¸é‡æ„</h2><h3 id="6-2-1-å¤æ‚ç±»å‹é”™è¯¯è¿½è¸ªæŠ€å·§"><a href="#6-2-1-å¤æ‚ç±»å‹é”™è¯¯è¿½è¸ªæŠ€å·§" class="headerlink" title="6.2.1 å¤æ‚ç±»å‹é”™è¯¯è¿½è¸ªæŠ€å·§"></a>6.2.1 å¤æ‚ç±»å‹é”™è¯¯è¿½è¸ªæŠ€å·§</h3><h3 id="6-2-2-å£°æ˜æ–‡ä»¶è°ƒè¯•æ–¹æ³•è®º"><a href="#6-2-2-å£°æ˜æ–‡ä»¶è°ƒè¯•æ–¹æ³•è®º" class="headerlink" title="6.2.2 å£°æ˜æ–‡ä»¶è°ƒè¯•æ–¹æ³•è®º"></a>6.2.2 å£°æ˜æ–‡ä»¶è°ƒè¯•æ–¹æ³•è®º</h3><h3 id="6-2-3-é—ç•™ç³»ç»Ÿæ¸è¿›å¼è¿ç§»"><a href="#6-2-3-é—ç•™ç³»ç»Ÿæ¸è¿›å¼è¿ç§»" class="headerlink" title="6.2.3 é—ç•™ç³»ç»Ÿæ¸è¿›å¼è¿ç§»"></a>6.2.3 é—ç•™ç³»ç»Ÿæ¸è¿›å¼è¿ç§»</h3><h3 id="6-2-4-ç±»å‹å®‰å…¨çš„é‡æ„ä¿éšœ"><a href="#6-2-4-ç±»å‹å®‰å…¨çš„é‡æ„ä¿éšœ" class="headerlink" title="6.2.4 ç±»å‹å®‰å…¨çš„é‡æ„ä¿éšœ"></a>6.2.4 ç±»å‹å®‰å…¨çš„é‡æ„ä¿éšœ</h3><h2 id="6-3-å‰æ²¿æ¶æ„"><a href="#6-3-å‰æ²¿æ¶æ„" class="headerlink" title="6.3 å‰æ²¿æ¶æ„"></a>6.3 å‰æ²¿æ¶æ„</h2><h3 id="6-3-1-å¾®å‰ç«¯ç±»å‹é€šä¿¡æ–¹æ¡ˆ"><a href="#6-3-1-å¾®å‰ç«¯ç±»å‹é€šä¿¡æ–¹æ¡ˆ" class="headerlink" title="6.3.1 å¾®å‰ç«¯ç±»å‹é€šä¿¡æ–¹æ¡ˆ"></a>6.3.1 å¾®å‰ç«¯ç±»å‹é€šä¿¡æ–¹æ¡ˆ</h3><h3 id="6-3-2-Serverless-å‡½æ•°ç±»å‹å®‰å…¨"><a href="#6-3-2-Serverless-å‡½æ•°ç±»å‹å®‰å…¨" class="headerlink" title="6.3.2 Serverless å‡½æ•°ç±»å‹å®‰å…¨"></a>6.3.2 Serverless å‡½æ•°ç±»å‹å®‰å…¨</h3><h3 id="6-3-3-WebAssembly-ç±»å‹é›†æˆ"><a href="#6-3-3-WebAssembly-ç±»å‹é›†æˆ" class="headerlink" title="6.3.3 WebAssembly ç±»å‹é›†æˆ"></a>6.3.3 WebAssembly ç±»å‹é›†æˆ</h3><h3 id="6-3-4-Web-Workers-ç±»å‹é€šä¿¡"><a href="#6-3-4-Web-Workers-ç±»å‹é€šä¿¡" class="headerlink" title="6.3.4 Web Workers ç±»å‹é€šä¿¡"></a>6.3.4 Web Workers ç±»å‹é€šä¿¡</h3><h2 id="6-4-é¢è¯•ä¸“é¡¹"><a href="#6-4-é¢è¯•ä¸“é¡¹" class="headerlink" title="6.4 é¢è¯•ä¸“é¡¹"></a>6.4 é¢è¯•ä¸“é¡¹</h2><h3 id="6-4-1-ç±»å‹ä½“æ“è§£é¢˜æ€è·¯"><a href="#6-4-1-ç±»å‹ä½“æ“è§£é¢˜æ€è·¯" class="headerlink" title="6.4.1 ç±»å‹ä½“æ“è§£é¢˜æ€è·¯"></a>6.4.1 ç±»å‹ä½“æ“è§£é¢˜æ€è·¯</h3><h3 id="6-4-2-ç¼–è¯‘åŸç†ç›¸å…³é—®é¢˜"><a href="#6-4-2-ç¼–è¯‘åŸç†ç›¸å…³é—®é¢˜" class="headerlink" title="6.4.2 ç¼–è¯‘åŸç†ç›¸å…³é—®é¢˜"></a>6.4.2 ç¼–è¯‘åŸç†ç›¸å…³é—®é¢˜</h3><h3 id="6-4-3-æ¡†æ¶é›†æˆè®¾è®¡é—®é¢˜"><a href="#6-4-3-æ¡†æ¶é›†æˆè®¾è®¡é—®é¢˜" class="headerlink" title="6.4.3 æ¡†æ¶é›†æˆè®¾è®¡é—®é¢˜"></a>6.4.3 æ¡†æ¶é›†æˆè®¾è®¡é—®é¢˜</h3><h3 id="6-4-4-æ€§èƒ½ä¼˜åŒ–æŒ‡æ ‡åˆ†æ"><a href="#6-4-4-æ€§èƒ½ä¼˜åŒ–æŒ‡æ ‡åˆ†æ" class="headerlink" title="6.4.4 æ€§èƒ½ä¼˜åŒ–æŒ‡æ ‡åˆ†æ"></a>6.4.4 æ€§èƒ½ä¼˜åŒ–æŒ‡æ ‡åˆ†æ</h3>
                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/TypeScript/" class="category-chain-item">TypeScript</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/TypeScript/" class="print-no-link">#TypeScript</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>TypeScript ä¸“é¢˜çŸ¥è¯†å­¦ä¹ </div>
      <div>https://tianfei92.github.io/2025/07/09/TypeScript Study Notes/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>Ariel</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2025å¹´7æœˆ9æ—¥</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-cc-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2025/07/12/Docker%20Study%20Notes/" title="Docker ä¸“é¢˜çŸ¥è¯†å­¦ä¹ ">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Docker ä¸“é¢˜çŸ¥è¯†å­¦ä¹ </span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2025/07/05/NodeJS%20Study%20Notes/" title="NodeJS ä¸“é¢˜çŸ¥è¯†å­¦ä¹ ">
                        <span class="hidden-mobile">NodeJS ä¸“é¢˜çŸ¥è¯†å­¦ä¹ </span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>ç›®å½•</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  



  <script>
  Fluid.utils.createScript('https://lib.baomitu.com/mermaid/8.14.0/mermaid.min.js', function() {
    mermaid.initialize({"theme":"default"});

    Fluid.utils.listenDOMLoaded(function() {
      Fluid.events.registerRefreshCallback(function() {
        if ('mermaid' in window) {
          mermaid.init();
        }
      });
    });
  });
</script>






    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>
</html>
